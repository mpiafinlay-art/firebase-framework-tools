"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/board/[boardId]/page",{

/***/ "(app-pages-browser)/./src/app/board/[boardId]/page.tsx":
/*!******************************************!*\
  !*** ./src/app/board/[boardId]/page.tsx ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ BoardPage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _firebase_provider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/firebase/provider */ \"(app-pages-browser)/./src/firebase/provider.tsx\");\n/* harmony import */ var _lib_store_boardStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/store/boardStore */ \"(app-pages-browser)/./src/lib/store/boardStore.ts\");\n/* harmony import */ var _hooks_use_board_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/hooks/use-board-state */ \"(app-pages-browser)/./src/hooks/use-board-state.ts\");\n/* harmony import */ var _hooks_use_element_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/hooks/use-element-manager */ \"(app-pages-browser)/./src/hooks/use-element-manager.ts\");\n/* harmony import */ var _hooks_use_media_query__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/hooks/use-media-query */ \"(app-pages-browser)/./src/hooks/use-media-query.ts\");\n/* harmony import */ var _hooks_use_toast__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/hooks/use-toast */ \"(app-pages-browser)/./src/hooks/use-toast.ts\");\n/* harmony import */ var _lib_upload_helper__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/lib/upload-helper */ \"(app-pages-browser)/./src/lib/upload-helper.ts\");\n/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! html2canvas */ \"(app-pages-browser)/./node_modules/html2canvas/dist/html2canvas.js\");\n/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(html2canvas__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _components_canvas_canvas__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/canvas/canvas */ \"(app-pages-browser)/./src/components/canvas/canvas.tsx\");\n/* harmony import */ var _components_canvas_tools_sidebar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/components/canvas/tools-sidebar */ \"(app-pages-browser)/./src/components/canvas/tools-sidebar.tsx\");\n/* harmony import */ var _components_canvas_formatting_toolbar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/components/canvas/formatting-toolbar */ \"(app-pages-browser)/./src/components/canvas/formatting-toolbar.tsx\");\n/* harmony import */ var _components_canvas_elements_add_image_from_url_dialog__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/components/canvas/elements/add-image-from-url-dialog */ \"(app-pages-browser)/./src/components/canvas/elements/add-image-from-url-dialog.tsx\");\n/* harmony import */ var _components_canvas_change_format_dialog__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/components/canvas/change-format-dialog */ \"(app-pages-browser)/./src/components/canvas/change-format-dialog.tsx\");\n/* harmony import */ var _components_canvas_elements_edit_comment_dialog__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/components/canvas/elements/edit-comment-dialog */ \"(app-pages-browser)/./src/components/canvas/elements/edit-comment-dialog.tsx\");\n/* harmony import */ var _components_canvas_element_info_panel__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @/components/canvas/element-info-panel */ \"(app-pages-browser)/./src/components/canvas/element-info-panel.tsx\");\n/* harmony import */ var _components_canvas_rename_board_dialog__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @/components/canvas/rename-board-dialog */ \"(app-pages-browser)/./src/components/canvas/rename-board-dialog.tsx\");\n/* harmony import */ var _hooks_use_dictation__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @/hooks/use-dictation */ \"(app-pages-browser)/./src/hooks/use-dictation.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n// Hooks y Contextos\n\n\n\n\n\n\n// Utilidades y Tipos\n\n\n// Componentes del Canvas\n\n\n\n// Diálogos\n\n\n\n\n\n// Hook de dictado\n\nfunction BoardPage(param) {\n    let { params } = param;\n    var _elements_find;\n    _s();\n    const { boardId } = params;\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const { user, isUserLoading: authLoading, userError } = (0,_firebase_provider__WEBPACK_IMPORTED_MODULE_3__.useUser)();\n    const storage = (0,_firebase_provider__WEBPACK_IMPORTED_MODULE_3__.useStorage)();\n    const { toast } = (0,_hooks_use_toast__WEBPACK_IMPORTED_MODULE_8__.useToast)();\n    const isMobile = (0,_hooks_use_media_query__WEBPACK_IMPORTED_MODULE_7__.useMediaQuery)(\"(max-width: 768px)\");\n    // DEBUG: Log inmediato al inicio del componente\n    console.log(\"\\uD83C\\uDFAF [BoardPage] Componente iniciado\", {\n        boardId,\n        hasUser: !!user,\n        userId: user === null || user === void 0 ? void 0 : user.uid,\n        isAnonymous: user === null || user === void 0 ? void 0 : user.isAnonymous,\n        authLoading,\n        pathname:  true ? window.location.pathname : 0\n    });\n    // CRÍTICO: Usar refs para funciones de Zustand y toast para evitar bucles infinitos\n    const loadBoardRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const createBoardRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const cleanupRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const toastRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(toast);\n    // Actualizar refs cuando cambian\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        toastRef.current = toast;\n    }, [\n        toast\n    ]);\n    // DEBUG: Log cuando el componente se monta\n    react__WEBPACK_IMPORTED_MODULE_1___default().useEffect(()=>{\n        console.log(\"\\uD83D\\uDE80 [BoardPage] Componente montado\", {\n            boardId\n        });\n    }, [\n        boardId\n    ]);\n    // DEBUG: Log del estado del usuario\n    react__WEBPACK_IMPORTED_MODULE_1___default().useEffect(()=>{\n        console.log(\"\\uD83D\\uDD0D [BoardPage] Estado del usuario:\", {\n            hasUser: !!user,\n            userId: user === null || user === void 0 ? void 0 : user.uid,\n            isUserLoading: authLoading,\n            userError: userError === null || userError === void 0 ? void 0 : userError.message,\n            userEmail: user === null || user === void 0 ? void 0 : user.email,\n            isAnonymous: user === null || user === void 0 ? void 0 : user.isAnonymous,\n            sessionStorage:  true ? {\n                hasRecentLogin: sessionStorage.getItem(\"hasRecentLogin\"),\n                loginTimestamp: sessionStorage.getItem(\"loginTimestamp\"),\n                redirectingToBoard: sessionStorage.getItem(\"redirectingToBoard\")\n            } : 0\n        });\n    }, [\n        user,\n        authLoading,\n        userError\n    ]);\n    // -- ESTADO GLOBAL DEL TABLERO (Zustand) --\n    const { elements, board, loadBoard, createBoard, updateElement, deleteElement, selectedElementIds, setSelectedElementIds, isLoading: isBoardLoading, error, cleanup } = (0,_lib_store_boardStore__WEBPACK_IMPORTED_MODULE_4__.useBoardStore)();\n    // CRÍTICO: Actualizar refs cuando las funciones de Zustand cambian\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        loadBoardRef.current = loadBoard;\n        createBoardRef.current = createBoard;\n        cleanupRef.current = cleanup;\n    }, [\n        loadBoard,\n        createBoard,\n        cleanup\n    ]);\n    // -- ESTADO LOCAL Y HOOKS --\n    // CRÍTICO: useBoardState crea listeners DUPLICADOS de Firebase para elements\n    // Solo usar para boards, handleRenameBoard, handleDeleteBoard, clearCanvas\n    // NO usar elements de useBoardState - usar solo de useBoardStore\n    const { boards, handleRenameBoard, handleDeleteBoard, clearCanvas } = (0,_hooks_use_board_state__WEBPACK_IMPORTED_MODULE_5__.useBoardState)(boardId);\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Wrapper functions para coincidir con los tipos esperados\n    const handleRenameBoardWrapper = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setIsRenameBoardDialogOpen(true);\n    }, []);\n    const handleSaveRenameBoard = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newName)=>{\n        handleRenameBoard(newName);\n        setIsRenameBoardDialogOpen(false);\n    }, [\n        handleRenameBoard\n    ]);\n    const clearCanvasWrapper = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        clearCanvas(elements);\n    }, [\n        elements,\n        clearCanvas\n    ]);\n    // Estados de UI\n    const [isFormatToolbarOpen, setIsFormatToolbarOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [isImageUrlDialogOpen, setIsImageUrlDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [changeFormatDialogOpen, setChangeFormatDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isPanningActive, setIsPanningActive] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isRenameBoardDialogOpen, setIsRenameBoardDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Estados de Selección y Edición\n    const [selectedElement, setSelectedElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [activatedElementId, setActivatedElementId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [selectedNotepadForFormat, setSelectedNotepadForFormat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isDirty, setIsDirty] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isEditCommentDialogOpen, setIsEditCommentDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedCommentForEdit, setSelectedCommentForEdit] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Ref para almacenar zIndex original de elementos cuando se editan\n    const originalZIndexRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map());\n    // Panel de información del elemento (Opción 4: Combinación Panel + Consola)\n    const [isInfoPanelVisible, setIsInfoPanelVisible] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false); // Oculto por defecto, se muestra al seleccionar elemento\n    // -- DICTADO DE VOZ --\n    // Hook de dictado simplificado según Readme 18 Nov\n    const { isSupported: isDictationSupported, isListening: isDictationListening, transcript, finalTranscript, interimTranscript, permissionError, toggle: toggleDictation } = (0,_hooks_use_dictation__WEBPACK_IMPORTED_MODULE_19__.useDictation)();\n    // liveTranscript combina finalTranscript + interimTranscript para mostrar en tiempo real\n    const liveTranscript = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        // Combinar texto final acumulado con texto provisional\n        const final = finalTranscript || \"\";\n        const interim = interimTranscript || \"\";\n        // Si hay texto provisional, agregarlo al final del texto final\n        if (interim.trim()) {\n            return final + (final ? \" \" : \"\") + interim;\n        }\n        return final;\n    }, [\n        finalTranscript,\n        interimTranscript\n    ]);\n    const handleToggleDictation = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        try {\n            await toggleDictation();\n        } catch (error) {\n            console.error(\"Error al alternar dictado:\", error);\n        }\n    }, [\n        toggleDictation\n    ]);\n    // Mostrar error de permisos al usuario\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (permissionError) {\n            toast({\n                variant: \"destructive\",\n                title: \"Error de Permisos\",\n                description: permissionError,\n                duration: 5000\n            });\n        }\n    }, [\n        permissionError,\n        toast\n    ]);\n    // -- GESTIÓN DE ELEMENTOS --\n    const getViewportCenter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (canvasRef.current) {\n            const center = canvasRef.current.getViewportCenter();\n            // CRÍTICO: Asegurar que cuando el scroll está en 0,0, los elementos se creen cerca del origen\n            // El viewport center debe ser relativo a la posición visible, no absoluta\n            return center;\n        }\n        // Fallback: retornar centro del viewport visible (no absoluto)\n        if (true) {\n            return {\n                x: window.innerWidth / 2,\n                y: window.innerHeight / 2\n            };\n        }\n        return {\n            x: 40000,\n            y: 40000\n        }; // Fallback para SSR\n    }, []);\n    // CRÍTICO: Usar ref para elements para evitar recreación de función\n    const elementsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(elements);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        elementsRef.current = elements;\n    }, [\n        elements\n    ]);\n    const getNextZIndex = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const currentElements = elementsRef.current;\n        if (!currentElements || currentElements.length === 0) return 1;\n        const zIndexes = currentElements.filter((e)=>typeof e.zIndex === \"number\").map((e)=>e.zIndex);\n        return zIndexes.length > 0 ? Math.max(...zIndexes) + 1 : 2;\n    }, []); // ✅ Sin dependencias - usa ref\n    const { addElement } = (0,_hooks_use_element_manager__WEBPACK_IMPORTED_MODULE_6__.useElementManager)(boardId, getViewportCenter, getNextZIndex);\n    // -- EFECTOS --\n    // Sincronizar selección\n    // CRÍTICO: Optimizado para evitar re-renders constantes y bucles infinitos\n    const selectedElementId = selectedElementIds.length === 1 ? selectedElementIds[0] : null;\n    const foundElement = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        if (!selectedElementId || !elements || elements.length === 0) return null;\n        return elements.find((el)=>el.id === selectedElementId) || null;\n    }, [\n        selectedElementId,\n        elements.length,\n        selectedElementId ? (_elements_find = elements.find((e)=>e.id === selectedElementId)) === null || _elements_find === void 0 ? void 0 : _elements_find.updatedAt : null\n    ]); // ✅ Depender de length y updatedAt, no del array completo\n    // CRÍTICO: Solo actualizar si el ID realmente cambió (evitar bucles infinitos)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        var _foundElement_id;\n        const foundId = (_foundElement_id = foundElement === null || foundElement === void 0 ? void 0 : foundElement.id) !== null && _foundElement_id !== void 0 ? _foundElement_id : null;\n        var _selectedElement_id;\n        const currentId = (_selectedElement_id = selectedElement === null || selectedElement === void 0 ? void 0 : selectedElement.id) !== null && _selectedElement_id !== void 0 ? _selectedElement_id : null;\n        if (foundId !== currentId) {\n            setSelectedElement(foundElement);\n        }\n    }, [\n        foundElement === null || foundElement === void 0 ? void 0 : foundElement.id,\n        selectedElement === null || selectedElement === void 0 ? void 0 : selectedElement.id\n    ]); // ✅ Depender solo de IDs, no de objetos completos\n    // -- LOGGING EN CONSOLA cuando se selecciona un elemento --\n    // OPTIMIZADO: Solo loggear en desarrollo y con información esencial\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (selectedElement) {\n            // Mostrar panel automáticamente cuando se selecciona un elemento\n            setIsInfoPanelVisible(true);\n            // Solo loggear en desarrollo y de forma optimizada\n            if (true) {\n                var _selectedElement_properties_position, _selectedElement_properties, _selectedElement_properties_position1, _selectedElement_properties1, _selectedElement_properties_size, _selectedElement_properties2, _selectedElement_properties_size1, _selectedElement_properties3;\n                console.log(\"\\uD83D\\uDCCB Elemento seleccionado:\", {\n                    id: selectedElement.id,\n                    type: selectedElement.type,\n                    position: {\n                        x: ((_selectedElement_properties = selectedElement.properties) === null || _selectedElement_properties === void 0 ? void 0 : (_selectedElement_properties_position = _selectedElement_properties.position) === null || _selectedElement_properties_position === void 0 ? void 0 : _selectedElement_properties_position.x) || selectedElement.x || 0,\n                        y: ((_selectedElement_properties1 = selectedElement.properties) === null || _selectedElement_properties1 === void 0 ? void 0 : (_selectedElement_properties_position1 = _selectedElement_properties1.position) === null || _selectedElement_properties_position1 === void 0 ? void 0 : _selectedElement_properties_position1.y) || selectedElement.y || 0\n                    },\n                    size: {\n                        width: ((_selectedElement_properties2 = selectedElement.properties) === null || _selectedElement_properties2 === void 0 ? void 0 : (_selectedElement_properties_size = _selectedElement_properties2.size) === null || _selectedElement_properties_size === void 0 ? void 0 : _selectedElement_properties_size.width) || selectedElement.width || 0,\n                        height: ((_selectedElement_properties3 = selectedElement.properties) === null || _selectedElement_properties3 === void 0 ? void 0 : (_selectedElement_properties_size1 = _selectedElement_properties3.size) === null || _selectedElement_properties_size1 === void 0 ? void 0 : _selectedElement_properties_size1.height) || selectedElement.height || 0\n                    },\n                    zIndex: selectedElement.zIndex,\n                    parentId: selectedElement.parentId\n                });\n                // Log completo solo si está habilitado el debug\n                if (window.DEBUG_ELEMENTS) {\n                    console.log(\"Elemento completo:\", selectedElement);\n                }\n            }\n        } else {\n            // Ocultar panel cuando no hay elemento seleccionado\n            setIsInfoPanelVisible(false);\n        }\n    }, [\n        selectedElement\n    ]);\n    // -- ATAJO DE TECLADO: Ctrl+Shift+D para mostrar/ocultar panel --\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleKeyDown = (e)=>{\n            if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === \"D\") {\n                e.preventDefault();\n                setIsInfoPanelVisible((prev)=>!prev);\n            }\n        };\n        window.addEventListener(\"keydown\", handleKeyDown);\n        return ()=>window.removeEventListener(\"keydown\", handleKeyDown);\n    }, []);\n    // CRÍTICO: REFS para prevenir múltiples ejecuciones\n    const hasLoadedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const isLoadingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const waitTimerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const currentBoardIdRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // CONSOLIDADO: Un solo useEffect para login y carga de tablero\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (false) {}\n        console.log(\"\\uD83D\\uDD04 [BoardPage] useEffect ejecutado\", {\n            boardId,\n            hasUser: !!user,\n            userId: user === null || user === void 0 ? void 0 : user.uid,\n            isAnonymous: user === null || user === void 0 ? void 0 : user.isAnonymous,\n            authLoading,\n            isLoading: isLoadingRef.current,\n            hasLoaded: hasLoadedRef.current,\n            currentBoardId: currentBoardIdRef.current\n        });\n        // Resetear flags si cambió boardId\n        if (currentBoardIdRef.current !== boardId) {\n            console.log(\"\\uD83D\\uDD04 [BoardPage] BoardId cambi\\xf3, reseteando flags\", {\n                old: currentBoardIdRef.current,\n                new: boardId\n            });\n            hasLoadedRef.current = false;\n            isLoadingRef.current = false;\n            currentBoardIdRef.current = boardId;\n        }\n        // Prevenir múltiples ejecuciones\n        if (isLoadingRef.current || authLoading) {\n            console.log(\"⏸️ [BoardPage] Saltando ejecuci\\xf3n (ya cargando o auth cargando)\", {\n                isLoading: isLoadingRef.current,\n                authLoading\n            });\n            return;\n        }\n        // Limpiar timer anterior\n        if (waitTimerRef.current) {\n            clearTimeout(waitTimerRef.current);\n            waitTimerRef.current = null;\n        }\n        // Verificar login reciente (solo en cliente)\n        const hasRecentLogin =  true ? sessionStorage.getItem(\"hasRecentLogin\") === \"true\" : 0;\n        const loginTimestamp =  true ? sessionStorage.getItem(\"loginTimestamp\") : 0;\n        const redirectingToBoard =  true ? sessionStorage.getItem(\"redirectingToBoard\") : 0;\n        const anonymousUserId =  true ? sessionStorage.getItem(\"anonymousUserId\") : 0;\n        // CRÍTICO: Aumentar tiempo de espera a 2 minutos para dar tiempo a Firebase Auth de inicializar\n        const isLoginRecent = hasRecentLogin && loginTimestamp && Date.now() - parseInt(loginTimestamp) < 120000;\n        console.log(\"\\uD83D\\uDD0D [BoardPage] Estado de autenticaci\\xf3n:\", {\n            hasUser: !!user,\n            userId: user === null || user === void 0 ? void 0 : user.uid,\n            hasRecentLogin,\n            loginTimestamp,\n            redirectingToBoard,\n            boardId,\n            isLoginRecent,\n            anonymousUserId,\n            timeSinceLogin: loginTimestamp ? Date.now() - parseInt(loginTimestamp) : null\n        });\n        // Redirigir si no hay usuario y no hay login reciente\n        if (!user && !isLoginRecent) {\n            console.log(\"⚠️ [BoardPage] No hay usuario ni login reciente, redirigiendo a inicio...\");\n            if (true) {\n                sessionStorage.clear();\n                localStorage.clear();\n                window.location.replace(\"/\");\n            }\n            return;\n        }\n        // Esperar si hay login reciente pero no usuario (CRÍTICO para usuarios anónimos después de redirect)\n        if (isLoginRecent && !user) {\n            // CRÍTICO: Aumentar tiempo de espera - Firebase Auth puede tardar en inicializar después de redirect\n            const waitTime = redirectingToBoard === boardId ? 60000 : 30000; // 60s si es el tablero correcto, 30s si no\n            console.log(\"⏳ [BoardPage] Esperando usuario despu\\xe9s de login reciente...\", {\n                waitTime,\n                redirectingToBoard,\n                boardId,\n                hasRecentLogin,\n                loginTimestamp,\n                anonymousUserId,\n                timeSinceLogin: loginTimestamp ? Date.now() - parseInt(loginTimestamp) : null\n            });\n            waitTimerRef.current = setTimeout(()=>{\n                if (!user && \"object\" !== \"undefined\") {\n                    console.log(\"⚠️ [BoardPage] Timeout: Usuario no disponible despu\\xe9s de esperar, redirigiendo...\");\n                    // CRÍTICO: No limpiar sessionStorage completamente - puede haber información útil\n                    // Solo limpiar flags de login, mantener anonymousUserId si existe\n                    sessionStorage.removeItem(\"hasRecentLogin\");\n                    sessionStorage.removeItem(\"loginTimestamp\");\n                    sessionStorage.removeItem(\"redirectingToBoard\");\n                    window.location.replace(\"/\");\n                }\n            }, waitTime);\n            return;\n        }\n        // Cargar/crear tablero (SOLO UNA VEZ)\n        if ((user === null || user === void 0 ? void 0 : user.uid) && !hasLoadedRef.current && loadBoardRef.current && createBoardRef.current) {\n            console.log(\"✅ [BoardPage] Usuario disponible, cargando/creando tablero\", {\n                userId: user.uid,\n                boardId,\n                isAnonymous: user.isAnonymous\n            });\n            hasLoadedRef.current = true;\n            isLoadingRef.current = true;\n            const userId = user.uid;\n            if (boardId === \"new\") {\n                createBoardRef.current(userId).then((newBoardId)=>{\n                    isLoadingRef.current = false;\n                    if (newBoardId && \"object\" !== \"undefined\") {\n                        sessionStorage.setItem(\"hasRecentLogin\", \"true\");\n                        sessionStorage.setItem(\"loginTimestamp\", Date.now().toString());\n                        window.location.href = \"/board/\".concat(newBoardId);\n                    } else {\n                        hasLoadedRef.current = false;\n                    }\n                }).catch((error)=>{\n                    isLoadingRef.current = false;\n                    hasLoadedRef.current = false;\n                    console.error(\"❌ Error al crear tablero:\", error);\n                });\n            } else {\n                loadBoardRef.current(boardId, userId).then((loadedBoardId)=>{\n                    isLoadingRef.current = false;\n                    if (loadedBoardId && \"object\" !== \"undefined\") {\n                        // CRÍTICO: Solo limpiar sessionStorage después de confirmar que el tablero se cargó exitosamente\n                        // Esperar más tiempo para asegurar que todo está cargado\n                        setTimeout(()=>{\n                            sessionStorage.removeItem(\"hasRecentLogin\");\n                            sessionStorage.removeItem(\"loginTimestamp\");\n                            sessionStorage.removeItem(\"redirectingToBoard\");\n                        // NO limpiar anonymousUserId - puede ser necesario para futuras navegaciones\n                        }, 5000); // Aumentar a 5 segundos\n                    } else {\n                        hasLoadedRef.current = false;\n                    }\n                }).catch((error)=>{\n                    isLoadingRef.current = false;\n                    hasLoadedRef.current = false;\n                    console.error(\"❌ Error al cargar tablero:\", error);\n                });\n            }\n        }\n        // Cleanup\n        return ()=>{\n            if (waitTimerRef.current) {\n                clearTimeout(waitTimerRef.current);\n                waitTimerRef.current = null;\n            }\n            if (cleanupRef.current) {\n                cleanupRef.current();\n            }\n        };\n    }, [\n        boardId,\n        user,\n        authLoading\n    ]);\n    // -- HANDLERS DE ACCIÓN --\n    const handleSelectElement = (elementId, isMultiSelect)=>{\n        if (elementId === null) setSelectedElementIds([]);\n        else setSelectedElementIds([\n            elementId\n        ]);\n    };\n    const handleUploadImage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        if (!(user === null || user === void 0 ? void 0 : user.uid)) {\n            toast({\n                title: \"Error\",\n                description: \"Debes iniciar sesi\\xf3n\"\n            });\n            return;\n        }\n        const userId = user.uid; // Guardar en variable local\n        const input = document.createElement(\"input\");\n        input.type = \"file\";\n        input.accept = \"image/*\";\n        input.onchange = async (e)=>{\n            var _e_target_files;\n            const file = (_e_target_files = e.target.files) === null || _e_target_files === void 0 ? void 0 : _e_target_files[0];\n            if (!file) return;\n            try {\n                const uploadResult = await (0,_lib_upload_helper__WEBPACK_IMPORTED_MODULE_9__.uploadFile)(file, userId, storage);\n                if (uploadResult.url) {\n                    await addElement(\"image\", {\n                        content: {\n                            url: uploadResult.url\n                        },\n                        properties: {\n                            size: {\n                                width: 300,\n                                height: 200\n                            }\n                        }\n                    });\n                    toast({\n                        title: \"Imagen subida\"\n                    });\n                }\n            } catch (error) {\n                toast({\n                    variant: \"destructive\",\n                    title: \"Error al subir imagen\"\n                });\n            }\n        };\n        input.click();\n    }, [\n        user,\n        storage,\n        addElement,\n        toast\n    ]);\n    const handleFormatToggle = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>setIsFormatToolbarOpen((prev)=>!prev), []);\n    // Handler para agregar marcador/localizador desde el menú formato\n    const handleAddMarker = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        const viewportCenter = getViewportCenter();\n        try {\n            await addElement(\"comment\", {\n                content: {\n                    title: \"Nuevo Localizador\",\n                    label: \"Localizador\",\n                    text: \"\"\n                },\n                properties: {\n                    position: viewportCenter,\n                    size: {\n                        width: 48,\n                        height: 48\n                    }\n                }\n            });\n            toast({\n                title: \"Localizador creado\",\n                description: \"Se ha marcado una nueva ubicaci\\xf3n en el tablero. Edita el nombre para identificarlo.\"\n            });\n        } catch (error) {\n            toast({\n                variant: \"destructive\",\n                title: \"Error\",\n                description: error.message || \"No se pudo crear el localizador.\"\n            });\n        }\n    }, [\n        getViewportCenter,\n        addElement,\n        toast\n    ]);\n    const handleLocateElement = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        const element = elements.find((el)=>el.id === id);\n        if (element && canvasRef.current) {\n            handleSelectElement(id, false);\n            canvasRef.current.centerOnElement(element);\n        }\n    }, [\n        elements\n    ]);\n    const handleOpenNotepad = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (id)=>{\n        const element = elements.find((el)=>el.id === id);\n        if (!element) return;\n        updateElement(id, {\n            hidden: false\n        });\n        handleSelectElement(id, false);\n        if (canvasRef.current) canvasRef.current.centerOnElement(element);\n    }, [\n        elements,\n        updateElement\n    ]);\n    const handleChangeNotepadFormat = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        const element = elements.find((el)=>el.id === id);\n        if (element) {\n            setSelectedNotepadForFormat(element);\n            setChangeFormatDialogOpen(true);\n        }\n    }, [\n        elements\n    ]);\n    const handleSaveFormat = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id, format)=>{\n        // FIX: Corregir dimensiones - 10x15 significa 10cm ancho x 15cm alto (no 21 alto x 15 ancho)\n        // 10cm = ~378px, 15cm = ~567px (a 96 DPI)\n        const newSize = format === \"letter\" ? {\n            width: 794,\n            height: 1021\n        } // Carta: 8.5\" x 11\"\n         : {\n            width: 378,\n            height: 567\n        }; // 10x15: 10cm ancho x 15cm alto (CORREGIDO)\n        updateElement(id, {\n            width: newSize.width,\n            height: newSize.height,\n            properties: {\n                ...selectedNotepadForFormat === null || selectedNotepadForFormat === void 0 ? void 0 : selectedNotepadForFormat.properties,\n                format,\n                size: newSize\n            }\n        });\n        setChangeFormatDialogOpen(false);\n    }, [\n        selectedNotepadForFormat,\n        updateElement\n    ]);\n    const handleEditComment = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((comment)=>{\n        setSelectedCommentForEdit(comment);\n        setIsEditCommentDialogOpen(true);\n    }, []);\n    // REGLAS Z-INDEX: Cuando se hace click en un elemento, pasa al frente para editarlo\n    // Cuadernos y lienzo siempre están en primera capa (zIndex base alto)\n    // Después de editar, el elemento vuelve a su posición original\n    const handleEditElement = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((elementId)=>{\n        const element = elements.find((el)=>el.id === elementId);\n        if (!element) return;\n        // Tipos que siempre deben estar en primera capa (después del tablero)\n        const firstLayerTypes = [\n            \"notepad\",\n            \"notepad-simple\",\n            \"test-notepad\",\n            \"tabbed-notepad\",\n            \"yellow-notepad\"\n        ];\n        const isFirstLayer = firstLayerTypes.includes(element.type);\n        // Obtener zIndex actual\n        const elementProps = typeof element.properties === \"object\" && element.properties !== null ? element.properties : {};\n        var _elementProps_zIndex, _ref;\n        const currentZIndex = (_ref = (_elementProps_zIndex = elementProps.zIndex) !== null && _elementProps_zIndex !== void 0 ? _elementProps_zIndex : element.zIndex) !== null && _ref !== void 0 ? _ref : 1;\n        // Guardar zIndex original si no está guardado\n        if (!originalZIndexRef.current.has(elementId)) {\n            originalZIndexRef.current.set(elementId, currentZIndex);\n        }\n        // Calcular nuevo zIndex: traer al frente temporalmente\n        const maxZIndex = getNextZIndex();\n        const newZIndex = isFirstLayer ? Math.max(maxZIndex - 100, 1000) // Primera capa: mínimo 1000\n         : maxZIndex; // Otros elementos: máximo disponible\n        // Actualizar zIndex para traer al frente\n        updateElement(elementId, {\n            properties: {\n                ...elementProps,\n                zIndex: newZIndex\n            }\n        });\n        // Activar elemento para edición\n        setActivatedElementId(elementId);\n        // Centrar vista en el elemento si está disponible\n        if (canvasRef.current) {\n            canvasRef.current.centerOnElement(element);\n        }\n    }, [\n        elements,\n        getNextZIndex,\n        updateElement\n    ]);\n    // Restaurar zIndex original cuando se deselecciona un elemento\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activatedElementId && originalZIndexRef.current.size > 0) {\n            // Restaurar zIndex original de todos los elementos editados\n            originalZIndexRef.current.forEach((originalZIndex, elementId)=>{\n                const element = elements.find((el)=>el.id === elementId);\n                if (element) {\n                    const elementProps = typeof element.properties === \"object\" && element.properties !== null ? element.properties : {};\n                    var _elementProps_zIndex, _ref;\n                    const currentZIndex = (_ref = (_elementProps_zIndex = elementProps.zIndex) !== null && _elementProps_zIndex !== void 0 ? _elementProps_zIndex : element.zIndex) !== null && _ref !== void 0 ? _ref : 1;\n                    // Solo restaurar si el zIndex actual es diferente al original\n                    if (currentZIndex !== originalZIndex) {\n                        updateElement(elementId, {\n                            properties: {\n                                ...elementProps,\n                                zIndex: originalZIndex\n                            }\n                        });\n                    }\n                }\n            });\n            // Limpiar el mapa después de restaurar\n            originalZIndexRef.current.clear();\n        }\n    }, [\n        activatedElementId,\n        elements,\n        updateElement\n    ]);\n    // Función para exportar el tablero completo a PNG de alta resolución\n    const handleExportBoardToPng = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        try {\n            if (!canvasRef.current) {\n                toast({\n                    variant: \"destructive\",\n                    title: \"Error\",\n                    description: \"No se pudo acceder al lienzo.\"\n                });\n                return;\n            }\n            // Obtener el contenedor del canvas\n            const canvasContainer = canvasRef.current.getCanvasContainer();\n            if (!canvasContainer) {\n                toast({\n                    variant: \"destructive\",\n                    title: \"Error\",\n                    description: \"No se pudo encontrar el contenedor del lienzo.\"\n                });\n                return;\n            }\n            toast({\n                title: \"Exportando...\",\n                description: \"Generando imagen PNG de alta resoluci\\xf3n del tablero completo. Esto puede tardar unos segundos...\"\n            });\n            // Ocultar elementos de UI temporalmente para la exportación\n            document.body.classList.add(\"exporting-to-png\");\n            // Capturar SOLO el área visible del usuario (viewport) - Usar misma lógica de alta resolución que cuadernos\n            const scrollLeft = canvasContainer.scrollLeft;\n            const scrollTop = canvasContainer.scrollTop;\n            const viewportWidth = canvasContainer.clientWidth;\n            const viewportHeight = canvasContainer.clientHeight;\n            const scale = 3; // Alta resolución (misma que cuadernos) - captando todos los detalles\n            // Obtener el rectángulo del contenedor para calcular la posición relativa\n            const containerRect = canvasContainer.getBoundingClientRect();\n            const canvas = await html2canvas__WEBPACK_IMPORTED_MODULE_10___default()(canvasContainer, {\n                backgroundColor: \"#96e4e6\",\n                scale: scale,\n                useCORS: true,\n                logging: false,\n                allowTaint: false,\n                scrollX: -scrollLeft,\n                scrollY: -scrollTop,\n                width: viewportWidth,\n                height: viewportHeight,\n                windowWidth: viewportWidth,\n                windowHeight: viewportHeight,\n                x: containerRect.left + scrollLeft,\n                y: containerRect.top + scrollTop\n            });\n            // Restaurar elementos de UI\n            document.body.classList.remove(\"exporting-to-png\");\n            // Convertir canvas a blob y descargar\n            canvas.toBlob((blob)=>{\n                if (!blob) {\n                    toast({\n                        variant: \"destructive\",\n                        title: \"Error\",\n                        description: \"No se pudo generar la imagen.\"\n                    });\n                    return;\n                }\n                // Crear URL temporal y descargar\n                const url = URL.createObjectURL(blob);\n                const link = document.createElement(\"a\");\n                link.href = url;\n                const boardName = (board === null || board === void 0 ? void 0 : board.name) || \"tablero\";\n                link.download = \"\".concat(boardName, \"_\").concat(Date.now(), \".png\");\n                document.body.appendChild(link);\n                link.click();\n                document.body.removeChild(link);\n                URL.revokeObjectURL(url);\n                // Mostrar toast de éxito\n                toast({\n                    title: \"Exportado\",\n                    description: \"El tablero se ha exportado como PNG de alta resoluci\\xf3n.\"\n                });\n            }, \"image/png\", 1.0); // Calidad máxima\n        } catch (error) {\n            document.body.classList.remove(\"exporting-to-png\");\n            console.error(\"Error al exportar tablero:\", error);\n            toast({\n                variant: \"destructive\",\n                title: \"Error\",\n                description: error.message || \"No se pudo exportar el tablero.\"\n            });\n        }\n    }, [\n        canvasRef,\n        board,\n        toast\n    ]);\n    // -- RENDER --\n    // DEBUG: Log del estado antes de cualquier return\n    console.log(\"\\uD83C\\uDFA8 [BoardPage] Render:\", {\n        boardId,\n        hasUser: !!user,\n        userId: user === null || user === void 0 ? void 0 : user.uid,\n        isAnonymous: user === null || user === void 0 ? void 0 : user.isAnonymous,\n        authLoading,\n        isBoardLoading,\n        hasBoard: !!board,\n        sessionStorage:  true ? {\n            hasRecentLogin: sessionStorage.getItem(\"hasRecentLogin\"),\n            loginTimestamp: sessionStorage.getItem(\"loginTimestamp\"),\n            redirectingToBoard: sessionStorage.getItem(\"redirectingToBoard\")\n        } : 0\n    });\n    // Mostrar loading mientras auth está cargando\n    if (authLoading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex h-screen w-full flex-col items-center justify-center\",\n            style: {\n                backgroundColor: \"#96e4e6\"\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                    className: \"h-8 w-8 animate-spin text-slate-900\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 772,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-lg font-semibold text-slate-900\",\n                    children: \"Verificando autenticaci\\xf3n...\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 773,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n            lineNumber: 771,\n            columnNumber: 7\n        }, this);\n    }\n    // Si no hay usuario después de cargar, verificar login reciente antes de redirigir\n    if (!user) {\n        // Verificar si hay login reciente (para usuarios anónimos después de redirect)\n        if (true) {\n            const hasRecentLogin = sessionStorage.getItem(\"hasRecentLogin\") === \"true\";\n            const loginTimestamp = sessionStorage.getItem(\"loginTimestamp\");\n            const redirectingToBoard = sessionStorage.getItem(\"redirectingToBoard\");\n            const isLoginRecent = hasRecentLogin && loginTimestamp && Date.now() - parseInt(loginTimestamp) < 60000;\n            if (isLoginRecent) {\n                // Mostrar loading mientras esperamos que Firebase Auth restaure el usuario anónimo\n                console.log(\"⏳ [BoardPage] Render: Login reciente detectado, esperando usuario...\", {\n                    hasRecentLogin,\n                    loginTimestamp,\n                    redirectingToBoard,\n                    boardId\n                });\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex h-screen w-full flex-col items-center justify-center\",\n                    style: {\n                        backgroundColor: \"#96e4e6\"\n                    },\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                            className: \"h-8 w-8 animate-spin text-slate-900\"\n                        }, void 0, false, {\n                            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                            lineNumber: 797,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"mt-4 text-lg font-semibold text-slate-900\",\n                            children: \"Cargando tu tablero...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                            lineNumber: 798,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 796,\n                    columnNumber: 11\n                }, this);\n            }\n        }\n        // Si no hay login reciente, redirigir\n        console.log(\"⚠️ [BoardPage] Render: No hay usuario y no hay login reciente, redirigiendo...\");\n        if (true) {\n            sessionStorage.clear();\n            localStorage.clear();\n            window.location.replace(\"/\");\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex h-screen w-full flex-col items-center justify-center\",\n            style: {\n                backgroundColor: \"#cae3e1\"\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                    className: \"h-8 w-8 animate-spin text-slate-900\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 813,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-lg font-semibold text-slate-900\",\n                    children: \"Redirigiendo...\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 814,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n            lineNumber: 812,\n            columnNumber: 7\n        }, this);\n    }\n    if (isBoardLoading || boardId === \"new\") {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex h-screen w-full flex-col items-center justify-center\",\n            style: {\n                backgroundColor: \"#75e8ce\"\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                    className: \"h-8 w-8 animate-spin text-slate-900\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 822,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-lg font-semibold text-slate-900\",\n                    children: \"Cargando tu lienzo...\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 823,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n            lineNumber: 821,\n            columnNumber: 7\n        }, this);\n    }\n    if (error) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"p-10 text-red-500\",\n        children: [\n            \"Error: \",\n            error\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n        lineNumber: 828,\n        columnNumber: 21\n    }, this);\n    // Si no hay tablero pero hay usuario, mostrar loading mientras se carga\n    if (!board && user) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex h-screen w-full flex-col items-center justify-center\",\n            style: {\n                backgroundColor: \"#cae3e1\"\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                    className: \"h-8 w-8 animate-spin text-slate-900\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 834,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-lg font-semibold text-slate-900\",\n                    children: \"Cargando tu tablero...\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 835,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n            lineNumber: 833,\n            columnNumber: 7\n        }, this);\n    }\n    // Si no hay tablero y no hay usuario, ya se manejó arriba\n    if (!board) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_rename_board_dialog__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                isOpen: isRenameBoardDialogOpen,\n                onOpenChange: setIsRenameBoardDialogOpen,\n                currentBoardName: (board === null || board === void 0 ? void 0 : board.name) || \"Sin nombre\",\n                onSave: handleSaveRenameBoard\n            }, void 0, false, {\n                fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                lineNumber: 845,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"h-screen w-screen relative bg-[#3b3b3b] overflow-hidden\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_canvas__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                        ref: canvasRef,\n                        elements: elements,\n                        board: board,\n                        selectedElementIds: selectedElementIds,\n                        onSelectElement: handleSelectElement,\n                        updateElement: updateElement,\n                        deleteElement: deleteElement,\n                        unanchorElement: (id)=>{\n                            const element = elements.find((el)=>el.id === id);\n                            if (element && element.parentId) {\n                                updateElement(id, {\n                                    parentId: undefined\n                                });\n                            }\n                        },\n                        addElement: addElement,\n                        // Interacciones\n                        onLocateElement: handleLocateElement,\n                        onFormatToggle: handleFormatToggle,\n                        onChangeNotepadFormat: handleChangeNotepadFormat,\n                        onEditElement: handleEditElement,\n                        // Estado\n                        selectedElement: selectedElement,\n                        activatedElementId: activatedElementId,\n                        isMobile: isMobile,\n                        setIsDirty: setIsDirty,\n                        isListening: isDictationListening,\n                        liveTranscript: liveTranscript,\n                        finalTranscript: finalTranscript,\n                        interimTranscript: interimTranscript,\n                        // Placeholders para props requeridas por Canvas antiguo\n                        onBringToFront: ()=>{},\n                        onSendToBack: ()=>{},\n                        onMoveBackward: ()=>{},\n                        onGoToHome: ()=>{\n                            var _canvasRef_current;\n                            return (_canvasRef_current = canvasRef.current) === null || _canvasRef_current === void 0 ? void 0 : _canvasRef_current.goToHome();\n                        },\n                        onCenterView: ()=>{},\n                        onGroupElements: ()=>{},\n                        saveLastView: ()=>{},\n                        onActivateDrag: ()=>{},\n                        onEditComment: handleEditComment,\n                        onDuplicateElement: ()=>{},\n                        onUngroup: ()=>{}\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 854,\n                        columnNumber: 7\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_tools_sidebar__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                        elements: elements || [],\n                        boards: boards || [],\n                        onUploadImage: handleUploadImage,\n                        onAddImageFromUrl: ()=>setIsImageUrlDialogOpen(true),\n                        onPanToggle: ()=>{\n                            var _canvasRef_current;\n                            return (_canvasRef_current = canvasRef.current) === null || _canvasRef_current === void 0 ? void 0 : _canvasRef_current.activatePanMode();\n                        },\n                        onRenameBoard: handleRenameBoardWrapper,\n                        onDeleteBoard: handleDeleteBoard,\n                        isListening: isDictationListening,\n                        onToggleDictation: handleToggleDictation,\n                        onOpenNotepad: handleOpenNotepad,\n                        onLocateElement: handleLocateElement,\n                        addElement: addElement,\n                        clearCanvas: clearCanvasWrapper,\n                        onExportBoardToPng: handleExportBoardToPng,\n                        onFormatToggle: handleFormatToggle,\n                        isFormatToolbarOpen: isFormatToolbarOpen\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 901,\n                        columnNumber: 7\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_formatting_toolbar__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                        isOpen: isFormatToolbarOpen,\n                        onClose: ()=>setIsFormatToolbarOpen(false),\n                        elements: selectedElement ? [\n                            selectedElement\n                        ] : [],\n                        onAddComment: handleAddMarker,\n                        onEditComment: handleEditComment,\n                        isMobileSheet: isMobile,\n                        onLocateElement: handleLocateElement,\n                        onPanToggle: ()=>{\n                            var _canvasRef_current;\n                            setIsPanningActive((prev)=>!prev);\n                            (_canvasRef_current = canvasRef.current) === null || _canvasRef_current === void 0 ? void 0 : _canvasRef_current.activatePanMode();\n                        },\n                        addElement: addElement,\n                        isPanningActive: isPanningActive\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 921,\n                        columnNumber: 7\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_change_format_dialog__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                        isOpen: changeFormatDialogOpen,\n                        onOpenChange: setChangeFormatDialogOpen,\n                        notepad: selectedNotepadForFormat,\n                        onSaveFormat: handleSaveFormat\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 938,\n                        columnNumber: 7\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_elements_add_image_from_url_dialog__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                        isOpen: isImageUrlDialogOpen,\n                        onOpenChange: setIsImageUrlDialogOpen,\n                        onAddImage: async (url)=>{\n                            await addElement(\"image\", {\n                                content: {\n                                    url\n                                },\n                                properties: {\n                                    size: {\n                                        width: 300,\n                                        height: 200\n                                    }\n                                }\n                            });\n                            setIsImageUrlDialogOpen(false);\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 945,\n                        columnNumber: 7\n                    }, this),\n                    selectedCommentForEdit && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_elements_edit_comment_dialog__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                        isOpen: isEditCommentDialogOpen,\n                        onOpenChange: setIsEditCommentDialogOpen,\n                        comment: selectedCommentForEdit,\n                        onUpdate: updateElement,\n                        onDelete: deleteElement\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 957,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_element_info_panel__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n                        element: selectedElement,\n                        isVisible: isInfoPanelVisible && !!selectedElement,\n                        onClose: ()=>setIsInfoPanelVisible(false)\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 967,\n                        columnNumber: 7\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                lineNumber: 851,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true);\n}\n_s(BoardPage, \"zzFkk7oERMBMgcoDhUIUAZpUJa0=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter,\n        _firebase_provider__WEBPACK_IMPORTED_MODULE_3__.useUser,\n        _firebase_provider__WEBPACK_IMPORTED_MODULE_3__.useStorage,\n        _hooks_use_toast__WEBPACK_IMPORTED_MODULE_8__.useToast,\n        _hooks_use_media_query__WEBPACK_IMPORTED_MODULE_7__.useMediaQuery,\n        _lib_store_boardStore__WEBPACK_IMPORTED_MODULE_4__.useBoardStore,\n        _hooks_use_board_state__WEBPACK_IMPORTED_MODULE_5__.useBoardState,\n        _hooks_use_dictation__WEBPACK_IMPORTED_MODULE_19__.useDictation,\n        _hooks_use_element_manager__WEBPACK_IMPORTED_MODULE_6__.useElementManager\n    ];\n});\n_c = BoardPage;\nvar _c;\n$RefreshReg$(_c, \"BoardPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvYm9hcmQvW2JvYXJkSWRdL3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRWlGO0FBQ3JDO0FBQ0w7QUFFdkMsb0JBQW9CO0FBQytDO0FBQ1o7QUFDQztBQUNRO0FBQ1I7QUFDWDtBQUU3QyxxQkFBcUI7QUFDNEI7QUFFWDtBQUt0Qyx5QkFBeUI7QUFDdUI7QUFDYTtBQUNVO0FBQ3ZFLFdBQVc7QUFDZ0Y7QUFDakI7QUFDTztBQUNYO0FBQ0U7QUFDeEUsa0JBQWtCO0FBQ21DO0FBUXRDLFNBQVMwQixVQUFVLEtBQTBCO1FBQTFCLEVBQUVDLE1BQU0sRUFBa0IsR0FBMUI7UUF5TTRCQzs7SUF4TTVELE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUdGO0lBQ3BCLE1BQU1HLFNBQVN4QiwwREFBU0E7SUFDeEIsTUFBTSxFQUFFeUIsSUFBSSxFQUFFQyxlQUFlQyxXQUFXLEVBQUVDLFNBQVMsRUFBRSxHQUFHMUIsMkRBQU9BO0lBQy9ELE1BQU0yQixVQUFVMUIsOERBQVVBO0lBQzFCLE1BQU0sRUFBRTJCLEtBQUssRUFBRSxHQUFHdEIsMERBQVFBO0lBQzFCLE1BQU11QixXQUFXeEIscUVBQWFBLENBQUM7SUFFL0IsZ0RBQWdEO0lBQ2hEeUIsUUFBUUMsR0FBRyxDQUFDLGdEQUFzQztRQUNoRFY7UUFDQVcsU0FBUyxDQUFDLENBQUNUO1FBQ1hVLE1BQU0sRUFBRVYsaUJBQUFBLDJCQUFBQSxLQUFNVyxHQUFHO1FBQ2pCQyxXQUFXLEVBQUVaLGlCQUFBQSwyQkFBQUEsS0FBTVksV0FBVztRQUM5QlY7UUFDQVcsVUFBVSxLQUFrQixHQUFjQyxPQUFPQyxRQUFRLENBQUNGLFFBQVEsR0FBRztJQUN2RTtJQUVBLG9GQUFvRjtJQUNwRixNQUFNRyxlQUFlN0MsNkNBQU1BLENBQU07SUFDakMsTUFBTThDLGlCQUFpQjlDLDZDQUFNQSxDQUFNO0lBQ25DLE1BQU0rQyxhQUFhL0MsNkNBQU1BLENBQU07SUFDL0IsTUFBTWdELFdBQVdoRCw2Q0FBTUEsQ0FBQ2tDO0lBRXhCLGlDQUFpQztJQUNqQ25DLGdEQUFTQSxDQUFDO1FBQ1JpRCxTQUFTQyxPQUFPLEdBQUdmO0lBQ3JCLEdBQUc7UUFBQ0E7S0FBTTtJQUVWLDJDQUEyQztJQUMzQ3BDLHNEQUFlLENBQUM7UUFDZHNDLFFBQVFDLEdBQUcsQ0FBQywrQ0FBcUM7WUFBRVY7UUFBUTtJQUM3RCxHQUFHO1FBQUNBO0tBQVE7SUFFWixvQ0FBb0M7SUFDcEM3QixzREFBZSxDQUFDO1FBQ2RzQyxRQUFRQyxHQUFHLENBQUMsZ0RBQXNDO1lBQ2hEQyxTQUFTLENBQUMsQ0FBQ1Q7WUFDWFUsTUFBTSxFQUFFVixpQkFBQUEsMkJBQUFBLEtBQU1XLEdBQUc7WUFDakJWLGVBQWVDO1lBQ2ZDLFNBQVMsRUFBRUEsc0JBQUFBLGdDQUFBQSxVQUFXa0IsT0FBTztZQUM3QkMsU0FBUyxFQUFFdEIsaUJBQUFBLDJCQUFBQSxLQUFNdUIsS0FBSztZQUN0QlgsV0FBVyxFQUFFWixpQkFBQUEsMkJBQUFBLEtBQU1ZLFdBQVc7WUFDOUJZLGdCQUFnQixLQUFrQixHQUFjO2dCQUM5Q0MsZ0JBQWdCRCxlQUFlRSxPQUFPLENBQUM7Z0JBQ3ZDQyxnQkFBZ0JILGVBQWVFLE9BQU8sQ0FBQztnQkFDdkNFLG9CQUFvQkosZUFBZUUsT0FBTyxDQUFDO1lBQzdDLElBQUk7UUFDTjtJQUNGLEdBQUc7UUFBQzFCO1FBQU1FO1FBQWFDO0tBQVU7SUFFakMsNENBQTRDO0lBQzVDLE1BQU0sRUFDSk4sUUFBUSxFQUNSZ0MsS0FBSyxFQUNMQyxTQUFTLEVBQ1RDLFdBQVcsRUFDWEMsYUFBYSxFQUNiQyxhQUFhLEVBQ2JDLGtCQUFrQixFQUNsQkMscUJBQXFCLEVBQ3JCQyxXQUFXQyxjQUFjLEVBQ3pCQyxLQUFLLEVBQ0xDLE9BQU8sRUFDUixHQUFHNUQsb0VBQWFBO0lBRWpCLG1FQUFtRTtJQUNuRVQsZ0RBQVNBLENBQUM7UUFDUjhDLGFBQWFJLE9BQU8sR0FBR1U7UUFDdkJiLGVBQWVHLE9BQU8sR0FBR1c7UUFDekJiLFdBQVdFLE9BQU8sR0FBR21CO0lBQ3ZCLEdBQUc7UUFBQ1Q7UUFBV0M7UUFBYVE7S0FBUTtJQUVwQyw2QkFBNkI7SUFDN0IsNkVBQTZFO0lBQzdFLDJFQUEyRTtJQUMzRSxpRUFBaUU7SUFDakUsTUFBTSxFQUFFQyxNQUFNLEVBQUVDLGlCQUFpQixFQUFFQyxpQkFBaUIsRUFBRUMsV0FBVyxFQUFFLEdBQUcvRCxxRUFBYUEsQ0FBQ2tCO0lBQ3BGLE1BQU04QyxZQUFZekUsNkNBQU1BLENBQU07SUFFOUIsMkRBQTJEO0lBQzNELE1BQU0wRSwyQkFBMkJ4RSxrREFBV0EsQ0FBQztRQUMzQ3lFLDJCQUEyQjtJQUM3QixHQUFHLEVBQUU7SUFFTCxNQUFNQyx3QkFBd0IxRSxrREFBV0EsQ0FBQyxDQUFDMkU7UUFDekNQLGtCQUFrQk87UUFDbEJGLDJCQUEyQjtJQUM3QixHQUFHO1FBQUNMO0tBQWtCO0lBRXRCLE1BQU1RLHFCQUFxQjVFLGtEQUFXQSxDQUFDO1FBQ3JDc0UsWUFBWTlDO0lBQ2QsR0FBRztRQUFDQTtRQUFVOEM7S0FBWTtJQUUxQixnQkFBZ0I7SUFDaEIsTUFBTSxDQUFDTyxxQkFBcUJDLHVCQUF1QixHQUFHL0UsK0NBQVFBLENBQUM7SUFDL0QsTUFBTSxDQUFDZ0Ysc0JBQXNCQyx3QkFBd0IsR0FBR2pGLCtDQUFRQSxDQUFDO0lBQ2pFLE1BQU0sQ0FBQ2tGLHdCQUF3QkMsMEJBQTBCLEdBQUduRiwrQ0FBUUEsQ0FBQztJQUNyRSxNQUFNLENBQUNvRixpQkFBaUJDLG1CQUFtQixHQUFHckYsK0NBQVFBLENBQUM7SUFDdkQsTUFBTSxDQUFDc0YseUJBQXlCWiwyQkFBMkIsR0FBRzFFLCtDQUFRQSxDQUFDO0lBRXZFLGlDQUFpQztJQUNqQyxNQUFNLENBQUN1RixpQkFBaUJDLG1CQUFtQixHQUFHeEYsK0NBQVFBLENBQStCO0lBQ3JGLE1BQU0sQ0FBQ3lGLG9CQUFvQkMsc0JBQXNCLEdBQUcxRiwrQ0FBUUEsQ0FBZ0I7SUFDNUUsTUFBTSxDQUFDMkYsMEJBQTBCQyw0QkFBNEIsR0FBRzVGLCtDQUFRQSxDQUErQjtJQUN2RyxNQUFNLENBQUM2RixTQUFTQyxXQUFXLEdBQUc5RiwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLENBQUMrRix5QkFBeUJDLDJCQUEyQixHQUFHaEcsK0NBQVFBLENBQUM7SUFDdkUsTUFBTSxDQUFDaUcsd0JBQXdCQywwQkFBMEIsR0FBR2xHLCtDQUFRQSxDQUErQjtJQUVuRyxtRUFBbUU7SUFDbkUsTUFBTW1HLG9CQUFvQnBHLDZDQUFNQSxDQUFzQixJQUFJcUc7SUFFMUQsNEVBQTRFO0lBQzVFLE1BQU0sQ0FBQ0Msb0JBQW9CQyxzQkFBc0IsR0FBR3RHLCtDQUFRQSxDQUFDLFFBQVEseURBQXlEO0lBRTlILHVCQUF1QjtJQUN2QixtREFBbUQ7SUFDbkQsTUFBTSxFQUNKdUcsYUFBYUMsb0JBQW9CLEVBQ2pDQyxhQUFhQyxvQkFBb0IsRUFDakNDLFVBQVUsRUFDVkMsZUFBZSxFQUNmQyxpQkFBaUIsRUFDakJDLGVBQWUsRUFDZkMsUUFBUUMsZUFBZSxFQUN4QixHQUFHMUYsbUVBQVlBO0lBRWhCLHlGQUF5RjtJQUN6RixNQUFNMkYsaUJBQWlCL0csOENBQU9BLENBQUM7UUFDN0IsdURBQXVEO1FBQ3ZELE1BQU1nSCxRQUFRTixtQkFBbUI7UUFDakMsTUFBTU8sVUFBVU4scUJBQXFCO1FBRXJDLCtEQUErRDtRQUMvRCxJQUFJTSxRQUFRQyxJQUFJLElBQUk7WUFDbEIsT0FBT0YsUUFBU0EsQ0FBQUEsUUFBUSxNQUFNLEVBQUMsSUFBS0M7UUFDdEM7UUFFQSxPQUFPRDtJQUNULEdBQUc7UUFBQ047UUFBaUJDO0tBQWtCO0lBRXZDLE1BQU1RLHdCQUF3QnBILGtEQUFXQSxDQUFDO1FBQ3hDLElBQUk7WUFDRixNQUFNK0c7UUFDUixFQUFFLE9BQU85QyxPQUFPO1lBQ2QvQixRQUFRK0IsS0FBSyxDQUFDLDhCQUE4QkE7UUFDOUM7SUFDRixHQUFHO1FBQUM4QztLQUFnQjtJQUVwQix1Q0FBdUM7SUFDdkNsSCxnREFBU0EsQ0FBQztRQUNSLElBQUlnSCxpQkFBaUI7WUFDbkI3RSxNQUFNO2dCQUNKcUYsU0FBUztnQkFDVEMsT0FBTztnQkFDUEMsYUFBYVY7Z0JBQ2JXLFVBQVU7WUFDWjtRQUNGO0lBQ0YsR0FBRztRQUFDWDtRQUFpQjdFO0tBQU07SUFFM0IsNkJBQTZCO0lBQzdCLE1BQU15RixvQkFBb0J6SCxrREFBV0EsQ0FBQztRQUNwQyxJQUFJdUUsVUFBVXhCLE9BQU8sRUFBRTtZQUNyQixNQUFNMkUsU0FBU25ELFVBQVV4QixPQUFPLENBQUMwRSxpQkFBaUI7WUFDbEQsOEZBQThGO1lBQzlGLDBFQUEwRTtZQUMxRSxPQUFPQztRQUNUO1FBQ0EsK0RBQStEO1FBQy9ELElBQUksSUFBa0IsRUFBYTtZQUNqQyxPQUFPO2dCQUFFQyxHQUFHbEYsT0FBT21GLFVBQVUsR0FBRztnQkFBR0MsR0FBR3BGLE9BQU9xRixXQUFXLEdBQUc7WUFBRTtRQUMvRDtRQUNBLE9BQU87WUFBRUgsR0FBRztZQUFPRSxHQUFHO1FBQU0sR0FBRyxvQkFBb0I7SUFDckQsR0FBRyxFQUFFO0lBRUwsb0VBQW9FO0lBQ3BFLE1BQU1FLGNBQWNqSSw2Q0FBTUEsQ0FBQzBCO0lBQzNCM0IsZ0RBQVNBLENBQUM7UUFDUmtJLFlBQVloRixPQUFPLEdBQUd2QjtJQUN4QixHQUFHO1FBQUNBO0tBQVM7SUFFYixNQUFNd0csZ0JBQWdCaEksa0RBQVdBLENBQUM7UUFDaEMsTUFBTWlJLGtCQUFrQkYsWUFBWWhGLE9BQU87UUFDM0MsSUFBSSxDQUFDa0YsbUJBQW1CQSxnQkFBZ0JDLE1BQU0sS0FBSyxHQUFHLE9BQU87UUFDN0QsTUFBTUMsV0FBV0YsZ0JBQ2RHLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBSyxPQUFPQSxFQUFFQyxNQUFNLEtBQUssVUFDaENDLEdBQUcsQ0FBQ0YsQ0FBQUEsSUFBS0EsRUFBRUMsTUFBTTtRQUNwQixPQUFPSCxTQUFTRCxNQUFNLEdBQUcsSUFBSU0sS0FBS0MsR0FBRyxJQUFJTixZQUFZLElBQUk7SUFDM0QsR0FBRyxFQUFFLEdBQUcsK0JBQStCO0lBRXZDLE1BQU0sRUFBRU8sVUFBVSxFQUFFLEdBQUdsSSw2RUFBaUJBLENBQUNpQixTQUFTZ0csbUJBQW1CTztJQUVyRSxnQkFBZ0I7SUFFaEIsd0JBQXdCO0lBQ3hCLDJFQUEyRTtJQUMzRSxNQUFNVyxvQkFBb0I5RSxtQkFBbUJxRSxNQUFNLEtBQUssSUFBSXJFLGtCQUFrQixDQUFDLEVBQUUsR0FBRztJQUNwRixNQUFNK0UsZUFBZTNJLDhDQUFPQSxDQUFDO1FBQzNCLElBQUksQ0FBQzBJLHFCQUFxQixDQUFDbkgsWUFBWUEsU0FBUzBHLE1BQU0sS0FBSyxHQUFHLE9BQU87UUFDckUsT0FBTzFHLFNBQVNxSCxJQUFJLENBQUNDLENBQUFBLEtBQU1BLEdBQUdDLEVBQUUsS0FBS0osc0JBQXNCO0lBQzdELEdBQUc7UUFBQ0E7UUFBbUJuSCxTQUFTMEcsTUFBTTtRQUFFUyxxQkFBb0JuSCxpQkFBQUEsU0FBU3FILElBQUksQ0FBQ1IsQ0FBQUEsSUFBS0EsRUFBRVUsRUFBRSxLQUFLSixnQ0FBNUJuSCxxQ0FBQUEsZUFBZ0R3SCxTQUFTLEdBQUc7S0FBSyxHQUFHLDBEQUEwRDtJQUUxTCwrRUFBK0U7SUFDL0VuSixnREFBU0EsQ0FBQztZQUNRK0k7UUFBaEIsTUFBTUssVUFBVUwsQ0FBQUEsbUJBQUFBLHlCQUFBQSxtQ0FBQUEsYUFBY0csRUFBRSxjQUFoQkgsOEJBQUFBLG1CQUFvQjtZQUNsQnREO1FBQWxCLE1BQU00RCxZQUFZNUQsQ0FBQUEsc0JBQUFBLDRCQUFBQSxzQ0FBQUEsZ0JBQWlCeUQsRUFBRSxjQUFuQnpELGlDQUFBQSxzQkFBdUI7UUFDekMsSUFBSTJELFlBQVlDLFdBQVc7WUFDekIzRCxtQkFBbUJxRDtRQUNyQjtJQUNGLEdBQUc7UUFBQ0EseUJBQUFBLG1DQUFBQSxhQUFjRyxFQUFFO1FBQUV6RCw0QkFBQUEsc0NBQUFBLGdCQUFpQnlELEVBQUU7S0FBQyxHQUFHLGtEQUFrRDtJQUUvRiw0REFBNEQ7SUFDNUQsb0VBQW9FO0lBQ3BFbEosZ0RBQVNBLENBQUM7UUFDUixJQUFJeUYsaUJBQWlCO1lBQ25CLGlFQUFpRTtZQUNqRWUsc0JBQXNCO1lBRXRCLG1EQUFtRDtZQUNuRCxJQUFJOEMsSUFBeUIsRUFBZTtvQkFLbkM3RCxzQ0FBQUEsNkJBQ0FBLHVDQUFBQSw4QkFHSUEsa0NBQUFBLDhCQUNDQSxtQ0FBQUE7Z0JBVFpwRCxRQUFRQyxHQUFHLENBQUMsdUNBQTZCO29CQUN2QzRHLElBQUl6RCxnQkFBZ0J5RCxFQUFFO29CQUN0QkssTUFBTTlELGdCQUFnQjhELElBQUk7b0JBQzFCQyxVQUFVO3dCQUNSMUIsR0FBR3JDLEVBQUFBLDhCQUFBQSxnQkFBZ0JnRSxVQUFVLGNBQTFCaEUsbURBQUFBLHVDQUFBQSw0QkFBNEIrRCxRQUFRLGNBQXBDL0QsMkRBQUFBLHFDQUFzQ3FDLENBQUMsS0FBSXJDLGdCQUFnQnFDLENBQUMsSUFBSTt3QkFDbkVFLEdBQUd2QyxFQUFBQSwrQkFBQUEsZ0JBQWdCZ0UsVUFBVSxjQUExQmhFLG9EQUFBQSx3Q0FBQUEsNkJBQTRCK0QsUUFBUSxjQUFwQy9ELDREQUFBQSxzQ0FBc0N1QyxDQUFDLEtBQUl2QyxnQkFBZ0J1QyxDQUFDLElBQUk7b0JBQ3JFO29CQUNBMEIsTUFBTTt3QkFDSkMsT0FBT2xFLEVBQUFBLCtCQUFBQSxnQkFBZ0JnRSxVQUFVLGNBQTFCaEUsb0RBQUFBLG1DQUFBQSw2QkFBNEJpRSxJQUFJLGNBQWhDakUsdURBQUFBLGlDQUFrQ2tFLEtBQUssS0FBSWxFLGdCQUFnQmtFLEtBQUssSUFBSTt3QkFDM0VDLFFBQVFuRSxFQUFBQSwrQkFBQUEsZ0JBQWdCZ0UsVUFBVSxjQUExQmhFLG9EQUFBQSxvQ0FBQUEsNkJBQTRCaUUsSUFBSSxjQUFoQ2pFLHdEQUFBQSxrQ0FBa0NtRSxNQUFNLEtBQUluRSxnQkFBZ0JtRSxNQUFNLElBQUk7b0JBQ2hGO29CQUNBbkIsUUFBUWhELGdCQUFnQmdELE1BQU07b0JBQzlCb0IsVUFBVXBFLGdCQUFnQm9FLFFBQVE7Z0JBQ3BDO2dCQUNBLGdEQUFnRDtnQkFDaEQsSUFBSSxPQUFnQkMsY0FBYyxFQUFFO29CQUNsQ3pILFFBQVFDLEdBQUcsQ0FBQyxzQkFBc0JtRDtnQkFDcEM7WUFDRjtRQUNGLE9BQU87WUFDTCxvREFBb0Q7WUFDcERlLHNCQUFzQjtRQUN4QjtJQUNGLEdBQUc7UUFBQ2Y7S0FBZ0I7SUFFcEIsa0VBQWtFO0lBQ2xFekYsZ0RBQVNBLENBQUM7UUFDUixNQUFNK0osZ0JBQWdCLENBQUN2QjtZQUNyQixJQUFJLENBQUNBLEVBQUV3QixPQUFPLElBQUl4QixFQUFFeUIsT0FBTyxLQUFLekIsRUFBRTBCLFFBQVEsSUFBSTFCLEVBQUUyQixHQUFHLEtBQUssS0FBSztnQkFDM0QzQixFQUFFNEIsY0FBYztnQkFDaEI1RCxzQkFBc0I2RCxDQUFBQSxPQUFRLENBQUNBO1lBQ2pDO1FBQ0Y7UUFFQXpILE9BQU8wSCxnQkFBZ0IsQ0FBQyxXQUFXUDtRQUNuQyxPQUFPLElBQU1uSCxPQUFPMkgsbUJBQW1CLENBQUMsV0FBV1I7SUFDckQsR0FBRyxFQUFFO0lBRUwsb0RBQW9EO0lBQ3BELE1BQU1TLGVBQWV2Syw2Q0FBTUEsQ0FBQztJQUM1QixNQUFNd0ssZUFBZXhLLDZDQUFNQSxDQUFDO0lBQzVCLE1BQU15SyxlQUFlekssNkNBQU1BLENBQXdCO0lBQ25ELE1BQU0wSyxvQkFBb0IxSyw2Q0FBTUEsQ0FBZ0I7SUFFaEQsK0RBQStEO0lBQy9ERCxnREFBU0EsQ0FBQztRQUNSLElBQUksS0FBa0IsRUFBYSxFQUFPO1FBRTFDcUMsUUFBUUMsR0FBRyxDQUFDLGdEQUFzQztZQUNoRFY7WUFDQVcsU0FBUyxDQUFDLENBQUNUO1lBQ1hVLE1BQU0sRUFBRVYsaUJBQUFBLDJCQUFBQSxLQUFNVyxHQUFHO1lBQ2pCQyxXQUFXLEVBQUVaLGlCQUFBQSwyQkFBQUEsS0FBTVksV0FBVztZQUM5QlY7WUFDQWtDLFdBQVd1RyxhQUFhdkgsT0FBTztZQUMvQjBILFdBQVdKLGFBQWF0SCxPQUFPO1lBQy9CMkgsZ0JBQWdCRixrQkFBa0J6SCxPQUFPO1FBQzNDO1FBRUEsbUNBQW1DO1FBQ25DLElBQUl5SCxrQkFBa0J6SCxPQUFPLEtBQUt0QixTQUFTO1lBQ3pDUyxRQUFRQyxHQUFHLENBQUMsZ0VBQW1EO2dCQUM3RHdJLEtBQUtILGtCQUFrQnpILE9BQU87Z0JBQzlCNkgsS0FBS25KO1lBQ1A7WUFDQTRJLGFBQWF0SCxPQUFPLEdBQUc7WUFDdkJ1SCxhQUFhdkgsT0FBTyxHQUFHO1lBQ3ZCeUgsa0JBQWtCekgsT0FBTyxHQUFHdEI7UUFDOUI7UUFFQSxpQ0FBaUM7UUFDakMsSUFBSTZJLGFBQWF2SCxPQUFPLElBQUlsQixhQUFhO1lBQ3ZDSyxRQUFRQyxHQUFHLENBQUMsc0VBQW1FO2dCQUM3RTRCLFdBQVd1RyxhQUFhdkgsT0FBTztnQkFDL0JsQjtZQUNGO1lBQ0E7UUFDRjtRQUVBLHlCQUF5QjtRQUN6QixJQUFJMEksYUFBYXhILE9BQU8sRUFBRTtZQUN4QjhILGFBQWFOLGFBQWF4SCxPQUFPO1lBQ2pDd0gsYUFBYXhILE9BQU8sR0FBRztRQUN6QjtRQUVBLDZDQUE2QztRQUM3QyxNQUFNSyxpQkFBaUIsS0FBa0IsR0FBY0QsZUFBZUUsT0FBTyxDQUFDLHNCQUFzQixTQUFTLENBQUs7UUFDbEgsTUFBTUMsaUJBQWlCLEtBQWtCLEdBQWNILGVBQWVFLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBSTtRQUN0RyxNQUFNRSxxQkFBcUIsS0FBa0IsR0FBY0osZUFBZUUsT0FBTyxDQUFDLHdCQUF3QixDQUFJO1FBQzlHLE1BQU15SCxrQkFBa0IsS0FBa0IsR0FBYzNILGVBQWVFLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBSTtRQUN4RyxnR0FBZ0c7UUFDaEcsTUFBTTBILGdCQUFnQjNILGtCQUFrQkUsa0JBQWtCLEtBQU0ySCxHQUFHLEtBQUtDLFNBQVM1SCxrQkFBbUI7UUFFcEdwQixRQUFRQyxHQUFHLENBQUMsd0RBQTJDO1lBQ3JEQyxTQUFTLENBQUMsQ0FBQ1Q7WUFDWFUsTUFBTSxFQUFFVixpQkFBQUEsMkJBQUFBLEtBQU1XLEdBQUc7WUFDakJjO1lBQ0FFO1lBQ0FDO1lBQ0E5QjtZQUNBc0o7WUFDQUQ7WUFDQUssZ0JBQWdCN0gsaUJBQWlCMEgsS0FBS0MsR0FBRyxLQUFLQyxTQUFTNUgsa0JBQWtCO1FBQzNFO1FBRUEsc0RBQXNEO1FBQ3RELElBQUksQ0FBQzNCLFFBQVEsQ0FBQ29KLGVBQWU7WUFDM0I3SSxRQUFRQyxHQUFHLENBQUM7WUFDWixJQUFJLElBQWtCLEVBQWE7Z0JBQ2pDZ0IsZUFBZWlJLEtBQUs7Z0JBQ3BCQyxhQUFhRCxLQUFLO2dCQUNsQjNJLE9BQU9DLFFBQVEsQ0FBQzRJLE9BQU8sQ0FBQztZQUMxQjtZQUNBO1FBQ0Y7UUFFQSxxR0FBcUc7UUFDckcsSUFBSVAsaUJBQWlCLENBQUNwSixNQUFNO1lBQzFCLHFHQUFxRztZQUNyRyxNQUFNNEosV0FBV2hJLHVCQUF1QjlCLFVBQVUsUUFBUSxPQUFPLDJDQUEyQztZQUM1R1MsUUFBUUMsR0FBRyxDQUFDLG1FQUFnRTtnQkFDMUVvSjtnQkFDQWhJO2dCQUNBOUI7Z0JBQ0EyQjtnQkFDQUU7Z0JBQ0F3SDtnQkFDQUssZ0JBQWdCN0gsaUJBQWlCMEgsS0FBS0MsR0FBRyxLQUFLQyxTQUFTNUgsa0JBQWtCO1lBQzNFO1lBQ0FpSCxhQUFheEgsT0FBTyxHQUFHeUksV0FBVztnQkFDaEMsSUFBSSxDQUFDN0osUUFBUSxhQUFrQixhQUFhO29CQUMxQ08sUUFBUUMsR0FBRyxDQUFDO29CQUNaLGtGQUFrRjtvQkFDbEYsa0VBQWtFO29CQUNsRWdCLGVBQWVzSSxVQUFVLENBQUM7b0JBQzFCdEksZUFBZXNJLFVBQVUsQ0FBQztvQkFDMUJ0SSxlQUFlc0ksVUFBVSxDQUFDO29CQUMxQmhKLE9BQU9DLFFBQVEsQ0FBQzRJLE9BQU8sQ0FBQztnQkFDMUI7WUFDRixHQUFHQztZQUNIO1FBQ0Y7UUFFQSxzQ0FBc0M7UUFDdEMsSUFBSTVKLENBQUFBLGlCQUFBQSwyQkFBQUEsS0FBTVcsR0FBRyxLQUFJLENBQUMrSCxhQUFhdEgsT0FBTyxJQUFJSixhQUFhSSxPQUFPLElBQUlILGVBQWVHLE9BQU8sRUFBRTtZQUN4RmIsUUFBUUMsR0FBRyxDQUFDLDhEQUE4RDtnQkFDeEVFLFFBQVFWLEtBQUtXLEdBQUc7Z0JBQ2hCYjtnQkFDQWMsYUFBYVosS0FBS1ksV0FBVztZQUMvQjtZQUNBOEgsYUFBYXRILE9BQU8sR0FBRztZQUN2QnVILGFBQWF2SCxPQUFPLEdBQUc7WUFDdkIsTUFBTVYsU0FBU1YsS0FBS1csR0FBRztZQUV2QixJQUFJYixZQUFZLE9BQU87Z0JBQ3JCbUIsZUFBZUcsT0FBTyxDQUFDVixRQUFRcUosSUFBSSxDQUFDLENBQUNDO29CQUNuQ3JCLGFBQWF2SCxPQUFPLEdBQUc7b0JBQ3ZCLElBQUk0SSxjQUFjLGFBQWtCLGFBQWE7d0JBQy9DeEksZUFBZXlJLE9BQU8sQ0FBQyxrQkFBa0I7d0JBQ3pDekksZUFBZXlJLE9BQU8sQ0FBQyxrQkFBa0JaLEtBQUtDLEdBQUcsR0FBR1ksUUFBUTt3QkFDNURwSixPQUFPQyxRQUFRLENBQUNvSixJQUFJLEdBQUcsVUFBcUIsT0FBWEg7b0JBQ25DLE9BQU87d0JBQ0x0QixhQUFhdEgsT0FBTyxHQUFHO29CQUN6QjtnQkFDRixHQUFHZ0osS0FBSyxDQUFDLENBQUM5SDtvQkFDUnFHLGFBQWF2SCxPQUFPLEdBQUc7b0JBQ3ZCc0gsYUFBYXRILE9BQU8sR0FBRztvQkFDdkJiLFFBQVErQixLQUFLLENBQUMsNkJBQTZCQTtnQkFDN0M7WUFDRixPQUFPO2dCQUNMdEIsYUFBYUksT0FBTyxDQUFDdEIsU0FBU1ksUUFBUXFKLElBQUksQ0FBQyxDQUFDTTtvQkFDMUMxQixhQUFhdkgsT0FBTyxHQUFHO29CQUN2QixJQUFJaUosaUJBQWlCLGFBQWtCLGFBQWE7d0JBQ2xELGlHQUFpRzt3QkFDakcseURBQXlEO3dCQUN6RFIsV0FBVzs0QkFDVHJJLGVBQWVzSSxVQUFVLENBQUM7NEJBQzFCdEksZUFBZXNJLFVBQVUsQ0FBQzs0QkFDMUJ0SSxlQUFlc0ksVUFBVSxDQUFDO3dCQUMxQiw2RUFBNkU7d0JBQy9FLEdBQUcsT0FBTyx3QkFBd0I7b0JBQ3BDLE9BQU87d0JBQ0xwQixhQUFhdEgsT0FBTyxHQUFHO29CQUN6QjtnQkFDRixHQUFHZ0osS0FBSyxDQUFDLENBQUM5SDtvQkFDUnFHLGFBQWF2SCxPQUFPLEdBQUc7b0JBQ3ZCc0gsYUFBYXRILE9BQU8sR0FBRztvQkFDdkJiLFFBQVErQixLQUFLLENBQUMsOEJBQThCQTtnQkFDOUM7WUFDRjtRQUNGO1FBRUEsVUFBVTtRQUNWLE9BQU87WUFDTCxJQUFJc0csYUFBYXhILE9BQU8sRUFBRTtnQkFDeEI4SCxhQUFhTixhQUFheEgsT0FBTztnQkFDakN3SCxhQUFheEgsT0FBTyxHQUFHO1lBQ3pCO1lBQ0EsSUFBSUYsV0FBV0UsT0FBTyxFQUFFO2dCQUN0QkYsV0FBV0UsT0FBTztZQUNwQjtRQUNGO0lBQ0YsR0FBRztRQUFDdEI7UUFBU0U7UUFBTUU7S0FBWTtJQUUvQiwyQkFBMkI7SUFFM0IsTUFBTW9LLHNCQUFzQixDQUFDQyxXQUEwQkM7UUFDckQsSUFBSUQsY0FBYyxNQUFNcEksc0JBQXNCLEVBQUU7YUFDM0NBLHNCQUFzQjtZQUFDb0k7U0FBVTtJQUN4QztJQUVBLE1BQU1FLG9CQUFvQnBNLGtEQUFXQSxDQUFDO1FBQ3BDLElBQUksRUFBQzJCLGlCQUFBQSwyQkFBQUEsS0FBTVcsR0FBRyxHQUFFO1lBQ2ROLE1BQU07Z0JBQUVzRixPQUFPO2dCQUFTQyxhQUFhO1lBQXVCO1lBQzVEO1FBQ0Y7UUFFQSxNQUFNbEYsU0FBU1YsS0FBS1csR0FBRyxFQUFFLDRCQUE0QjtRQUNyRCxNQUFNK0osUUFBUUMsU0FBU0MsYUFBYSxDQUFDO1FBQ3JDRixNQUFNakQsSUFBSSxHQUFHO1FBQ2JpRCxNQUFNRyxNQUFNLEdBQUc7UUFDZkgsTUFBTUksUUFBUSxHQUFHLE9BQU9wRTtnQkFDVDtZQUFiLE1BQU1xRSxRQUFPLG9CQUFHQyxNQUFNLENBQXNCQyxLQUFLLGNBQXBDLHFEQUFzQyxDQUFDLEVBQUU7WUFDdEQsSUFBSSxDQUFDRixNQUFNO1lBRVgsSUFBSTtnQkFDRixNQUFNRyxlQUFlLE1BQU1sTSw4REFBVUEsQ0FBQytMLE1BQU1ySyxRQUFRTjtnQkFDcEQsSUFBSThLLGFBQWFDLEdBQUcsRUFBRTtvQkFDcEIsTUFBTXBFLFdBQVcsU0FBUzt3QkFDeEJxRSxTQUFTOzRCQUFFRCxLQUFLRCxhQUFhQyxHQUFHO3dCQUFDO3dCQUNqQ3hELFlBQVk7NEJBQUVDLE1BQU07Z0NBQUVDLE9BQU87Z0NBQUtDLFFBQVE7NEJBQUk7d0JBQUU7b0JBQ2xEO29CQUNBekgsTUFBTTt3QkFBRXNGLE9BQU87b0JBQWdCO2dCQUNqQztZQUNGLEVBQUUsT0FBT3JELE9BQU87Z0JBQ2RqQyxNQUFNO29CQUFFcUYsU0FBUztvQkFBZUMsT0FBTztnQkFBd0I7WUFDakU7UUFDRjtRQUNBK0UsTUFBTVcsS0FBSztJQUNiLEdBQUc7UUFBQ3JMO1FBQU1JO1FBQVMyRztRQUFZMUc7S0FBTTtJQUVyQyxNQUFNaUwscUJBQXFCak4sa0RBQVdBLENBQUMsSUFBTThFLHVCQUF1Qm9GLENBQUFBLE9BQVEsQ0FBQ0EsT0FBTyxFQUFFO0lBRXRGLGtFQUFrRTtJQUNsRSxNQUFNZ0Qsa0JBQWtCbE4sa0RBQVdBLENBQUM7UUFDbEMsTUFBTW1OLGlCQUFpQjFGO1FBQ3ZCLElBQUk7WUFDRixNQUFNaUIsV0FBVyxXQUFXO2dCQUMxQnFFLFNBQVM7b0JBQ1B6RixPQUFPO29CQUNQOEYsT0FBTztvQkFDUEMsTUFBTTtnQkFDUjtnQkFDQS9ELFlBQVk7b0JBQ1ZELFVBQVU4RDtvQkFDVjVELE1BQU07d0JBQUVDLE9BQU87d0JBQUlDLFFBQVE7b0JBQUc7Z0JBQ2hDO1lBQ0Y7WUFDQXpILE1BQU07Z0JBQ0pzRixPQUFPO2dCQUNQQyxhQUFhO1lBQ2Y7UUFDRixFQUFFLE9BQU90RCxPQUFZO1lBQ25CakMsTUFBTTtnQkFDSnFGLFNBQVM7Z0JBQ1RDLE9BQU87Z0JBQ1BDLGFBQWF0RCxNQUFNakIsT0FBTyxJQUFJO1lBQ2hDO1FBQ0Y7SUFDRixHQUFHO1FBQUN5RTtRQUFtQmlCO1FBQVkxRztLQUFNO0lBRXpDLE1BQU1zTCxzQkFBc0J0TixrREFBV0EsQ0FBQyxDQUFDK0k7UUFDdkMsTUFBTXdFLFVBQVUvTCxTQUFTcUgsSUFBSSxDQUFDQyxDQUFBQSxLQUFNQSxHQUFHQyxFQUFFLEtBQUtBO1FBQzlDLElBQUl3RSxXQUFXaEosVUFBVXhCLE9BQU8sRUFBRTtZQUNoQ2tKLG9CQUFvQmxELElBQUk7WUFDeEJ4RSxVQUFVeEIsT0FBTyxDQUFDeUssZUFBZSxDQUFDRDtRQUNwQztJQUNGLEdBQUc7UUFBQy9MO0tBQVM7SUFFYixNQUFNaU0sb0JBQW9Cek4sa0RBQVdBLENBQUMsT0FBTytJO1FBQzNDLE1BQU13RSxVQUFVL0wsU0FBU3FILElBQUksQ0FBQ0MsQ0FBQUEsS0FBTUEsR0FBR0MsRUFBRSxLQUFLQTtRQUM5QyxJQUFJLENBQUN3RSxTQUFTO1FBQ2Q1SixjQUFjb0YsSUFBSTtZQUFFMkUsUUFBUTtRQUFNO1FBQ2xDekIsb0JBQW9CbEQsSUFBSTtRQUN4QixJQUFJeEUsVUFBVXhCLE9BQU8sRUFBRXdCLFVBQVV4QixPQUFPLENBQUN5SyxlQUFlLENBQUNEO0lBQzNELEdBQUc7UUFBQy9MO1FBQVVtQztLQUFjO0lBRTVCLE1BQU1nSyw0QkFBNEIzTixrREFBV0EsQ0FBQyxDQUFDK0k7UUFDN0MsTUFBTXdFLFVBQVUvTCxTQUFTcUgsSUFBSSxDQUFDQyxDQUFBQSxLQUFNQSxHQUFHQyxFQUFFLEtBQUtBO1FBQzlDLElBQUl3RSxTQUFTO1lBQ1g1SCw0QkFBNEI0SDtZQUM1QnJJLDBCQUEwQjtRQUM1QjtJQUNGLEdBQUc7UUFBQzFEO0tBQVM7SUFFYixNQUFNb00sbUJBQW1CNU4sa0RBQVdBLENBQUMsQ0FBQytJLElBQVk4RTtRQUNoRCw2RkFBNkY7UUFDN0YsMENBQTBDO1FBQzFDLE1BQU1DLFVBQVVELFdBQVcsV0FDdkI7WUFBRXJFLE9BQU87WUFBS0MsUUFBUTtRQUFLLEVBQUUsb0JBQW9CO1dBQ2pEO1lBQUVELE9BQU87WUFBS0MsUUFBUTtRQUFJLEdBQUcsNENBQTRDO1FBQzdFOUYsY0FBY29GLElBQUk7WUFDaEJTLE9BQU9zRSxRQUFRdEUsS0FBSztZQUNwQkMsUUFBUXFFLFFBQVFyRSxNQUFNO1lBQ3RCSCxZQUFZO21CQUNQNUQscUNBQUFBLCtDQUFBQSx5QkFBMEI0RCxVQUFVO2dCQUN2Q3VFO2dCQUNBdEUsTUFBTXVFO1lBQ1I7UUFDRjtRQUNBNUksMEJBQTBCO0lBQzVCLEdBQUc7UUFBQ1E7UUFBMEIvQjtLQUFjO0lBRTVDLE1BQU1vSyxvQkFBb0IvTixrREFBV0EsQ0FBQyxDQUFDZ087UUFDckMvSCwwQkFBMEIrSDtRQUMxQmpJLDJCQUEyQjtJQUM3QixHQUFHLEVBQUU7SUFFTCxvRkFBb0Y7SUFDcEYsc0VBQXNFO0lBQ3RFLCtEQUErRDtJQUMvRCxNQUFNa0ksb0JBQW9Cak8sa0RBQVdBLENBQUMsQ0FBQ2tNO1FBQ3JDLE1BQU1xQixVQUFVL0wsU0FBU3FILElBQUksQ0FBQ0MsQ0FBQUEsS0FBTUEsR0FBR0MsRUFBRSxLQUFLbUQ7UUFDOUMsSUFBSSxDQUFDcUIsU0FBUztRQUVkLHNFQUFzRTtRQUN0RSxNQUFNVyxrQkFBa0I7WUFBQztZQUFXO1lBQWtCO1lBQWdCO1lBQWtCO1NBQWlCO1FBQ3pHLE1BQU1DLGVBQWVELGdCQUFnQkUsUUFBUSxDQUFDYixRQUFRbkUsSUFBSTtRQUUxRCx3QkFBd0I7UUFDeEIsTUFBTWlGLGVBQWUsT0FBT2QsUUFBUWpFLFVBQVUsS0FBSyxZQUFZaUUsUUFBUWpFLFVBQVUsS0FBSyxPQUFPaUUsUUFBUWpFLFVBQVUsR0FBRyxDQUFDO1lBQzdGK0Usc0JBQUFBO1FBQXRCLE1BQU1DLGdCQUFnQkQsQ0FBQUEsT0FBQUEsQ0FBQUEsdUJBQUFBLGFBQWEvRixNQUFNLGNBQW5CK0Ysa0NBQUFBLHVCQUF1QmQsUUFBUWpGLE1BQU0sY0FBckMrRixrQkFBQUEsT0FBeUM7UUFFL0QsOENBQThDO1FBQzlDLElBQUksQ0FBQ25JLGtCQUFrQm5ELE9BQU8sQ0FBQ3dMLEdBQUcsQ0FBQ3JDLFlBQVk7WUFDN0NoRyxrQkFBa0JuRCxPQUFPLENBQUN5TCxHQUFHLENBQUN0QyxXQUFXb0M7UUFDM0M7UUFFQSx1REFBdUQ7UUFDdkQsTUFBTUcsWUFBWXpHO1FBQ2xCLE1BQU0wRyxZQUFZUCxlQUNkM0YsS0FBS0MsR0FBRyxDQUFDZ0csWUFBWSxLQUFLLE1BQU0sNEJBQTRCO1dBQzVEQSxXQUFXLHFDQUFxQztRQUVwRCx5Q0FBeUM7UUFDekM5SyxjQUFjdUksV0FBVztZQUN2QjVDLFlBQVk7Z0JBQ1YsR0FBRytFLFlBQVk7Z0JBQ2YvRixRQUFRb0c7WUFDVjtRQUNGO1FBRUEsZ0NBQWdDO1FBQ2hDakosc0JBQXNCeUc7UUFFdEIsa0RBQWtEO1FBQ2xELElBQUkzSCxVQUFVeEIsT0FBTyxFQUFFO1lBQ3JCd0IsVUFBVXhCLE9BQU8sQ0FBQ3lLLGVBQWUsQ0FBQ0Q7UUFDcEM7SUFDRixHQUFHO1FBQUMvTDtRQUFVd0c7UUFBZXJFO0tBQWM7SUFFM0MsK0RBQStEO0lBQy9EOUQsZ0RBQVNBLENBQUM7UUFDUixJQUFJLENBQUMyRixzQkFBc0JVLGtCQUFrQm5ELE9BQU8sQ0FBQ3dHLElBQUksR0FBRyxHQUFHO1lBQzdELDREQUE0RDtZQUM1RHJELGtCQUFrQm5ELE9BQU8sQ0FBQzRMLE9BQU8sQ0FBQyxDQUFDQyxnQkFBZ0IxQztnQkFDakQsTUFBTXFCLFVBQVUvTCxTQUFTcUgsSUFBSSxDQUFDQyxDQUFBQSxLQUFNQSxHQUFHQyxFQUFFLEtBQUttRDtnQkFDOUMsSUFBSXFCLFNBQVM7b0JBQ1gsTUFBTWMsZUFBZSxPQUFPZCxRQUFRakUsVUFBVSxLQUFLLFlBQVlpRSxRQUFRakUsVUFBVSxLQUFLLE9BQU9pRSxRQUFRakUsVUFBVSxHQUFHLENBQUM7d0JBQzdGK0Usc0JBQUFBO29CQUF0QixNQUFNQyxnQkFBZ0JELENBQUFBLE9BQUFBLENBQUFBLHVCQUFBQSxhQUFhL0YsTUFBTSxjQUFuQitGLGtDQUFBQSx1QkFBdUJkLFFBQVFqRixNQUFNLGNBQXJDK0Ysa0JBQUFBLE9BQXlDO29CQUUvRCw4REFBOEQ7b0JBQzlELElBQUlDLGtCQUFrQk0sZ0JBQWdCO3dCQUNwQ2pMLGNBQWN1SSxXQUFXOzRCQUN2QjVDLFlBQVk7Z0NBQ1YsR0FBRytFLFlBQVk7Z0NBQ2YvRixRQUFRc0c7NEJBQ1Y7d0JBQ0Y7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUVBLHVDQUF1QztZQUN2QzFJLGtCQUFrQm5ELE9BQU8sQ0FBQ3FJLEtBQUs7UUFDakM7SUFDRixHQUFHO1FBQUM1RjtRQUFvQmhFO1FBQVVtQztLQUFjO0lBRWhELHFFQUFxRTtJQUNyRSxNQUFNa0wseUJBQXlCN08sa0RBQVdBLENBQUM7UUFDekMsSUFBSTtZQUNGLElBQUksQ0FBQ3VFLFVBQVV4QixPQUFPLEVBQUU7Z0JBQ3RCZixNQUFNO29CQUNKcUYsU0FBUztvQkFDVEMsT0FBTztvQkFDUEMsYUFBYTtnQkFDZjtnQkFDQTtZQUNGO1lBRUEsbUNBQW1DO1lBQ25DLE1BQU11SCxrQkFBa0J2SyxVQUFVeEIsT0FBTyxDQUFDZ00sa0JBQWtCO1lBQzVELElBQUksQ0FBQ0QsaUJBQWlCO2dCQUNwQjlNLE1BQU07b0JBQ0pxRixTQUFTO29CQUNUQyxPQUFPO29CQUNQQyxhQUFhO2dCQUNmO2dCQUNBO1lBQ0Y7WUFFQXZGLE1BQU07Z0JBQ0pzRixPQUFPO2dCQUNQQyxhQUFhO1lBQ2Y7WUFFQSw0REFBNEQ7WUFDNUQrRSxTQUFTMEMsSUFBSSxDQUFDQyxTQUFTLENBQUNDLEdBQUcsQ0FBQztZQUU1Qiw0R0FBNEc7WUFDNUcsTUFBTUMsYUFBYUwsZ0JBQWdCSyxVQUFVO1lBQzdDLE1BQU1DLFlBQVlOLGdCQUFnQk0sU0FBUztZQUMzQyxNQUFNQyxnQkFBZ0JQLGdCQUFnQlEsV0FBVztZQUNqRCxNQUFNQyxpQkFBaUJULGdCQUFnQlUsWUFBWTtZQUNuRCxNQUFNQyxRQUFRLEdBQUcsc0VBQXNFO1lBRXZGLDBFQUEwRTtZQUMxRSxNQUFNQyxnQkFBZ0JaLGdCQUFnQmEscUJBQXFCO1lBRTNELE1BQU1DLFNBQVMsTUFBTWhQLG1EQUFXQSxDQUFDa08saUJBQWlCO2dCQUNoRGUsaUJBQWlCO2dCQUNqQkosT0FBT0E7Z0JBQ1BLLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RDLFlBQVk7Z0JBQ1pDLFNBQVMsQ0FBQ2Q7Z0JBQ1ZlLFNBQVMsQ0FBQ2Q7Z0JBQ1Y1RixPQUFPNkY7Z0JBQ1A1RixRQUFROEY7Z0JBQ1JZLGFBQWFkO2dCQUNiZSxjQUFjYjtnQkFDZDVILEdBQUcrSCxjQUFjVyxJQUFJLEdBQUdsQjtnQkFDeEJ0SCxHQUFHNkgsY0FBY1ksR0FBRyxHQUFHbEI7WUFDekI7WUFFQSw0QkFBNEI7WUFDNUI5QyxTQUFTMEMsSUFBSSxDQUFDQyxTQUFTLENBQUNzQixNQUFNLENBQUM7WUFFL0Isc0NBQXNDO1lBQ3RDWCxPQUFPWSxNQUFNLENBQUMsQ0FBQ0M7Z0JBQ2IsSUFBSSxDQUFDQSxNQUFNO29CQUNUek8sTUFBTTt3QkFDSnFGLFNBQVM7d0JBQ1RDLE9BQU87d0JBQ1BDLGFBQWE7b0JBQ2Y7b0JBQ0E7Z0JBQ0Y7Z0JBRUEsaUNBQWlDO2dCQUNqQyxNQUFNdUYsTUFBTTRELElBQUlDLGVBQWUsQ0FBQ0Y7Z0JBQ2hDLE1BQU1HLE9BQU90RSxTQUFTQyxhQUFhLENBQUM7Z0JBQ3BDcUUsS0FBSzlFLElBQUksR0FBR2dCO2dCQUNaLE1BQU0rRCxZQUFZck4sQ0FBQUEsa0JBQUFBLDRCQUFBQSxNQUFPc04sSUFBSSxLQUFJO2dCQUNqQ0YsS0FBS0csUUFBUSxHQUFHLEdBQWdCL0YsT0FBYjZGLFdBQVUsS0FBYyxPQUFYN0YsS0FBS0MsR0FBRyxJQUFHO2dCQUMzQ3FCLFNBQVMwQyxJQUFJLENBQUNnQyxXQUFXLENBQUNKO2dCQUMxQkEsS0FBSzVELEtBQUs7Z0JBQ1ZWLFNBQVMwQyxJQUFJLENBQUNpQyxXQUFXLENBQUNMO2dCQUMxQkYsSUFBSVEsZUFBZSxDQUFDcEU7Z0JBRXBCLHlCQUF5QjtnQkFDekI5SyxNQUFNO29CQUNKc0YsT0FBTztvQkFDUEMsYUFBYTtnQkFDZjtZQUNGLEdBQUcsYUFBYSxNQUFNLGlCQUFpQjtRQUN6QyxFQUFFLE9BQU90RCxPQUFZO1lBQ25CcUksU0FBUzBDLElBQUksQ0FBQ0MsU0FBUyxDQUFDc0IsTUFBTSxDQUFDO1lBQy9Cck8sUUFBUStCLEtBQUssQ0FBQyw4QkFBOEJBO1lBQzVDakMsTUFBTTtnQkFDSnFGLFNBQVM7Z0JBQ1RDLE9BQU87Z0JBQ1BDLGFBQWF0RCxNQUFNakIsT0FBTyxJQUFJO1lBQ2hDO1FBQ0Y7SUFDRixHQUFHO1FBQUN1QjtRQUFXZjtRQUFPeEI7S0FBTTtJQUU1QixlQUFlO0lBRWYsa0RBQWtEO0lBQ2xERSxRQUFRQyxHQUFHLENBQUMsb0NBQTBCO1FBQ3BDVjtRQUNBVyxTQUFTLENBQUMsQ0FBQ1Q7UUFDWFUsTUFBTSxFQUFFVixpQkFBQUEsMkJBQUFBLEtBQU1XLEdBQUc7UUFDakJDLFdBQVcsRUFBRVosaUJBQUFBLDJCQUFBQSxLQUFNWSxXQUFXO1FBQzlCVjtRQUNBbUM7UUFDQW1OLFVBQVUsQ0FBQyxDQUFDM047UUFDWkwsZ0JBQWdCLEtBQWtCLEdBQWM7WUFDOUNDLGdCQUFnQkQsZUFBZUUsT0FBTyxDQUFDO1lBQ3ZDQyxnQkFBZ0JILGVBQWVFLE9BQU8sQ0FBQztZQUN2Q0Usb0JBQW9CSixlQUFlRSxPQUFPLENBQUM7UUFDN0MsSUFBSTtJQUNOO0lBRUEsOENBQThDO0lBQzlDLElBQUl4QixhQUFhO1FBQ2YscUJBQ0UsOERBQUN1UDtZQUFJQyxXQUFVO1lBQTREQyxPQUFPO2dCQUFFekIsaUJBQWlCO1lBQVU7OzhCQUM3Ryw4REFBQzFQLG9GQUFPQTtvQkFBQ2tSLFdBQVU7Ozs7Ozs4QkFDbkIsOERBQUNFO29CQUFFRixXQUFVOzhCQUE0Qzs7Ozs7Ozs7Ozs7O0lBRy9EO0lBRUEsbUZBQW1GO0lBQ25GLElBQUksQ0FBQzFQLE1BQU07UUFDVCwrRUFBK0U7UUFDL0UsSUFBSSxJQUFrQixFQUFhO1lBQ2pDLE1BQU15QixpQkFBaUJELGVBQWVFLE9BQU8sQ0FBQyxzQkFBc0I7WUFDcEUsTUFBTUMsaUJBQWlCSCxlQUFlRSxPQUFPLENBQUM7WUFDOUMsTUFBTUUscUJBQXFCSixlQUFlRSxPQUFPLENBQUM7WUFDbEQsTUFBTTBILGdCQUFnQjNILGtCQUFrQkUsa0JBQWtCLEtBQU0ySCxHQUFHLEtBQUtDLFNBQVM1SCxrQkFBbUI7WUFFcEcsSUFBSXlILGVBQWU7Z0JBQ2pCLG1GQUFtRjtnQkFDbkY3SSxRQUFRQyxHQUFHLENBQUMsd0VBQXdFO29CQUNsRmlCO29CQUNBRTtvQkFDQUM7b0JBQ0E5QjtnQkFDRjtnQkFDQSxxQkFDRSw4REFBQzJQO29CQUFJQyxXQUFVO29CQUE0REMsT0FBTzt3QkFBRXpCLGlCQUFpQjtvQkFBVTs7c0NBQzdHLDhEQUFDMVAsb0ZBQU9BOzRCQUFDa1IsV0FBVTs7Ozs7O3NDQUNuQiw4REFBQ0U7NEJBQUVGLFdBQVU7c0NBQTRDOzs7Ozs7Ozs7Ozs7WUFHL0Q7UUFDRjtRQUVBLHNDQUFzQztRQUN0Q25QLFFBQVFDLEdBQUcsQ0FBQztRQUNaLElBQUksSUFBa0IsRUFBYTtZQUNqQ2dCLGVBQWVpSSxLQUFLO1lBQ3BCQyxhQUFhRCxLQUFLO1lBQ2xCM0ksT0FBT0MsUUFBUSxDQUFDNEksT0FBTyxDQUFDO1FBQzFCO1FBQ0EscUJBQ0UsOERBQUM4RjtZQUFJQyxXQUFVO1lBQTREQyxPQUFPO2dCQUFFekIsaUJBQWlCO1lBQVU7OzhCQUM3Ryw4REFBQzFQLG9GQUFPQTtvQkFBQ2tSLFdBQVU7Ozs7Ozs4QkFDbkIsOERBQUNFO29CQUFFRixXQUFVOzhCQUE0Qzs7Ozs7Ozs7Ozs7O0lBRy9EO0lBRUEsSUFBSXJOLGtCQUFrQnZDLFlBQVksT0FBTztRQUN2QyxxQkFDRSw4REFBQzJQO1lBQUlDLFdBQVU7WUFBNERDLE9BQU87Z0JBQUV6QixpQkFBaUI7WUFBVTs7OEJBQzdHLDhEQUFDMVAsb0ZBQU9BO29CQUFDa1IsV0FBVTs7Ozs7OzhCQUNuQiw4REFBQ0U7b0JBQUVGLFdBQVU7OEJBQTRDOzs7Ozs7Ozs7Ozs7SUFHL0Q7SUFFQSxJQUFJcE4sT0FBTyxxQkFBTyw4REFBQ21OO1FBQUlDLFdBQVU7O1lBQW9CO1lBQVFwTjs7Ozs7OztJQUU3RCx3RUFBd0U7SUFDeEUsSUFBSSxDQUFDVCxTQUFTN0IsTUFBTTtRQUNsQixxQkFDRSw4REFBQ3lQO1lBQUlDLFdBQVU7WUFBNERDLE9BQU87Z0JBQUV6QixpQkFBaUI7WUFBVTs7OEJBQzdHLDhEQUFDMVAsb0ZBQU9BO29CQUFDa1IsV0FBVTs7Ozs7OzhCQUNuQiw4REFBQ0U7b0JBQUVGLFdBQVU7OEJBQTRDOzs7Ozs7Ozs7Ozs7SUFHL0Q7SUFFQSwwREFBMEQ7SUFDMUQsSUFBSSxDQUFDN04sT0FBTyxPQUFPO0lBRW5CLHFCQUNFOzswQkFDRSw4REFBQ3BDLCtFQUFpQkE7Z0JBQ2hCb1EsUUFBUW5NO2dCQUNSb00sY0FBY2hOO2dCQUNkaU4sa0JBQWtCbE8sQ0FBQUEsa0JBQUFBLDRCQUFBQSxNQUFPc04sSUFBSSxLQUFJO2dCQUNqQ2EsUUFBUWpOOzs7Ozs7MEJBRVYsOERBQUMwTTtnQkFBSUMsV0FBVTs7a0NBR2YsOERBQUN4USxrRUFBTUE7d0JBQ0wrUSxLQUFLck47d0JBQ0wvQyxVQUFVQTt3QkFDVmdDLE9BQU9BO3dCQUNQSyxvQkFBb0JBO3dCQUNwQmdPLGlCQUFpQjVGO3dCQUNqQnRJLGVBQWVBO3dCQUNmQyxlQUFlQTt3QkFDZmtPLGlCQUFpQixDQUFDL0k7NEJBQ2hCLE1BQU13RSxVQUFVL0wsU0FBU3FILElBQUksQ0FBQ0MsQ0FBQUEsS0FBTUEsR0FBR0MsRUFBRSxLQUFLQTs0QkFDOUMsSUFBSXdFLFdBQVdBLFFBQVE3RCxRQUFRLEVBQUU7Z0NBQy9CL0YsY0FBY29GLElBQUk7b0NBQUVXLFVBQVVxSTtnQ0FBVTs0QkFDMUM7d0JBQ0Y7d0JBQ0FySixZQUFZQTt3QkFFWixnQkFBZ0I7d0JBQ2hCc0osaUJBQWlCMUU7d0JBQ2pCMkUsZ0JBQWdCaEY7d0JBQ2hCaUYsdUJBQXVCdkU7d0JBQ3ZCd0UsZUFBZWxFO3dCQUVmLFNBQVM7d0JBQ1QzSSxpQkFBaUJBO3dCQUNqQkUsb0JBQW9CQTt3QkFDcEJ2RCxVQUFVQTt3QkFDVjRELFlBQVlBO3dCQUNaVyxhQUFhQzt3QkFDYk8sZ0JBQWdCQTt3QkFDaEJMLGlCQUFpQkE7d0JBQ2pCQyxtQkFBbUJBO3dCQUVuQix3REFBd0Q7d0JBQ3hEd0wsZ0JBQWdCLEtBQU87d0JBQ3ZCQyxjQUFjLEtBQU87d0JBQ3JCQyxnQkFBZ0IsS0FBTzt3QkFDdkJDLFlBQVk7Z0NBQU1oTztvQ0FBQUEscUJBQUFBLFVBQVV4QixPQUFPLGNBQWpCd0IseUNBQUFBLG1CQUFtQmlPLFFBQVE7O3dCQUM3Q0MsY0FBYyxLQUFPO3dCQUNyQkMsaUJBQWlCLEtBQU87d0JBQ3hCQyxjQUFjLEtBQU87d0JBQ3JCQyxnQkFBZ0IsS0FBTzt3QkFDdkJDLGVBQWU5RTt3QkFDZitFLG9CQUFvQixLQUFPO3dCQUMzQkMsV0FBVyxLQUFPOzs7Ozs7a0NBSXBCLDhEQUFDalMseUVBQVlBO3dCQUNYVSxVQUFVQSxZQUFZLEVBQUU7d0JBQ3hCMkMsUUFBUUEsVUFBVSxFQUFFO3dCQUNwQjZPLGVBQWU1Rzt3QkFDZjZHLG1CQUFtQixJQUFNak8sd0JBQXdCO3dCQUNqRGtPLGFBQWE7Z0NBQU0zTztvQ0FBQUEscUJBQUFBLFVBQVV4QixPQUFPLGNBQWpCd0IseUNBQUFBLG1CQUFtQjRPLGVBQWU7O3dCQUNyREMsZUFBZTVPO3dCQUNmNk8sZUFBZWhQO3dCQUNmbUMsYUFBYUM7d0JBQ2I2TSxtQkFBbUJsTTt3QkFDbkJtTSxlQUFlOUY7d0JBQ2Z1RSxpQkFBaUIxRTt3QkFDakI1RSxZQUFZQTt3QkFDWnBFLGFBQWFNO3dCQUNiNE8sb0JBQW9CM0U7d0JBQ3BCb0QsZ0JBQWdCaEY7d0JBQ2hCcEkscUJBQXFCQTs7Ozs7O2tDQUl2Qiw4REFBQzlELDhFQUFpQkE7d0JBQ2hCeVEsUUFBUTNNO3dCQUNSNE8sU0FBUyxJQUFNM08sdUJBQXVCO3dCQUN0Q3RELFVBQVU4RCxrQkFBa0I7NEJBQUNBO3lCQUFnQixHQUFHLEVBQUU7d0JBQ2xEb08sY0FBY3hHO3dCQUNkMkYsZUFBZTlFO3dCQUNmNEYsZUFBZTFSO3dCQUNmK1AsaUJBQWlCMUU7d0JBQ2pCNEYsYUFBYTtnQ0FFWDNPOzRCQURBYSxtQkFBbUI4RSxDQUFBQSxPQUFRLENBQUNBOzZCQUM1QjNGLHFCQUFBQSxVQUFVeEIsT0FBTyxjQUFqQndCLHlDQUFBQSxtQkFBbUI0TyxlQUFlO3dCQUNwQzt3QkFDQXpLLFlBQVlBO3dCQUNadkQsaUJBQWlCQTs7Ozs7O2tDQUluQiw4REFBQ2xFLGdGQUFrQkE7d0JBQ2pCdVEsUUFBUXZNO3dCQUNSd00sY0FBY3ZNO3dCQUNkME8sU0FBU2xPO3dCQUNUbU8sY0FBY2pHOzs7Ozs7a0NBR2hCLDhEQUFDNU0sOEZBQXFCQTt3QkFDcEJ3USxRQUFRek07d0JBQ1IwTSxjQUFjek07d0JBQ2Q4TyxZQUFZLE9BQU9oSDs0QkFDakIsTUFBTXBFLFdBQVcsU0FBUztnQ0FBRXFFLFNBQVM7b0NBQUVEO2dDQUFJO2dDQUFHeEQsWUFBWTtvQ0FBRUMsTUFBTTt3Q0FBRUMsT0FBTzt3Q0FBS0MsUUFBUTtvQ0FBSTtnQ0FBRTs0QkFBRTs0QkFDaEd6RSx3QkFBd0I7d0JBQzFCOzs7Ozs7b0JBS0RnQix3Q0FDQyw4REFBQzlFLHdGQUFpQkE7d0JBQ2hCc1EsUUFBUTFMO3dCQUNSMkwsY0FBYzFMO3dCQUNkaUksU0FBU2hJO3dCQUNUK04sVUFBVXBRO3dCQUNWcVEsVUFBVXBROzs7Ozs7a0NBS2QsOERBQUN6Qyw4RUFBZ0JBO3dCQUNmb00sU0FBU2pJO3dCQUNUMk8sV0FBVzdOLHNCQUFzQixDQUFDLENBQUNkO3dCQUNuQ21PLFNBQVMsSUFBTXBOLHNCQUFzQjs7Ozs7Ozs7Ozs7Ozs7QUFLN0M7R0FyNkJ3Qi9FOztRQUVQcEIsc0RBQVNBO1FBQ2dDRSx1REFBT0E7UUFDL0NDLDBEQUFVQTtRQUNSSyxzREFBUUE7UUFDVEQsaUVBQWFBO1FBMEQxQkgsZ0VBQWFBO1FBYXFEQyxpRUFBYUE7UUFnRC9FYywrREFBWUE7UUFrRU9iLHlFQUFpQkE7OztLQS9MbEJjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvYm9hcmQvW2JvYXJkSWRdL3BhZ2UudHN4PzE1ZWIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5pbXBvcnQgeyBMb2FkZXIyIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcblxuLy8gSG9va3MgeSBDb250ZXh0b3NcbmltcG9ydCB7IHVzZUF1dGgsIHVzZVVzZXIsIHVzZVN0b3JhZ2UgfSBmcm9tICdAL2ZpcmViYXNlL3Byb3ZpZGVyJztcbmltcG9ydCB7IHVzZUJvYXJkU3RvcmUgfSBmcm9tICdAL2xpYi9zdG9yZS9ib2FyZFN0b3JlJztcbmltcG9ydCB7IHVzZUJvYXJkU3RhdGUgfSBmcm9tICdAL2hvb2tzL3VzZS1ib2FyZC1zdGF0ZSc7XG5pbXBvcnQgeyB1c2VFbGVtZW50TWFuYWdlciB9IGZyb20gJ0AvaG9va3MvdXNlLWVsZW1lbnQtbWFuYWdlcic7XG5pbXBvcnQgeyB1c2VNZWRpYVF1ZXJ5IH0gZnJvbSAnQC9ob29rcy91c2UtbWVkaWEtcXVlcnknO1xuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tICdAL2hvb2tzL3VzZS10b2FzdCc7XG5cbi8vIFV0aWxpZGFkZXMgeSBUaXBvc1xuaW1wb3J0IHsgdXBsb2FkRmlsZSB9IGZyb20gJ0AvbGliL3VwbG9hZC1oZWxwZXInO1xuaW1wb3J0IHsgV2l0aElkLCBDYW52YXNFbGVtZW50LCBCb2FyZCwgRWxlbWVudFR5cGUsIEVsZW1lbnRDb250ZW50LCBDYW52YXNFbGVtZW50UHJvcGVydGllcyB9IGZyb20gJ0AvbGliL3R5cGVzJztcbmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcyc7XG5cbi8vIENvbXBvbmVudGVzIGRlIFVJXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcblxuLy8gQ29tcG9uZW50ZXMgZGVsIENhbnZhc1xuaW1wb3J0IENhbnZhcyBmcm9tICdAL2NvbXBvbmVudHMvY2FudmFzL2NhbnZhcyc7XG5pbXBvcnQgVG9vbHNTaWRlYmFyIGZyb20gJ0AvY29tcG9uZW50cy9jYW52YXMvdG9vbHMtc2lkZWJhcic7XG5pbXBvcnQgRm9ybWF0dGluZ1Rvb2xiYXIgZnJvbSAnQC9jb21wb25lbnRzL2NhbnZhcy9mb3JtYXR0aW5nLXRvb2xiYXInO1xuLy8gRGnDoWxvZ29zXG5pbXBvcnQgQWRkSW1hZ2VGcm9tVXJsRGlhbG9nIGZyb20gJ0AvY29tcG9uZW50cy9jYW52YXMvZWxlbWVudHMvYWRkLWltYWdlLWZyb20tdXJsLWRpYWxvZyc7XG5pbXBvcnQgQ2hhbmdlRm9ybWF0RGlhbG9nIGZyb20gJ0AvY29tcG9uZW50cy9jYW52YXMvY2hhbmdlLWZvcm1hdC1kaWFsb2cnO1xuaW1wb3J0IEVkaXRDb21tZW50RGlhbG9nIGZyb20gJ0AvY29tcG9uZW50cy9jYW52YXMvZWxlbWVudHMvZWRpdC1jb21tZW50LWRpYWxvZyc7XG5pbXBvcnQgRWxlbWVudEluZm9QYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvY2FudmFzL2VsZW1lbnQtaW5mby1wYW5lbCc7XG5pbXBvcnQgUmVuYW1lQm9hcmREaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL2NhbnZhcy9yZW5hbWUtYm9hcmQtZGlhbG9nJztcbi8vIEhvb2sgZGUgZGljdGFkb1xuaW1wb3J0IHsgdXNlRGljdGF0aW9uIH0gZnJvbSAnQC9ob29rcy91c2UtZGljdGF0aW9uJztcblxuaW50ZXJmYWNlIEJvYXJkUGFnZVByb3BzIHtcbiAgcGFyYW1zOiB7XG4gICAgYm9hcmRJZDogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBCb2FyZFBhZ2UoeyBwYXJhbXMgfTogQm9hcmRQYWdlUHJvcHMpIHtcbiAgY29uc3QgeyBib2FyZElkIH0gPSBwYXJhbXM7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCB7IHVzZXIsIGlzVXNlckxvYWRpbmc6IGF1dGhMb2FkaW5nLCB1c2VyRXJyb3IgfSA9IHVzZVVzZXIoKTtcbiAgY29uc3Qgc3RvcmFnZSA9IHVzZVN0b3JhZ2UoKTtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3QgaXNNb2JpbGUgPSB1c2VNZWRpYVF1ZXJ5KCcobWF4LXdpZHRoOiA3NjhweCknKTtcbiAgXG4gIC8vIERFQlVHOiBMb2cgaW5tZWRpYXRvIGFsIGluaWNpbyBkZWwgY29tcG9uZW50ZVxuICBjb25zb2xlLmxvZygn8J+OryBbQm9hcmRQYWdlXSBDb21wb25lbnRlIGluaWNpYWRvJywge1xuICAgIGJvYXJkSWQsXG4gICAgaGFzVXNlcjogISF1c2VyLFxuICAgIHVzZXJJZDogdXNlcj8udWlkLFxuICAgIGlzQW5vbnltb3VzOiB1c2VyPy5pc0Fub255bW91cyxcbiAgICBhdXRoTG9hZGluZyxcbiAgICBwYXRobmFtZTogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgOiAnU1NSJ1xuICB9KTtcbiAgXG4gIC8vIENSw41USUNPOiBVc2FyIHJlZnMgcGFyYSBmdW5jaW9uZXMgZGUgWnVzdGFuZCB5IHRvYXN0IHBhcmEgZXZpdGFyIGJ1Y2xlcyBpbmZpbml0b3NcbiAgY29uc3QgbG9hZEJvYXJkUmVmID0gdXNlUmVmPGFueT4obnVsbCk7XG4gIGNvbnN0IGNyZWF0ZUJvYXJkUmVmID0gdXNlUmVmPGFueT4obnVsbCk7XG4gIGNvbnN0IGNsZWFudXBSZWYgPSB1c2VSZWY8YW55PihudWxsKTtcbiAgY29uc3QgdG9hc3RSZWYgPSB1c2VSZWYodG9hc3QpO1xuICBcbiAgLy8gQWN0dWFsaXphciByZWZzIGN1YW5kbyBjYW1iaWFuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdG9hc3RSZWYuY3VycmVudCA9IHRvYXN0O1xuICB9LCBbdG9hc3RdKTtcbiAgXG4gIC8vIERFQlVHOiBMb2cgY3VhbmRvIGVsIGNvbXBvbmVudGUgc2UgbW9udGFcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygn8J+agCBbQm9hcmRQYWdlXSBDb21wb25lbnRlIG1vbnRhZG8nLCB7IGJvYXJkSWQgfSk7XG4gIH0sIFtib2FyZElkXSk7XG4gIFxuICAvLyBERUJVRzogTG9nIGRlbCBlc3RhZG8gZGVsIHVzdWFyaW9cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBbQm9hcmRQYWdlXSBFc3RhZG8gZGVsIHVzdWFyaW86Jywge1xuICAgICAgaGFzVXNlcjogISF1c2VyLFxuICAgICAgdXNlcklkOiB1c2VyPy51aWQsXG4gICAgICBpc1VzZXJMb2FkaW5nOiBhdXRoTG9hZGluZyxcbiAgICAgIHVzZXJFcnJvcjogdXNlckVycm9yPy5tZXNzYWdlLFxuICAgICAgdXNlckVtYWlsOiB1c2VyPy5lbWFpbCxcbiAgICAgIGlzQW5vbnltb3VzOiB1c2VyPy5pc0Fub255bW91cyxcbiAgICAgIHNlc3Npb25TdG9yYWdlOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHtcbiAgICAgICAgaGFzUmVjZW50TG9naW46IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2hhc1JlY2VudExvZ2luJyksXG4gICAgICAgIGxvZ2luVGltZXN0YW1wOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdsb2dpblRpbWVzdGFtcCcpLFxuICAgICAgICByZWRpcmVjdGluZ1RvQm9hcmQ6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3JlZGlyZWN0aW5nVG9Cb2FyZCcpXG4gICAgICB9IDogJ04vQSAoU1NSKSdcbiAgICB9KTtcbiAgfSwgW3VzZXIsIGF1dGhMb2FkaW5nLCB1c2VyRXJyb3JdKTtcblxuICAvLyAtLSBFU1RBRE8gR0xPQkFMIERFTCBUQUJMRVJPIChadXN0YW5kKSAtLVxuICBjb25zdCB7XG4gICAgZWxlbWVudHMsXG4gICAgYm9hcmQsXG4gICAgbG9hZEJvYXJkLFxuICAgIGNyZWF0ZUJvYXJkLFxuICAgIHVwZGF0ZUVsZW1lbnQsXG4gICAgZGVsZXRlRWxlbWVudCxcbiAgICBzZWxlY3RlZEVsZW1lbnRJZHMsXG4gICAgc2V0U2VsZWN0ZWRFbGVtZW50SWRzLFxuICAgIGlzTG9hZGluZzogaXNCb2FyZExvYWRpbmcsXG4gICAgZXJyb3IsXG4gICAgY2xlYW51cCxcbiAgfSA9IHVzZUJvYXJkU3RvcmUoKTtcbiAgXG4gIC8vIENSw41USUNPOiBBY3R1YWxpemFyIHJlZnMgY3VhbmRvIGxhcyBmdW5jaW9uZXMgZGUgWnVzdGFuZCBjYW1iaWFuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbG9hZEJvYXJkUmVmLmN1cnJlbnQgPSBsb2FkQm9hcmQ7XG4gICAgY3JlYXRlQm9hcmRSZWYuY3VycmVudCA9IGNyZWF0ZUJvYXJkO1xuICAgIGNsZWFudXBSZWYuY3VycmVudCA9IGNsZWFudXA7XG4gIH0sIFtsb2FkQm9hcmQsIGNyZWF0ZUJvYXJkLCBjbGVhbnVwXSk7XG5cbiAgLy8gLS0gRVNUQURPIExPQ0FMIFkgSE9PS1MgLS1cbiAgLy8gQ1LDjVRJQ086IHVzZUJvYXJkU3RhdGUgY3JlYSBsaXN0ZW5lcnMgRFVQTElDQURPUyBkZSBGaXJlYmFzZSBwYXJhIGVsZW1lbnRzXG4gIC8vIFNvbG8gdXNhciBwYXJhIGJvYXJkcywgaGFuZGxlUmVuYW1lQm9hcmQsIGhhbmRsZURlbGV0ZUJvYXJkLCBjbGVhckNhbnZhc1xuICAvLyBOTyB1c2FyIGVsZW1lbnRzIGRlIHVzZUJvYXJkU3RhdGUgLSB1c2FyIHNvbG8gZGUgdXNlQm9hcmRTdG9yZVxuICBjb25zdCB7IGJvYXJkcywgaGFuZGxlUmVuYW1lQm9hcmQsIGhhbmRsZURlbGV0ZUJvYXJkLCBjbGVhckNhbnZhcyB9ID0gdXNlQm9hcmRTdGF0ZShib2FyZElkKTtcbiAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmPGFueT4obnVsbCk7XG4gIFxuICAvLyBXcmFwcGVyIGZ1bmN0aW9ucyBwYXJhIGNvaW5jaWRpciBjb24gbG9zIHRpcG9zIGVzcGVyYWRvc1xuICBjb25zdCBoYW5kbGVSZW5hbWVCb2FyZFdyYXBwZXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SXNSZW5hbWVCb2FyZERpYWxvZ09wZW4odHJ1ZSk7XG4gIH0sIFtdKTtcbiAgXG4gIGNvbnN0IGhhbmRsZVNhdmVSZW5hbWVCb2FyZCA9IHVzZUNhbGxiYWNrKChuZXdOYW1lOiBzdHJpbmcpID0+IHtcbiAgICBoYW5kbGVSZW5hbWVCb2FyZChuZXdOYW1lKTtcbiAgICBzZXRJc1JlbmFtZUJvYXJkRGlhbG9nT3BlbihmYWxzZSk7XG4gIH0sIFtoYW5kbGVSZW5hbWVCb2FyZF0pO1xuICBcbiAgY29uc3QgY2xlYXJDYW52YXNXcmFwcGVyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNsZWFyQ2FudmFzKGVsZW1lbnRzKTtcbiAgfSwgW2VsZW1lbnRzLCBjbGVhckNhbnZhc10pO1xuXG4gIC8vIEVzdGFkb3MgZGUgVUlcbiAgY29uc3QgW2lzRm9ybWF0VG9vbGJhck9wZW4sIHNldElzRm9ybWF0VG9vbGJhck9wZW5dID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtpc0ltYWdlVXJsRGlhbG9nT3Blbiwgc2V0SXNJbWFnZVVybERpYWxvZ09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2hhbmdlRm9ybWF0RGlhbG9nT3Blbiwgc2V0Q2hhbmdlRm9ybWF0RGlhbG9nT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1Bhbm5pbmdBY3RpdmUsIHNldElzUGFubmluZ0FjdGl2ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1JlbmFtZUJvYXJkRGlhbG9nT3Blbiwgc2V0SXNSZW5hbWVCb2FyZERpYWxvZ09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBcbiAgLy8gRXN0YWRvcyBkZSBTZWxlY2Npw7NuIHkgRWRpY2nDs25cbiAgY29uc3QgW3NlbGVjdGVkRWxlbWVudCwgc2V0U2VsZWN0ZWRFbGVtZW50XSA9IHVzZVN0YXRlPFdpdGhJZDxDYW52YXNFbGVtZW50PiB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbYWN0aXZhdGVkRWxlbWVudElkLCBzZXRBY3RpdmF0ZWRFbGVtZW50SWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzZWxlY3RlZE5vdGVwYWRGb3JGb3JtYXQsIHNldFNlbGVjdGVkTm90ZXBhZEZvckZvcm1hdF0gPSB1c2VTdGF0ZTxXaXRoSWQ8Q2FudmFzRWxlbWVudD4gfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzRGlydHksIHNldElzRGlydHldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNFZGl0Q29tbWVudERpYWxvZ09wZW4sIHNldElzRWRpdENvbW1lbnREaWFsb2dPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkQ29tbWVudEZvckVkaXQsIHNldFNlbGVjdGVkQ29tbWVudEZvckVkaXRdID0gdXNlU3RhdGU8V2l0aElkPENhbnZhc0VsZW1lbnQ+IHwgbnVsbD4obnVsbCk7XG4gIFxuICAvLyBSZWYgcGFyYSBhbG1hY2VuYXIgekluZGV4IG9yaWdpbmFsIGRlIGVsZW1lbnRvcyBjdWFuZG8gc2UgZWRpdGFuXG4gIGNvbnN0IG9yaWdpbmFsWkluZGV4UmVmID0gdXNlUmVmPE1hcDxzdHJpbmcsIG51bWJlcj4+KG5ldyBNYXAoKSk7XG4gIFxuICAvLyBQYW5lbCBkZSBpbmZvcm1hY2nDs24gZGVsIGVsZW1lbnRvIChPcGNpw7NuIDQ6IENvbWJpbmFjacOzbiBQYW5lbCArIENvbnNvbGEpXG4gIGNvbnN0IFtpc0luZm9QYW5lbFZpc2libGUsIHNldElzSW5mb1BhbmVsVmlzaWJsZV0gPSB1c2VTdGF0ZShmYWxzZSk7IC8vIE9jdWx0byBwb3IgZGVmZWN0bywgc2UgbXVlc3RyYSBhbCBzZWxlY2Npb25hciBlbGVtZW50b1xuXG4gIC8vIC0tIERJQ1RBRE8gREUgVk9aIC0tXG4gIC8vIEhvb2sgZGUgZGljdGFkbyBzaW1wbGlmaWNhZG8gc2Vnw7puIFJlYWRtZSAxOCBOb3ZcbiAgY29uc3Qge1xuICAgIGlzU3VwcG9ydGVkOiBpc0RpY3RhdGlvblN1cHBvcnRlZCxcbiAgICBpc0xpc3RlbmluZzogaXNEaWN0YXRpb25MaXN0ZW5pbmcsXG4gICAgdHJhbnNjcmlwdCxcbiAgICBmaW5hbFRyYW5zY3JpcHQsXG4gICAgaW50ZXJpbVRyYW5zY3JpcHQsXG4gICAgcGVybWlzc2lvbkVycm9yLFxuICAgIHRvZ2dsZTogdG9nZ2xlRGljdGF0aW9uLFxuICB9ID0gdXNlRGljdGF0aW9uKCk7XG4gIFxuICAvLyBsaXZlVHJhbnNjcmlwdCBjb21iaW5hIGZpbmFsVHJhbnNjcmlwdCArIGludGVyaW1UcmFuc2NyaXB0IHBhcmEgbW9zdHJhciBlbiB0aWVtcG8gcmVhbFxuICBjb25zdCBsaXZlVHJhbnNjcmlwdCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIC8vIENvbWJpbmFyIHRleHRvIGZpbmFsIGFjdW11bGFkbyBjb24gdGV4dG8gcHJvdmlzaW9uYWxcbiAgICBjb25zdCBmaW5hbCA9IGZpbmFsVHJhbnNjcmlwdCB8fCAnJztcbiAgICBjb25zdCBpbnRlcmltID0gaW50ZXJpbVRyYW5zY3JpcHQgfHwgJyc7XG4gICAgXG4gICAgLy8gU2kgaGF5IHRleHRvIHByb3Zpc2lvbmFsLCBhZ3JlZ2FybG8gYWwgZmluYWwgZGVsIHRleHRvIGZpbmFsXG4gICAgaWYgKGludGVyaW0udHJpbSgpKSB7XG4gICAgICByZXR1cm4gZmluYWwgKyAoZmluYWwgPyAnICcgOiAnJykgKyBpbnRlcmltO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmluYWw7XG4gIH0sIFtmaW5hbFRyYW5zY3JpcHQsIGludGVyaW1UcmFuc2NyaXB0XSk7XG4gIFxuICBjb25zdCBoYW5kbGVUb2dnbGVEaWN0YXRpb24gPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRvZ2dsZURpY3RhdGlvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBhbHRlcm5hciBkaWN0YWRvOicsIGVycm9yKTtcbiAgICB9XG4gIH0sIFt0b2dnbGVEaWN0YXRpb25dKTtcblxuICAvLyBNb3N0cmFyIGVycm9yIGRlIHBlcm1pc29zIGFsIHVzdWFyaW9cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocGVybWlzc2lvbkVycm9yKSB7XG4gICAgICB0b2FzdCh7XG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICAgIHRpdGxlOiAnRXJyb3IgZGUgUGVybWlzb3MnLFxuICAgICAgICBkZXNjcmlwdGlvbjogcGVybWlzc2lvbkVycm9yLFxuICAgICAgICBkdXJhdGlvbjogNTAwMCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Blcm1pc3Npb25FcnJvciwgdG9hc3RdKTtcblxuICAvLyAtLSBHRVNUScOTTiBERSBFTEVNRU5UT1MgLS1cbiAgY29uc3QgZ2V0Vmlld3BvcnRDZW50ZXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGNhbnZhc1JlZi5jdXJyZW50KSB7XG4gICAgICBjb25zdCBjZW50ZXIgPSBjYW52YXNSZWYuY3VycmVudC5nZXRWaWV3cG9ydENlbnRlcigpO1xuICAgICAgLy8gQ1LDjVRJQ086IEFzZWd1cmFyIHF1ZSBjdWFuZG8gZWwgc2Nyb2xsIGVzdMOhIGVuIDAsMCwgbG9zIGVsZW1lbnRvcyBzZSBjcmVlbiBjZXJjYSBkZWwgb3JpZ2VuXG4gICAgICAvLyBFbCB2aWV3cG9ydCBjZW50ZXIgZGViZSBzZXIgcmVsYXRpdm8gYSBsYSBwb3NpY2nDs24gdmlzaWJsZSwgbm8gYWJzb2x1dGFcbiAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgfVxuICAgIC8vIEZhbGxiYWNrOiByZXRvcm5hciBjZW50cm8gZGVsIHZpZXdwb3J0IHZpc2libGUgKG5vIGFic29sdXRvKVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIHsgeDogd2luZG93LmlubmVyV2lkdGggLyAyLCB5OiB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyIH07XG4gICAgfVxuICAgIHJldHVybiB7IHg6IDQwMDAwLCB5OiA0MDAwMCB9OyAvLyBGYWxsYmFjayBwYXJhIFNTUlxuICB9LCBbXSk7XG5cbiAgLy8gQ1LDjVRJQ086IFVzYXIgcmVmIHBhcmEgZWxlbWVudHMgcGFyYSBldml0YXIgcmVjcmVhY2nDs24gZGUgZnVuY2nDs25cbiAgY29uc3QgZWxlbWVudHNSZWYgPSB1c2VSZWYoZWxlbWVudHMpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGVsZW1lbnRzUmVmLmN1cnJlbnQgPSBlbGVtZW50cztcbiAgfSwgW2VsZW1lbnRzXSk7XG5cbiAgY29uc3QgZ2V0TmV4dFpJbmRleCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBjdXJyZW50RWxlbWVudHMgPSBlbGVtZW50c1JlZi5jdXJyZW50O1xuICAgIGlmICghY3VycmVudEVsZW1lbnRzIHx8IGN1cnJlbnRFbGVtZW50cy5sZW5ndGggPT09IDApIHJldHVybiAxO1xuICAgIGNvbnN0IHpJbmRleGVzID0gY3VycmVudEVsZW1lbnRzXG4gICAgICAuZmlsdGVyKGUgPT4gdHlwZW9mIGUuekluZGV4ID09PSAnbnVtYmVyJylcbiAgICAgIC5tYXAoZSA9PiBlLnpJbmRleCEpO1xuICAgIHJldHVybiB6SW5kZXhlcy5sZW5ndGggPiAwID8gTWF0aC5tYXgoLi4uekluZGV4ZXMpICsgMSA6IDI7XG4gIH0sIFtdKTsgLy8g4pyFIFNpbiBkZXBlbmRlbmNpYXMgLSB1c2EgcmVmXG5cbiAgY29uc3QgeyBhZGRFbGVtZW50IH0gPSB1c2VFbGVtZW50TWFuYWdlcihib2FyZElkLCBnZXRWaWV3cG9ydENlbnRlciwgZ2V0TmV4dFpJbmRleCk7XG5cbiAgLy8gLS0gRUZFQ1RPUyAtLVxuXG4gIC8vIFNpbmNyb25pemFyIHNlbGVjY2nDs25cbiAgLy8gQ1LDjVRJQ086IE9wdGltaXphZG8gcGFyYSBldml0YXIgcmUtcmVuZGVycyBjb25zdGFudGVzIHkgYnVjbGVzIGluZmluaXRvc1xuICBjb25zdCBzZWxlY3RlZEVsZW1lbnRJZCA9IHNlbGVjdGVkRWxlbWVudElkcy5sZW5ndGggPT09IDEgPyBzZWxlY3RlZEVsZW1lbnRJZHNbMF0gOiBudWxsO1xuICBjb25zdCBmb3VuZEVsZW1lbnQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIXNlbGVjdGVkRWxlbWVudElkIHx8ICFlbGVtZW50cyB8fCBlbGVtZW50cy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICAgIHJldHVybiBlbGVtZW50cy5maW5kKGVsID0+IGVsLmlkID09PSBzZWxlY3RlZEVsZW1lbnRJZCkgfHwgbnVsbDtcbiAgfSwgW3NlbGVjdGVkRWxlbWVudElkLCBlbGVtZW50cy5sZW5ndGgsIHNlbGVjdGVkRWxlbWVudElkID8gZWxlbWVudHMuZmluZChlID0+IGUuaWQgPT09IHNlbGVjdGVkRWxlbWVudElkKT8udXBkYXRlZEF0IDogbnVsbF0pOyAvLyDinIUgRGVwZW5kZXIgZGUgbGVuZ3RoIHkgdXBkYXRlZEF0LCBubyBkZWwgYXJyYXkgY29tcGxldG9cbiAgXG4gIC8vIENSw41USUNPOiBTb2xvIGFjdHVhbGl6YXIgc2kgZWwgSUQgcmVhbG1lbnRlIGNhbWJpw7MgKGV2aXRhciBidWNsZXMgaW5maW5pdG9zKVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGZvdW5kSWQgPSBmb3VuZEVsZW1lbnQ/LmlkID8/IG51bGw7XG4gICAgY29uc3QgY3VycmVudElkID0gc2VsZWN0ZWRFbGVtZW50Py5pZCA/PyBudWxsO1xuICAgIGlmIChmb3VuZElkICE9PSBjdXJyZW50SWQpIHtcbiAgICAgIHNldFNlbGVjdGVkRWxlbWVudChmb3VuZEVsZW1lbnQpO1xuICAgIH1cbiAgfSwgW2ZvdW5kRWxlbWVudD8uaWQsIHNlbGVjdGVkRWxlbWVudD8uaWRdKTsgLy8g4pyFIERlcGVuZGVyIHNvbG8gZGUgSURzLCBubyBkZSBvYmpldG9zIGNvbXBsZXRvc1xuXG4gIC8vIC0tIExPR0dJTkcgRU4gQ09OU09MQSBjdWFuZG8gc2Ugc2VsZWNjaW9uYSB1biBlbGVtZW50byAtLVxuICAvLyBPUFRJTUlaQURPOiBTb2xvIGxvZ2dlYXIgZW4gZGVzYXJyb2xsbyB5IGNvbiBpbmZvcm1hY2nDs24gZXNlbmNpYWxcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2VsZWN0ZWRFbGVtZW50KSB7XG4gICAgICAvLyBNb3N0cmFyIHBhbmVsIGF1dG9tw6F0aWNhbWVudGUgY3VhbmRvIHNlIHNlbGVjY2lvbmEgdW4gZWxlbWVudG9cbiAgICAgIHNldElzSW5mb1BhbmVsVmlzaWJsZSh0cnVlKTtcbiAgICAgIFxuICAgICAgLy8gU29sbyBsb2dnZWFyIGVuIGRlc2Fycm9sbG8geSBkZSBmb3JtYSBvcHRpbWl6YWRhXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk4sgRWxlbWVudG8gc2VsZWNjaW9uYWRvOicsIHtcbiAgICAgICAgICBpZDogc2VsZWN0ZWRFbGVtZW50LmlkLFxuICAgICAgICAgIHR5cGU6IHNlbGVjdGVkRWxlbWVudC50eXBlLFxuICAgICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICB4OiBzZWxlY3RlZEVsZW1lbnQucHJvcGVydGllcz8ucG9zaXRpb24/LnggfHwgc2VsZWN0ZWRFbGVtZW50LnggfHwgMCxcbiAgICAgICAgICAgIHk6IHNlbGVjdGVkRWxlbWVudC5wcm9wZXJ0aWVzPy5wb3NpdGlvbj8ueSB8fCBzZWxlY3RlZEVsZW1lbnQueSB8fCAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2l6ZToge1xuICAgICAgICAgICAgd2lkdGg6IHNlbGVjdGVkRWxlbWVudC5wcm9wZXJ0aWVzPy5zaXplPy53aWR0aCB8fCBzZWxlY3RlZEVsZW1lbnQud2lkdGggfHwgMCxcbiAgICAgICAgICAgIGhlaWdodDogc2VsZWN0ZWRFbGVtZW50LnByb3BlcnRpZXM/LnNpemU/LmhlaWdodCB8fCBzZWxlY3RlZEVsZW1lbnQuaGVpZ2h0IHx8IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB6SW5kZXg6IHNlbGVjdGVkRWxlbWVudC56SW5kZXgsXG4gICAgICAgICAgcGFyZW50SWQ6IHNlbGVjdGVkRWxlbWVudC5wYXJlbnRJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIExvZyBjb21wbGV0byBzb2xvIHNpIGVzdMOhIGhhYmlsaXRhZG8gZWwgZGVidWdcbiAgICAgICAgaWYgKCh3aW5kb3cgYXMgYW55KS5ERUJVR19FTEVNRU5UUykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdFbGVtZW50byBjb21wbGV0bzonLCBzZWxlY3RlZEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9jdWx0YXIgcGFuZWwgY3VhbmRvIG5vIGhheSBlbGVtZW50byBzZWxlY2Npb25hZG9cbiAgICAgIHNldElzSW5mb1BhbmVsVmlzaWJsZShmYWxzZSk7XG4gICAgfVxuICB9LCBbc2VsZWN0ZWRFbGVtZW50XSk7XG5cbiAgLy8gLS0gQVRBSk8gREUgVEVDTEFETzogQ3RybCtTaGlmdCtEIHBhcmEgbW9zdHJhci9vY3VsdGFyIHBhbmVsIC0tXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIGUuc2hpZnRLZXkgJiYgZS5rZXkgPT09ICdEJykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNldElzSW5mb1BhbmVsVmlzaWJsZShwcmV2ID0+ICFwcmV2KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgfSwgW10pO1xuXG4gIC8vIENSw41USUNPOiBSRUZTIHBhcmEgcHJldmVuaXIgbcO6bHRpcGxlcyBlamVjdWNpb25lc1xuICBjb25zdCBoYXNMb2FkZWRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCBpc0xvYWRpbmdSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCB3YWl0VGltZXJSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgY3VycmVudEJvYXJkSWRSZWYgPSB1c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gQ09OU09MSURBRE86IFVuIHNvbG8gdXNlRWZmZWN0IHBhcmEgbG9naW4geSBjYXJnYSBkZSB0YWJsZXJvXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/CflIQgW0JvYXJkUGFnZV0gdXNlRWZmZWN0IGVqZWN1dGFkbycsIHtcbiAgICAgIGJvYXJkSWQsXG4gICAgICBoYXNVc2VyOiAhIXVzZXIsXG4gICAgICB1c2VySWQ6IHVzZXI/LnVpZCxcbiAgICAgIGlzQW5vbnltb3VzOiB1c2VyPy5pc0Fub255bW91cyxcbiAgICAgIGF1dGhMb2FkaW5nLFxuICAgICAgaXNMb2FkaW5nOiBpc0xvYWRpbmdSZWYuY3VycmVudCxcbiAgICAgIGhhc0xvYWRlZDogaGFzTG9hZGVkUmVmLmN1cnJlbnQsXG4gICAgICBjdXJyZW50Qm9hcmRJZDogY3VycmVudEJvYXJkSWRSZWYuY3VycmVudFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlc2V0ZWFyIGZsYWdzIHNpIGNhbWJpw7MgYm9hcmRJZFxuICAgIGlmIChjdXJyZW50Qm9hcmRJZFJlZi5jdXJyZW50ICE9PSBib2FyZElkKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBbQm9hcmRQYWdlXSBCb2FyZElkIGNhbWJpw7MsIHJlc2V0ZWFuZG8gZmxhZ3MnLCB7XG4gICAgICAgIG9sZDogY3VycmVudEJvYXJkSWRSZWYuY3VycmVudCxcbiAgICAgICAgbmV3OiBib2FyZElkXG4gICAgICB9KTtcbiAgICAgIGhhc0xvYWRlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICBpc0xvYWRpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgY3VycmVudEJvYXJkSWRSZWYuY3VycmVudCA9IGJvYXJkSWQ7XG4gICAgfVxuICAgIFxuICAgIC8vIFByZXZlbmlyIG3Dumx0aXBsZXMgZWplY3VjaW9uZXNcbiAgICBpZiAoaXNMb2FkaW5nUmVmLmN1cnJlbnQgfHwgYXV0aExvYWRpbmcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfij7jvuI8gW0JvYXJkUGFnZV0gU2FsdGFuZG8gZWplY3VjacOzbiAoeWEgY2FyZ2FuZG8gbyBhdXRoIGNhcmdhbmRvKScsIHtcbiAgICAgICAgaXNMb2FkaW5nOiBpc0xvYWRpbmdSZWYuY3VycmVudCxcbiAgICAgICAgYXV0aExvYWRpbmdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIExpbXBpYXIgdGltZXIgYW50ZXJpb3JcbiAgICBpZiAod2FpdFRpbWVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh3YWl0VGltZXJSZWYuY3VycmVudCk7XG4gICAgICB3YWl0VGltZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIGxvZ2luIHJlY2llbnRlIChzb2xvIGVuIGNsaWVudGUpXG4gICAgY29uc3QgaGFzUmVjZW50TG9naW4gPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2hhc1JlY2VudExvZ2luJykgPT09ICd0cnVlJyA6IGZhbHNlO1xuICAgIGNvbnN0IGxvZ2luVGltZXN0YW1wID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdsb2dpblRpbWVzdGFtcCcpIDogbnVsbDtcbiAgICBjb25zdCByZWRpcmVjdGluZ1RvQm9hcmQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3JlZGlyZWN0aW5nVG9Cb2FyZCcpIDogbnVsbDtcbiAgICBjb25zdCBhbm9ueW1vdXNVc2VySWQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2Fub255bW91c1VzZXJJZCcpIDogbnVsbDtcbiAgICAvLyBDUsONVElDTzogQXVtZW50YXIgdGllbXBvIGRlIGVzcGVyYSBhIDIgbWludXRvcyBwYXJhIGRhciB0aWVtcG8gYSBGaXJlYmFzZSBBdXRoIGRlIGluaWNpYWxpemFyXG4gICAgY29uc3QgaXNMb2dpblJlY2VudCA9IGhhc1JlY2VudExvZ2luICYmIGxvZ2luVGltZXN0YW1wICYmIChEYXRlLm5vdygpIC0gcGFyc2VJbnQobG9naW5UaW1lc3RhbXApKSA8IDEyMDAwMDtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+UjSBbQm9hcmRQYWdlXSBFc3RhZG8gZGUgYXV0ZW50aWNhY2nDs246Jywge1xuICAgICAgaGFzVXNlcjogISF1c2VyLFxuICAgICAgdXNlcklkOiB1c2VyPy51aWQsXG4gICAgICBoYXNSZWNlbnRMb2dpbixcbiAgICAgIGxvZ2luVGltZXN0YW1wLFxuICAgICAgcmVkaXJlY3RpbmdUb0JvYXJkLFxuICAgICAgYm9hcmRJZCxcbiAgICAgIGlzTG9naW5SZWNlbnQsXG4gICAgICBhbm9ueW1vdXNVc2VySWQsXG4gICAgICB0aW1lU2luY2VMb2dpbjogbG9naW5UaW1lc3RhbXAgPyBEYXRlLm5vdygpIC0gcGFyc2VJbnQobG9naW5UaW1lc3RhbXApIDogbnVsbFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlZGlyaWdpciBzaSBubyBoYXkgdXN1YXJpbyB5IG5vIGhheSBsb2dpbiByZWNpZW50ZVxuICAgIGlmICghdXNlciAmJiAhaXNMb2dpblJlY2VudCkge1xuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBbQm9hcmRQYWdlXSBObyBoYXkgdXN1YXJpbyBuaSBsb2dpbiByZWNpZW50ZSwgcmVkaXJpZ2llbmRvIGEgaW5pY2lvLi4uJyk7XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCcvJyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIEVzcGVyYXIgc2kgaGF5IGxvZ2luIHJlY2llbnRlIHBlcm8gbm8gdXN1YXJpbyAoQ1LDjVRJQ08gcGFyYSB1c3VhcmlvcyBhbsOzbmltb3MgZGVzcHXDqXMgZGUgcmVkaXJlY3QpXG4gICAgaWYgKGlzTG9naW5SZWNlbnQgJiYgIXVzZXIpIHtcbiAgICAgIC8vIENSw41USUNPOiBBdW1lbnRhciB0aWVtcG8gZGUgZXNwZXJhIC0gRmlyZWJhc2UgQXV0aCBwdWVkZSB0YXJkYXIgZW4gaW5pY2lhbGl6YXIgZGVzcHXDqXMgZGUgcmVkaXJlY3RcbiAgICAgIGNvbnN0IHdhaXRUaW1lID0gcmVkaXJlY3RpbmdUb0JvYXJkID09PSBib2FyZElkID8gNjAwMDAgOiAzMDAwMDsgLy8gNjBzIHNpIGVzIGVsIHRhYmxlcm8gY29ycmVjdG8sIDMwcyBzaSBub1xuICAgICAgY29uc29sZS5sb2coJ+KPsyBbQm9hcmRQYWdlXSBFc3BlcmFuZG8gdXN1YXJpbyBkZXNwdcOpcyBkZSBsb2dpbiByZWNpZW50ZS4uLicsIHtcbiAgICAgICAgd2FpdFRpbWUsXG4gICAgICAgIHJlZGlyZWN0aW5nVG9Cb2FyZCxcbiAgICAgICAgYm9hcmRJZCxcbiAgICAgICAgaGFzUmVjZW50TG9naW4sXG4gICAgICAgIGxvZ2luVGltZXN0YW1wLFxuICAgICAgICBhbm9ueW1vdXNVc2VySWQsXG4gICAgICAgIHRpbWVTaW5jZUxvZ2luOiBsb2dpblRpbWVzdGFtcCA/IERhdGUubm93KCkgLSBwYXJzZUludChsb2dpblRpbWVzdGFtcCkgOiBudWxsXG4gICAgICB9KTtcbiAgICAgIHdhaXRUaW1lclJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICghdXNlciAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gW0JvYXJkUGFnZV0gVGltZW91dDogVXN1YXJpbyBubyBkaXNwb25pYmxlIGRlc3B1w6lzIGRlIGVzcGVyYXIsIHJlZGlyaWdpZW5kby4uLicpO1xuICAgICAgICAgIC8vIENSw41USUNPOiBObyBsaW1waWFyIHNlc3Npb25TdG9yYWdlIGNvbXBsZXRhbWVudGUgLSBwdWVkZSBoYWJlciBpbmZvcm1hY2nDs24gw7p0aWxcbiAgICAgICAgICAvLyBTb2xvIGxpbXBpYXIgZmxhZ3MgZGUgbG9naW4sIG1hbnRlbmVyIGFub255bW91c1VzZXJJZCBzaSBleGlzdGVcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdoYXNSZWNlbnRMb2dpbicpO1xuICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2xvZ2luVGltZXN0YW1wJyk7XG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgncmVkaXJlY3RpbmdUb0JvYXJkJyk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoJy8nKTtcbiAgICAgICAgfVxuICAgICAgfSwgd2FpdFRpbWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENhcmdhci9jcmVhciB0YWJsZXJvIChTT0xPIFVOQSBWRVopXG4gICAgaWYgKHVzZXI/LnVpZCAmJiAhaGFzTG9hZGVkUmVmLmN1cnJlbnQgJiYgbG9hZEJvYXJkUmVmLmN1cnJlbnQgJiYgY3JlYXRlQm9hcmRSZWYuY3VycmVudCkge1xuICAgICAgY29uc29sZS5sb2coJ+KchSBbQm9hcmRQYWdlXSBVc3VhcmlvIGRpc3BvbmlibGUsIGNhcmdhbmRvL2NyZWFuZG8gdGFibGVybycsIHtcbiAgICAgICAgdXNlcklkOiB1c2VyLnVpZCxcbiAgICAgICAgYm9hcmRJZCxcbiAgICAgICAgaXNBbm9ueW1vdXM6IHVzZXIuaXNBbm9ueW1vdXNcbiAgICAgIH0pO1xuICAgICAgaGFzTG9hZGVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgaXNMb2FkaW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgY29uc3QgdXNlcklkID0gdXNlci51aWQ7XG4gICAgICBcbiAgICAgIGlmIChib2FyZElkID09PSAnbmV3Jykge1xuICAgICAgICBjcmVhdGVCb2FyZFJlZi5jdXJyZW50KHVzZXJJZCkudGhlbigobmV3Qm9hcmRJZDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgaXNMb2FkaW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICBpZiAobmV3Qm9hcmRJZCAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaGFzUmVjZW50TG9naW4nLCAndHJ1ZScpO1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnbG9naW5UaW1lc3RhbXAnLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgL2JvYXJkLyR7bmV3Qm9hcmRJZH1gO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoYXNMb2FkZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkuY2F0Y2goKGVycm9yOiBhbnkpID0+IHtcbiAgICAgICAgICBpc0xvYWRpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgIGhhc0xvYWRlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGFsIGNyZWFyIHRhYmxlcm86JywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvYWRCb2FyZFJlZi5jdXJyZW50KGJvYXJkSWQsIHVzZXJJZCkudGhlbigobG9hZGVkQm9hcmRJZDogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICAgICAgICAgIGlzTG9hZGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgaWYgKGxvYWRlZEJvYXJkSWQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIENSw41USUNPOiBTb2xvIGxpbXBpYXIgc2Vzc2lvblN0b3JhZ2UgZGVzcHXDqXMgZGUgY29uZmlybWFyIHF1ZSBlbCB0YWJsZXJvIHNlIGNhcmfDsyBleGl0b3NhbWVudGVcbiAgICAgICAgICAgIC8vIEVzcGVyYXIgbcOhcyB0aWVtcG8gcGFyYSBhc2VndXJhciBxdWUgdG9kbyBlc3TDoSBjYXJnYWRvXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnaGFzUmVjZW50TG9naW4nKTtcbiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnbG9naW5UaW1lc3RhbXAnKTtcbiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgncmVkaXJlY3RpbmdUb0JvYXJkJyk7XG4gICAgICAgICAgICAgIC8vIE5PIGxpbXBpYXIgYW5vbnltb3VzVXNlcklkIC0gcHVlZGUgc2VyIG5lY2VzYXJpbyBwYXJhIGZ1dHVyYXMgbmF2ZWdhY2lvbmVzXG4gICAgICAgICAgICB9LCA1MDAwKTsgLy8gQXVtZW50YXIgYSA1IHNlZ3VuZG9zXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhc0xvYWRlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaCgoZXJyb3I6IGFueSkgPT4ge1xuICAgICAgICAgIGlzTG9hZGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgaGFzTG9hZGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgYWwgY2FyZ2FyIHRhYmxlcm86JywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYW51cFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAod2FpdFRpbWVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHdhaXRUaW1lclJlZi5jdXJyZW50KTtcbiAgICAgICAgd2FpdFRpbWVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKGNsZWFudXBSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhbnVwUmVmLmN1cnJlbnQoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbYm9hcmRJZCwgdXNlciwgYXV0aExvYWRpbmddKTtcblxuICAvLyAtLSBIQU5ETEVSUyBERSBBQ0NJw5NOIC0tXG5cbiAgY29uc3QgaGFuZGxlU2VsZWN0RWxlbWVudCA9IChlbGVtZW50SWQ6IHN0cmluZyB8IG51bGwsIGlzTXVsdGlTZWxlY3Q6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoZWxlbWVudElkID09PSBudWxsKSBzZXRTZWxlY3RlZEVsZW1lbnRJZHMoW10pO1xuICAgIGVsc2Ugc2V0U2VsZWN0ZWRFbGVtZW50SWRzKFtlbGVtZW50SWRdKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVVcGxvYWRJbWFnZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXVzZXI/LnVpZCkge1xuICAgICAgdG9hc3QoeyB0aXRsZTogJ0Vycm9yJywgZGVzY3JpcHRpb246ICdEZWJlcyBpbmljaWFyIHNlc2nDs24nIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJJZCA9IHVzZXIudWlkOyAvLyBHdWFyZGFyIGVuIHZhcmlhYmxlIGxvY2FsXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGlucHV0LnR5cGUgPSAnZmlsZSc7XG4gICAgaW5wdXQuYWNjZXB0ID0gJ2ltYWdlLyonO1xuICAgIGlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKGUpID0+IHtcbiAgICAgIGNvbnN0IGZpbGUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuZmlsZXM/LlswXTtcbiAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGxvYWRSZXN1bHQgPSBhd2FpdCB1cGxvYWRGaWxlKGZpbGUsIHVzZXJJZCwgc3RvcmFnZSk7XG4gICAgICAgIGlmICh1cGxvYWRSZXN1bHQudXJsKSB7XG4gICAgICAgICAgYXdhaXQgYWRkRWxlbWVudCgnaW1hZ2UnLCB7XG4gICAgICAgICAgICBjb250ZW50OiB7IHVybDogdXBsb2FkUmVzdWx0LnVybCB9LFxuICAgICAgICAgICAgcHJvcGVydGllczogeyBzaXplOiB7IHdpZHRoOiAzMDAsIGhlaWdodDogMjAwIH0gfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0b2FzdCh7IHRpdGxlOiAnSW1hZ2VuIHN1YmlkYScgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRvYXN0KHsgdmFyaWFudDogJ2Rlc3RydWN0aXZlJywgdGl0bGU6ICdFcnJvciBhbCBzdWJpciBpbWFnZW4nIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgaW5wdXQuY2xpY2soKTtcbiAgfSwgW3VzZXIsIHN0b3JhZ2UsIGFkZEVsZW1lbnQsIHRvYXN0XSk7XG5cbiAgY29uc3QgaGFuZGxlRm9ybWF0VG9nZ2xlID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0SXNGb3JtYXRUb29sYmFyT3BlbihwcmV2ID0+ICFwcmV2KSwgW10pO1xuXG4gIC8vIEhhbmRsZXIgcGFyYSBhZ3JlZ2FyIG1hcmNhZG9yL2xvY2FsaXphZG9yIGRlc2RlIGVsIG1lbsO6IGZvcm1hdG9cbiAgY29uc3QgaGFuZGxlQWRkTWFya2VyID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHZpZXdwb3J0Q2VudGVyID0gZ2V0Vmlld3BvcnRDZW50ZXIoKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYWRkRWxlbWVudCgnY29tbWVudCcsIHtcbiAgICAgICAgY29udGVudDogeyBcbiAgICAgICAgICB0aXRsZTogJ051ZXZvIExvY2FsaXphZG9yJywgXG4gICAgICAgICAgbGFiZWw6ICdMb2NhbGl6YWRvcicsXG4gICAgICAgICAgdGV4dDogJycgXG4gICAgICAgIH0sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBwb3NpdGlvbjogdmlld3BvcnRDZW50ZXIsXG4gICAgICAgICAgc2l6ZTogeyB3aWR0aDogNDgsIGhlaWdodDogNDggfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgdG9hc3QoeyBcbiAgICAgICAgdGl0bGU6ICdMb2NhbGl6YWRvciBjcmVhZG8nLCBcbiAgICAgICAgZGVzY3JpcHRpb246ICdTZSBoYSBtYXJjYWRvIHVuYSBudWV2YSB1YmljYWNpw7NuIGVuIGVsIHRhYmxlcm8uIEVkaXRhIGVsIG5vbWJyZSBwYXJhIGlkZW50aWZpY2FybG8uJyBcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIHRvYXN0KHsgXG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsIFxuICAgICAgICB0aXRsZTogJ0Vycm9yJywgXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlIHx8ICdObyBzZSBwdWRvIGNyZWFyIGVsIGxvY2FsaXphZG9yLicgXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtnZXRWaWV3cG9ydENlbnRlciwgYWRkRWxlbWVudCwgdG9hc3RdKTtcblxuICBjb25zdCBoYW5kbGVMb2NhdGVFbGVtZW50ID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHMuZmluZChlbCA9PiBlbC5pZCA9PT0gaWQpO1xuICAgIGlmIChlbGVtZW50ICYmIGNhbnZhc1JlZi5jdXJyZW50KSB7XG4gICAgICBoYW5kbGVTZWxlY3RFbGVtZW50KGlkLCBmYWxzZSk7XG4gICAgICBjYW52YXNSZWYuY3VycmVudC5jZW50ZXJPbkVsZW1lbnQoZWxlbWVudCk7XG4gICAgfVxuICB9LCBbZWxlbWVudHNdKTtcblxuICBjb25zdCBoYW5kbGVPcGVuTm90ZXBhZCA9IHVzZUNhbGxiYWNrKGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzLmZpbmQoZWwgPT4gZWwuaWQgPT09IGlkKTtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcbiAgICB1cGRhdGVFbGVtZW50KGlkLCB7IGhpZGRlbjogZmFsc2UgfSk7XG4gICAgaGFuZGxlU2VsZWN0RWxlbWVudChpZCwgZmFsc2UpO1xuICAgIGlmIChjYW52YXNSZWYuY3VycmVudCkgY2FudmFzUmVmLmN1cnJlbnQuY2VudGVyT25FbGVtZW50KGVsZW1lbnQpO1xuICB9LCBbZWxlbWVudHMsIHVwZGF0ZUVsZW1lbnRdKTtcblxuICBjb25zdCBoYW5kbGVDaGFuZ2VOb3RlcGFkRm9ybWF0ID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHMuZmluZChlbCA9PiBlbC5pZCA9PT0gaWQpO1xuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICBzZXRTZWxlY3RlZE5vdGVwYWRGb3JGb3JtYXQoZWxlbWVudCk7XG4gICAgICBzZXRDaGFuZ2VGb3JtYXREaWFsb2dPcGVuKHRydWUpO1xuICAgIH1cbiAgfSwgW2VsZW1lbnRzXSk7XG5cbiAgY29uc3QgaGFuZGxlU2F2ZUZvcm1hdCA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nLCBmb3JtYXQ6ICdsZXR0ZXInIHwgJzEweDE1JykgPT4ge1xuICAgIC8vIEZJWDogQ29ycmVnaXIgZGltZW5zaW9uZXMgLSAxMHgxNSBzaWduaWZpY2EgMTBjbSBhbmNobyB4IDE1Y20gYWx0byAobm8gMjEgYWx0byB4IDE1IGFuY2hvKVxuICAgIC8vIDEwY20gPSB+Mzc4cHgsIDE1Y20gPSB+NTY3cHggKGEgOTYgRFBJKVxuICAgIGNvbnN0IG5ld1NpemUgPSBmb3JtYXQgPT09ICdsZXR0ZXInIFxuICAgICAgPyB7IHdpZHRoOiA3OTQsIGhlaWdodDogMTAyMSB9IC8vIENhcnRhOiA4LjVcIiB4IDExXCJcbiAgICAgIDogeyB3aWR0aDogMzc4LCBoZWlnaHQ6IDU2NyB9OyAvLyAxMHgxNTogMTBjbSBhbmNobyB4IDE1Y20gYWx0byAoQ09SUkVHSURPKVxuICAgIHVwZGF0ZUVsZW1lbnQoaWQsIHsgXG4gICAgICB3aWR0aDogbmV3U2l6ZS53aWR0aCxcbiAgICAgIGhlaWdodDogbmV3U2l6ZS5oZWlnaHQsXG4gICAgICBwcm9wZXJ0aWVzOiB7IFxuICAgICAgICAuLi5zZWxlY3RlZE5vdGVwYWRGb3JGb3JtYXQ/LnByb3BlcnRpZXMsIFxuICAgICAgICBmb3JtYXQsIFxuICAgICAgICBzaXplOiBuZXdTaXplIFxuICAgICAgfSBcbiAgICB9KTtcbiAgICBzZXRDaGFuZ2VGb3JtYXREaWFsb2dPcGVuKGZhbHNlKTtcbiAgfSwgW3NlbGVjdGVkTm90ZXBhZEZvckZvcm1hdCwgdXBkYXRlRWxlbWVudF0pO1xuXG4gIGNvbnN0IGhhbmRsZUVkaXRDb21tZW50ID0gdXNlQ2FsbGJhY2soKGNvbW1lbnQ6IFdpdGhJZDxDYW52YXNFbGVtZW50PikgPT4ge1xuICAgIHNldFNlbGVjdGVkQ29tbWVudEZvckVkaXQoY29tbWVudCk7XG4gICAgc2V0SXNFZGl0Q29tbWVudERpYWxvZ09wZW4odHJ1ZSk7XG4gIH0sIFtdKTtcblxuICAvLyBSRUdMQVMgWi1JTkRFWDogQ3VhbmRvIHNlIGhhY2UgY2xpY2sgZW4gdW4gZWxlbWVudG8sIHBhc2EgYWwgZnJlbnRlIHBhcmEgZWRpdGFybG9cbiAgLy8gQ3VhZGVybm9zIHkgbGllbnpvIHNpZW1wcmUgZXN0w6FuIGVuIHByaW1lcmEgY2FwYSAoekluZGV4IGJhc2UgYWx0bylcbiAgLy8gRGVzcHXDqXMgZGUgZWRpdGFyLCBlbCBlbGVtZW50byB2dWVsdmUgYSBzdSBwb3NpY2nDs24gb3JpZ2luYWxcbiAgY29uc3QgaGFuZGxlRWRpdEVsZW1lbnQgPSB1c2VDYWxsYmFjaygoZWxlbWVudElkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHMuZmluZChlbCA9PiBlbC5pZCA9PT0gZWxlbWVudElkKTtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcblxuICAgIC8vIFRpcG9zIHF1ZSBzaWVtcHJlIGRlYmVuIGVzdGFyIGVuIHByaW1lcmEgY2FwYSAoZGVzcHXDqXMgZGVsIHRhYmxlcm8pXG4gICAgY29uc3QgZmlyc3RMYXllclR5cGVzID0gWydub3RlcGFkJywgJ25vdGVwYWQtc2ltcGxlJywgJ3Rlc3Qtbm90ZXBhZCcsICd0YWJiZWQtbm90ZXBhZCcsICd5ZWxsb3ctbm90ZXBhZCddO1xuICAgIGNvbnN0IGlzRmlyc3RMYXllciA9IGZpcnN0TGF5ZXJUeXBlcy5pbmNsdWRlcyhlbGVtZW50LnR5cGUpO1xuICAgIFxuICAgIC8vIE9idGVuZXIgekluZGV4IGFjdHVhbFxuICAgIGNvbnN0IGVsZW1lbnRQcm9wcyA9IHR5cGVvZiBlbGVtZW50LnByb3BlcnRpZXMgPT09ICdvYmplY3QnICYmIGVsZW1lbnQucHJvcGVydGllcyAhPT0gbnVsbCA/IGVsZW1lbnQucHJvcGVydGllcyA6IHt9O1xuICAgIGNvbnN0IGN1cnJlbnRaSW5kZXggPSBlbGVtZW50UHJvcHMuekluZGV4ID8/IGVsZW1lbnQuekluZGV4ID8/IDE7XG4gICAgXG4gICAgLy8gR3VhcmRhciB6SW5kZXggb3JpZ2luYWwgc2kgbm8gZXN0w6EgZ3VhcmRhZG9cbiAgICBpZiAoIW9yaWdpbmFsWkluZGV4UmVmLmN1cnJlbnQuaGFzKGVsZW1lbnRJZCkpIHtcbiAgICAgIG9yaWdpbmFsWkluZGV4UmVmLmN1cnJlbnQuc2V0KGVsZW1lbnRJZCwgY3VycmVudFpJbmRleCk7XG4gICAgfVxuICAgIFxuICAgIC8vIENhbGN1bGFyIG51ZXZvIHpJbmRleDogdHJhZXIgYWwgZnJlbnRlIHRlbXBvcmFsbWVudGVcbiAgICBjb25zdCBtYXhaSW5kZXggPSBnZXROZXh0WkluZGV4KCk7XG4gICAgY29uc3QgbmV3WkluZGV4ID0gaXNGaXJzdExheWVyIFxuICAgICAgPyBNYXRoLm1heChtYXhaSW5kZXggLSAxMDAsIDEwMDApIC8vIFByaW1lcmEgY2FwYTogbcOtbmltbyAxMDAwXG4gICAgICA6IG1heFpJbmRleDsgLy8gT3Ryb3MgZWxlbWVudG9zOiBtw6F4aW1vIGRpc3BvbmlibGVcbiAgICBcbiAgICAvLyBBY3R1YWxpemFyIHpJbmRleCBwYXJhIHRyYWVyIGFsIGZyZW50ZVxuICAgIHVwZGF0ZUVsZW1lbnQoZWxlbWVudElkLCB7XG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIC4uLmVsZW1lbnRQcm9wcyxcbiAgICAgICAgekluZGV4OiBuZXdaSW5kZXgsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFxuICAgIC8vIEFjdGl2YXIgZWxlbWVudG8gcGFyYSBlZGljacOzblxuICAgIHNldEFjdGl2YXRlZEVsZW1lbnRJZChlbGVtZW50SWQpO1xuICAgIFxuICAgIC8vIENlbnRyYXIgdmlzdGEgZW4gZWwgZWxlbWVudG8gc2kgZXN0w6EgZGlzcG9uaWJsZVxuICAgIGlmIChjYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgY2FudmFzUmVmLmN1cnJlbnQuY2VudGVyT25FbGVtZW50KGVsZW1lbnQpO1xuICAgIH1cbiAgfSwgW2VsZW1lbnRzLCBnZXROZXh0WkluZGV4LCB1cGRhdGVFbGVtZW50XSk7XG5cbiAgLy8gUmVzdGF1cmFyIHpJbmRleCBvcmlnaW5hbCBjdWFuZG8gc2UgZGVzZWxlY2Npb25hIHVuIGVsZW1lbnRvXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmF0ZWRFbGVtZW50SWQgJiYgb3JpZ2luYWxaSW5kZXhSZWYuY3VycmVudC5zaXplID4gMCkge1xuICAgICAgLy8gUmVzdGF1cmFyIHpJbmRleCBvcmlnaW5hbCBkZSB0b2RvcyBsb3MgZWxlbWVudG9zIGVkaXRhZG9zXG4gICAgICBvcmlnaW5hbFpJbmRleFJlZi5jdXJyZW50LmZvckVhY2goKG9yaWdpbmFsWkluZGV4LCBlbGVtZW50SWQpID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzLmZpbmQoZWwgPT4gZWwuaWQgPT09IGVsZW1lbnRJZCk7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgY29uc3QgZWxlbWVudFByb3BzID0gdHlwZW9mIGVsZW1lbnQucHJvcGVydGllcyA9PT0gJ29iamVjdCcgJiYgZWxlbWVudC5wcm9wZXJ0aWVzICE9PSBudWxsID8gZWxlbWVudC5wcm9wZXJ0aWVzIDoge307XG4gICAgICAgICAgY29uc3QgY3VycmVudFpJbmRleCA9IGVsZW1lbnRQcm9wcy56SW5kZXggPz8gZWxlbWVudC56SW5kZXggPz8gMTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTb2xvIHJlc3RhdXJhciBzaSBlbCB6SW5kZXggYWN0dWFsIGVzIGRpZmVyZW50ZSBhbCBvcmlnaW5hbFxuICAgICAgICAgIGlmIChjdXJyZW50WkluZGV4ICE9PSBvcmlnaW5hbFpJbmRleCkge1xuICAgICAgICAgICAgdXBkYXRlRWxlbWVudChlbGVtZW50SWQsIHtcbiAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgIC4uLmVsZW1lbnRQcm9wcyxcbiAgICAgICAgICAgICAgICB6SW5kZXg6IG9yaWdpbmFsWkluZGV4LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gTGltcGlhciBlbCBtYXBhIGRlc3B1w6lzIGRlIHJlc3RhdXJhclxuICAgICAgb3JpZ2luYWxaSW5kZXhSZWYuY3VycmVudC5jbGVhcigpO1xuICAgIH1cbiAgfSwgW2FjdGl2YXRlZEVsZW1lbnRJZCwgZWxlbWVudHMsIHVwZGF0ZUVsZW1lbnRdKTtcblxuICAvLyBGdW5jacOzbiBwYXJhIGV4cG9ydGFyIGVsIHRhYmxlcm8gY29tcGxldG8gYSBQTkcgZGUgYWx0YSByZXNvbHVjacOzblxuICBjb25zdCBoYW5kbGVFeHBvcnRCb2FyZFRvUG5nID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWNhbnZhc1JlZi5jdXJyZW50KSB7XG4gICAgICAgIHRvYXN0KHtcbiAgICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgICAgIHRpdGxlOiAnRXJyb3InLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTm8gc2UgcHVkbyBhY2NlZGVyIGFsIGxpZW56by4nLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBPYnRlbmVyIGVsIGNvbnRlbmVkb3IgZGVsIGNhbnZhc1xuICAgICAgY29uc3QgY2FudmFzQ29udGFpbmVyID0gY2FudmFzUmVmLmN1cnJlbnQuZ2V0Q2FudmFzQ29udGFpbmVyKCk7XG4gICAgICBpZiAoIWNhbnZhc0NvbnRhaW5lcikge1xuICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgICAgICB0aXRsZTogJ0Vycm9yJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ05vIHNlIHB1ZG8gZW5jb250cmFyIGVsIGNvbnRlbmVkb3IgZGVsIGxpZW56by4nLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiAnRXhwb3J0YW5kby4uLicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnR2VuZXJhbmRvIGltYWdlbiBQTkcgZGUgYWx0YSByZXNvbHVjacOzbiBkZWwgdGFibGVybyBjb21wbGV0by4gRXN0byBwdWVkZSB0YXJkYXIgdW5vcyBzZWd1bmRvcy4uLicsXG4gICAgICB9KTtcblxuICAgICAgLy8gT2N1bHRhciBlbGVtZW50b3MgZGUgVUkgdGVtcG9yYWxtZW50ZSBwYXJhIGxhIGV4cG9ydGFjacOzblxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdleHBvcnRpbmctdG8tcG5nJyk7XG5cbiAgICAgIC8vIENhcHR1cmFyIFNPTE8gZWwgw6FyZWEgdmlzaWJsZSBkZWwgdXN1YXJpbyAodmlld3BvcnQpIC0gVXNhciBtaXNtYSBsw7NnaWNhIGRlIGFsdGEgcmVzb2x1Y2nDs24gcXVlIGN1YWRlcm5vc1xuICAgICAgY29uc3Qgc2Nyb2xsTGVmdCA9IGNhbnZhc0NvbnRhaW5lci5zY3JvbGxMZWZ0O1xuICAgICAgY29uc3Qgc2Nyb2xsVG9wID0gY2FudmFzQ29udGFpbmVyLnNjcm9sbFRvcDtcbiAgICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSBjYW52YXNDb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IGNhbnZhc0NvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICBjb25zdCBzY2FsZSA9IDM7IC8vIEFsdGEgcmVzb2x1Y2nDs24gKG1pc21hIHF1ZSBjdWFkZXJub3MpIC0gY2FwdGFuZG8gdG9kb3MgbG9zIGRldGFsbGVzXG4gICAgICBcbiAgICAgIC8vIE9idGVuZXIgZWwgcmVjdMOhbmd1bG8gZGVsIGNvbnRlbmVkb3IgcGFyYSBjYWxjdWxhciBsYSBwb3NpY2nDs24gcmVsYXRpdmFcbiAgICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSBjYW52YXNDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNhbnZhcyA9IGF3YWl0IGh0bWwyY2FudmFzKGNhbnZhc0NvbnRhaW5lciwge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjOTZlNGU2JyxcbiAgICAgICAgc2NhbGU6IHNjYWxlLFxuICAgICAgICB1c2VDT1JTOiB0cnVlLFxuICAgICAgICBsb2dnaW5nOiBmYWxzZSxcbiAgICAgICAgYWxsb3dUYWludDogZmFsc2UsXG4gICAgICAgIHNjcm9sbFg6IC1zY3JvbGxMZWZ0LFxuICAgICAgICBzY3JvbGxZOiAtc2Nyb2xsVG9wLFxuICAgICAgICB3aWR0aDogdmlld3BvcnRXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiB2aWV3cG9ydEhlaWdodCxcbiAgICAgICAgd2luZG93V2lkdGg6IHZpZXdwb3J0V2lkdGgsXG4gICAgICAgIHdpbmRvd0hlaWdodDogdmlld3BvcnRIZWlnaHQsXG4gICAgICAgIHg6IGNvbnRhaW5lclJlY3QubGVmdCArIHNjcm9sbExlZnQsXG4gICAgICAgIHk6IGNvbnRhaW5lclJlY3QudG9wICsgc2Nyb2xsVG9wLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlc3RhdXJhciBlbGVtZW50b3MgZGUgVUlcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZXhwb3J0aW5nLXRvLXBuZycpO1xuXG4gICAgICAvLyBDb252ZXJ0aXIgY2FudmFzIGEgYmxvYiB5IGRlc2NhcmdhclxuICAgICAgY2FudmFzLnRvQmxvYigoYmxvYjogQmxvYiB8IG51bGwpID0+IHtcbiAgICAgICAgaWYgKCFibG9iKSB7XG4gICAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdObyBzZSBwdWRvIGdlbmVyYXIgbGEgaW1hZ2VuLicsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXIgVVJMIHRlbXBvcmFsIHkgZGVzY2FyZ2FyXG4gICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIGxpbmsuaHJlZiA9IHVybDtcbiAgICAgICAgY29uc3QgYm9hcmROYW1lID0gYm9hcmQ/Lm5hbWUgfHwgJ3RhYmxlcm8nO1xuICAgICAgICBsaW5rLmRvd25sb2FkID0gYCR7Ym9hcmROYW1lfV8ke0RhdGUubm93KCl9LnBuZ2A7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgIGxpbmsuY2xpY2soKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuXG4gICAgICAgIC8vIE1vc3RyYXIgdG9hc3QgZGUgw6l4aXRvXG4gICAgICAgIHRvYXN0KHtcbiAgICAgICAgICB0aXRsZTogJ0V4cG9ydGFkbycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdFbCB0YWJsZXJvIHNlIGhhIGV4cG9ydGFkbyBjb21vIFBORyBkZSBhbHRhIHJlc29sdWNpw7NuLicsXG4gICAgICAgIH0pO1xuICAgICAgfSwgJ2ltYWdlL3BuZycsIDEuMCk7IC8vIENhbGlkYWQgbcOheGltYVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZXhwb3J0aW5nLXRvLXBuZycpO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgZXhwb3J0YXIgdGFibGVybzonLCBlcnJvcik7XG4gICAgICB0b2FzdCh7XG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICAgIHRpdGxlOiAnRXJyb3InLFxuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZSB8fCAnTm8gc2UgcHVkbyBleHBvcnRhciBlbCB0YWJsZXJvLicsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtjYW52YXNSZWYsIGJvYXJkLCB0b2FzdF0pO1xuXG4gIC8vIC0tIFJFTkRFUiAtLVxuICBcbiAgLy8gREVCVUc6IExvZyBkZWwgZXN0YWRvIGFudGVzIGRlIGN1YWxxdWllciByZXR1cm5cbiAgY29uc29sZS5sb2coJ/CfjqggW0JvYXJkUGFnZV0gUmVuZGVyOicsIHtcbiAgICBib2FyZElkLFxuICAgIGhhc1VzZXI6ICEhdXNlcixcbiAgICB1c2VySWQ6IHVzZXI/LnVpZCxcbiAgICBpc0Fub255bW91czogdXNlcj8uaXNBbm9ueW1vdXMsXG4gICAgYXV0aExvYWRpbmcsXG4gICAgaXNCb2FyZExvYWRpbmcsXG4gICAgaGFzQm9hcmQ6ICEhYm9hcmQsXG4gICAgc2Vzc2lvblN0b3JhZ2U6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8ge1xuICAgICAgaGFzUmVjZW50TG9naW46IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2hhc1JlY2VudExvZ2luJyksXG4gICAgICBsb2dpblRpbWVzdGFtcDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9naW5UaW1lc3RhbXAnKSxcbiAgICAgIHJlZGlyZWN0aW5nVG9Cb2FyZDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncmVkaXJlY3RpbmdUb0JvYXJkJylcbiAgICB9IDogJ04vQSAoU1NSKSdcbiAgfSk7XG5cbiAgLy8gTW9zdHJhciBsb2FkaW5nIG1pZW50cmFzIGF1dGggZXN0w6EgY2FyZ2FuZG9cbiAgaWYgKGF1dGhMb2FkaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLXNjcmVlbiB3LWZ1bGwgZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCIgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiAnIzk2ZTRlNicgfX0+XG4gICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtOCB3LTggYW5pbWF0ZS1zcGluIHRleHQtc2xhdGUtOTAwXCIgLz5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS05MDBcIj5WZXJpZmljYW5kbyBhdXRlbnRpY2FjacOzbi4uLjwvcD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICAvLyBTaSBubyBoYXkgdXN1YXJpbyBkZXNwdcOpcyBkZSBjYXJnYXIsIHZlcmlmaWNhciBsb2dpbiByZWNpZW50ZSBhbnRlcyBkZSByZWRpcmlnaXJcbiAgaWYgKCF1c2VyKSB7XG4gICAgLy8gVmVyaWZpY2FyIHNpIGhheSBsb2dpbiByZWNpZW50ZSAocGFyYSB1c3VhcmlvcyBhbsOzbmltb3MgZGVzcHXDqXMgZGUgcmVkaXJlY3QpXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBoYXNSZWNlbnRMb2dpbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2hhc1JlY2VudExvZ2luJykgPT09ICd0cnVlJztcbiAgICAgIGNvbnN0IGxvZ2luVGltZXN0YW1wID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9naW5UaW1lc3RhbXAnKTtcbiAgICAgIGNvbnN0IHJlZGlyZWN0aW5nVG9Cb2FyZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3JlZGlyZWN0aW5nVG9Cb2FyZCcpO1xuICAgICAgY29uc3QgaXNMb2dpblJlY2VudCA9IGhhc1JlY2VudExvZ2luICYmIGxvZ2luVGltZXN0YW1wICYmIChEYXRlLm5vdygpIC0gcGFyc2VJbnQobG9naW5UaW1lc3RhbXApKSA8IDYwMDAwO1xuICAgICAgXG4gICAgICBpZiAoaXNMb2dpblJlY2VudCkge1xuICAgICAgICAvLyBNb3N0cmFyIGxvYWRpbmcgbWllbnRyYXMgZXNwZXJhbW9zIHF1ZSBGaXJlYmFzZSBBdXRoIHJlc3RhdXJlIGVsIHVzdWFyaW8gYW7Ds25pbW9cbiAgICAgICAgY29uc29sZS5sb2coJ+KPsyBbQm9hcmRQYWdlXSBSZW5kZXI6IExvZ2luIHJlY2llbnRlIGRldGVjdGFkbywgZXNwZXJhbmRvIHVzdWFyaW8uLi4nLCB7XG4gICAgICAgICAgaGFzUmVjZW50TG9naW4sXG4gICAgICAgICAgbG9naW5UaW1lc3RhbXAsXG4gICAgICAgICAgcmVkaXJlY3RpbmdUb0JvYXJkLFxuICAgICAgICAgIGJvYXJkSWRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtc2NyZWVuIHctZnVsbCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6ICcjOTZlNGU2JyB9fT5cbiAgICAgICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtOCB3LTggYW5pbWF0ZS1zcGluIHRleHQtc2xhdGUtOTAwXCIgLz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgdGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtc2xhdGUtOTAwXCI+Q2FyZ2FuZG8gdHUgdGFibGVyby4uLjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU2kgbm8gaGF5IGxvZ2luIHJlY2llbnRlLCByZWRpcmlnaXJcbiAgICBjb25zb2xlLmxvZygn4pqg77iPIFtCb2FyZFBhZ2VdIFJlbmRlcjogTm8gaGF5IHVzdWFyaW8geSBubyBoYXkgbG9naW4gcmVjaWVudGUsIHJlZGlyaWdpZW5kby4uLicpO1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoJy8nKTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLXNjcmVlbiB3LWZ1bGwgZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCIgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiAnI2NhZTNlMScgfX0+XG4gICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtOCB3LTggYW5pbWF0ZS1zcGluIHRleHQtc2xhdGUtOTAwXCIgLz5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS05MDBcIj5SZWRpcmlnaWVuZG8uLi48L3A+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKGlzQm9hcmRMb2FkaW5nIHx8IGJvYXJkSWQgPT09ICduZXcnKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLXNjcmVlbiB3LWZ1bGwgZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCIgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiAnIzc1ZThjZScgfX0+XG4gICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtOCB3LTggYW5pbWF0ZS1zcGluIHRleHQtc2xhdGUtOTAwXCIgLz5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS05MDBcIj5DYXJnYW5kbyB0dSBsaWVuem8uLi48L3A+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKGVycm9yKSByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJwLTEwIHRleHQtcmVkLTUwMFwiPkVycm9yOiB7ZXJyb3J9PC9kaXY+O1xuICBcbiAgLy8gU2kgbm8gaGF5IHRhYmxlcm8gcGVybyBoYXkgdXN1YXJpbywgbW9zdHJhciBsb2FkaW5nIG1pZW50cmFzIHNlIGNhcmdhXG4gIGlmICghYm9hcmQgJiYgdXNlcikge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC1zY3JlZW4gdy1mdWxsIGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiIHN0eWxlPXt7IGJhY2tncm91bmRDb2xvcjogJyNjYWUzZTEnIH19PlxuICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTggdy04IGFuaW1hdGUtc3BpbiB0ZXh0LXNsYXRlLTkwMFwiIC8+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgdGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtc2xhdGUtOTAwXCI+Q2FyZ2FuZG8gdHUgdGFibGVyby4uLjwvcD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbiAgXG4gIC8vIFNpIG5vIGhheSB0YWJsZXJvIHkgbm8gaGF5IHVzdWFyaW8sIHlhIHNlIG1hbmVqw7MgYXJyaWJhXG4gIGlmICghYm9hcmQpIHJldHVybiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxSZW5hbWVCb2FyZERpYWxvZ1xuICAgICAgICBpc09wZW49e2lzUmVuYW1lQm9hcmREaWFsb2dPcGVufVxuICAgICAgICBvbk9wZW5DaGFuZ2U9e3NldElzUmVuYW1lQm9hcmREaWFsb2dPcGVufVxuICAgICAgICBjdXJyZW50Qm9hcmROYW1lPXtib2FyZD8ubmFtZSB8fCAnU2luIG5vbWJyZSd9XG4gICAgICAgIG9uU2F2ZT17aGFuZGxlU2F2ZVJlbmFtZUJvYXJkfVxuICAgICAgLz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1zY3JlZW4gdy1zY3JlZW4gcmVsYXRpdmUgYmctWyMzYjNiM2JdIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgXG4gICAgICB7LyogMS4gTElFTlpPIElORklOSVRPICovfVxuICAgICAgPENhbnZhc1xuICAgICAgICByZWY9e2NhbnZhc1JlZn1cbiAgICAgICAgZWxlbWVudHM9e2VsZW1lbnRzIGFzIFdpdGhJZDxDYW52YXNFbGVtZW50PltdfVxuICAgICAgICBib2FyZD17Ym9hcmQgYXMgV2l0aElkPEJvYXJkPn1cbiAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzPXtzZWxlY3RlZEVsZW1lbnRJZHN9XG4gICAgICAgIG9uU2VsZWN0RWxlbWVudD17aGFuZGxlU2VsZWN0RWxlbWVudH1cbiAgICAgICAgdXBkYXRlRWxlbWVudD17dXBkYXRlRWxlbWVudH1cbiAgICAgICAgZGVsZXRlRWxlbWVudD17ZGVsZXRlRWxlbWVudH1cbiAgICAgICAgdW5hbmNob3JFbGVtZW50PXsoaWQpID0+IHtcbiAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHMuZmluZChlbCA9PiBlbC5pZCA9PT0gaWQpO1xuICAgICAgICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQucGFyZW50SWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZUVsZW1lbnQoaWQsIHsgcGFyZW50SWQ6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH19XG4gICAgICAgIGFkZEVsZW1lbnQ9e2FkZEVsZW1lbnR9XG4gICAgICAgIFxuICAgICAgICAvLyBJbnRlcmFjY2lvbmVzXG4gICAgICAgIG9uTG9jYXRlRWxlbWVudD17aGFuZGxlTG9jYXRlRWxlbWVudH1cbiAgICAgICAgb25Gb3JtYXRUb2dnbGU9e2hhbmRsZUZvcm1hdFRvZ2dsZX1cbiAgICAgICAgb25DaGFuZ2VOb3RlcGFkRm9ybWF0PXtoYW5kbGVDaGFuZ2VOb3RlcGFkRm9ybWF0fVxuICAgICAgICBvbkVkaXRFbGVtZW50PXtoYW5kbGVFZGl0RWxlbWVudH1cbiAgICAgICAgXG4gICAgICAgIC8vIEVzdGFkb1xuICAgICAgICBzZWxlY3RlZEVsZW1lbnQ9e3NlbGVjdGVkRWxlbWVudH1cbiAgICAgICAgYWN0aXZhdGVkRWxlbWVudElkPXthY3RpdmF0ZWRFbGVtZW50SWR9XG4gICAgICAgIGlzTW9iaWxlPXtpc01vYmlsZX1cbiAgICAgICAgc2V0SXNEaXJ0eT17c2V0SXNEaXJ0eX1cbiAgICAgICAgaXNMaXN0ZW5pbmc9e2lzRGljdGF0aW9uTGlzdGVuaW5nfVxuICAgICAgICBsaXZlVHJhbnNjcmlwdD17bGl2ZVRyYW5zY3JpcHR9XG4gICAgICAgIGZpbmFsVHJhbnNjcmlwdD17ZmluYWxUcmFuc2NyaXB0fVxuICAgICAgICBpbnRlcmltVHJhbnNjcmlwdD17aW50ZXJpbVRyYW5zY3JpcHR9XG4gICAgICAgIFxuICAgICAgICAvLyBQbGFjZWhvbGRlcnMgcGFyYSBwcm9wcyByZXF1ZXJpZGFzIHBvciBDYW52YXMgYW50aWd1b1xuICAgICAgICBvbkJyaW5nVG9Gcm9udD17KCkgPT4ge319XG4gICAgICAgIG9uU2VuZFRvQmFjaz17KCkgPT4ge319XG4gICAgICAgIG9uTW92ZUJhY2t3YXJkPXsoKSA9PiB7fX1cbiAgICAgICAgb25Hb1RvSG9tZT17KCkgPT4gY2FudmFzUmVmLmN1cnJlbnQ/LmdvVG9Ib21lKCl9XG4gICAgICAgIG9uQ2VudGVyVmlldz17KCkgPT4ge319XG4gICAgICAgIG9uR3JvdXBFbGVtZW50cz17KCkgPT4ge319XG4gICAgICAgIHNhdmVMYXN0Vmlldz17KCkgPT4ge319XG4gICAgICAgIG9uQWN0aXZhdGVEcmFnPXsoKSA9PiB7fX1cbiAgICAgICAgb25FZGl0Q29tbWVudD17aGFuZGxlRWRpdENvbW1lbnR9XG4gICAgICAgIG9uRHVwbGljYXRlRWxlbWVudD17KCkgPT4ge319XG4gICAgICAgIG9uVW5ncm91cD17KCkgPT4ge319XG4gICAgICAvPlxuICAgICAgXG4gICAgICB7LyogMi4gTUVOw5ogUFJJTkNJUEFMIChNYXBlbyBkZSBmdW5jaW9uZXMgYWwgbnVldm8gVG9vbHNTaWRlYmFyIFwiQmxpbmRhZG9cIikgKi99XG4gICAgICA8VG9vbHNTaWRlYmFyXG4gICAgICAgIGVsZW1lbnRzPXtlbGVtZW50cyB8fCBbXX1cbiAgICAgICAgYm9hcmRzPXtib2FyZHMgfHwgW119XG4gICAgICAgIG9uVXBsb2FkSW1hZ2U9e2hhbmRsZVVwbG9hZEltYWdlfVxuICAgICAgICBvbkFkZEltYWdlRnJvbVVybD17KCkgPT4gc2V0SXNJbWFnZVVybERpYWxvZ09wZW4odHJ1ZSl9XG4gICAgICAgIG9uUGFuVG9nZ2xlPXsoKSA9PiBjYW52YXNSZWYuY3VycmVudD8uYWN0aXZhdGVQYW5Nb2RlKCl9XG4gICAgICAgIG9uUmVuYW1lQm9hcmQ9e2hhbmRsZVJlbmFtZUJvYXJkV3JhcHBlcn1cbiAgICAgICAgb25EZWxldGVCb2FyZD17aGFuZGxlRGVsZXRlQm9hcmR9XG4gICAgICAgIGlzTGlzdGVuaW5nPXtpc0RpY3RhdGlvbkxpc3RlbmluZ31cbiAgICAgICAgb25Ub2dnbGVEaWN0YXRpb249e2hhbmRsZVRvZ2dsZURpY3RhdGlvbn1cbiAgICAgICAgb25PcGVuTm90ZXBhZD17aGFuZGxlT3Blbk5vdGVwYWR9XG4gICAgICAgIG9uTG9jYXRlRWxlbWVudD17aGFuZGxlTG9jYXRlRWxlbWVudH1cbiAgICAgICAgYWRkRWxlbWVudD17YWRkRWxlbWVudH1cbiAgICAgICAgY2xlYXJDYW52YXM9e2NsZWFyQ2FudmFzV3JhcHBlcn1cbiAgICAgICAgb25FeHBvcnRCb2FyZFRvUG5nPXtoYW5kbGVFeHBvcnRCb2FyZFRvUG5nfVxuICAgICAgICBvbkZvcm1hdFRvZ2dsZT17aGFuZGxlRm9ybWF0VG9nZ2xlfVxuICAgICAgICBpc0Zvcm1hdFRvb2xiYXJPcGVuPXtpc0Zvcm1hdFRvb2xiYXJPcGVufVxuICAgICAgLz5cblxuICAgICAgey8qIDMuIEJBUlJBIERFIEZPUk1BVE8gKi99XG4gICAgICA8Rm9ybWF0dGluZ1Rvb2xiYXJcbiAgICAgICAgaXNPcGVuPXtpc0Zvcm1hdFRvb2xiYXJPcGVufVxuICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRJc0Zvcm1hdFRvb2xiYXJPcGVuKGZhbHNlKX1cbiAgICAgICAgZWxlbWVudHM9e3NlbGVjdGVkRWxlbWVudCA/IFtzZWxlY3RlZEVsZW1lbnRdIDogW119XG4gICAgICAgIG9uQWRkQ29tbWVudD17aGFuZGxlQWRkTWFya2VyfVxuICAgICAgICBvbkVkaXRDb21tZW50PXtoYW5kbGVFZGl0Q29tbWVudH1cbiAgICAgICAgaXNNb2JpbGVTaGVldD17aXNNb2JpbGV9XG4gICAgICAgIG9uTG9jYXRlRWxlbWVudD17aGFuZGxlTG9jYXRlRWxlbWVudH1cbiAgICAgICAgb25QYW5Ub2dnbGU9eygpID0+IHtcbiAgICAgICAgICBzZXRJc1Bhbm5pbmdBY3RpdmUocHJldiA9PiAhcHJldik7XG4gICAgICAgICAgY2FudmFzUmVmLmN1cnJlbnQ/LmFjdGl2YXRlUGFuTW9kZSgpO1xuICAgICAgICB9fVxuICAgICAgICBhZGRFbGVtZW50PXthZGRFbGVtZW50fVxuICAgICAgICBpc1Bhbm5pbmdBY3RpdmU9e2lzUGFubmluZ0FjdGl2ZX1cbiAgICAgIC8+XG5cbiAgICAgIHsvKiA0LiBEScOBTE9HT1MgKi99XG4gICAgICA8Q2hhbmdlRm9ybWF0RGlhbG9nXG4gICAgICAgIGlzT3Blbj17Y2hhbmdlRm9ybWF0RGlhbG9nT3Blbn1cbiAgICAgICAgb25PcGVuQ2hhbmdlPXtzZXRDaGFuZ2VGb3JtYXREaWFsb2dPcGVufVxuICAgICAgICBub3RlcGFkPXtzZWxlY3RlZE5vdGVwYWRGb3JGb3JtYXR9XG4gICAgICAgIG9uU2F2ZUZvcm1hdD17aGFuZGxlU2F2ZUZvcm1hdH1cbiAgICAgIC8+XG5cbiAgICAgIDxBZGRJbWFnZUZyb21VcmxEaWFsb2dcbiAgICAgICAgaXNPcGVuPXtpc0ltYWdlVXJsRGlhbG9nT3Blbn1cbiAgICAgICAgb25PcGVuQ2hhbmdlPXtzZXRJc0ltYWdlVXJsRGlhbG9nT3Blbn1cbiAgICAgICAgb25BZGRJbWFnZT17YXN5bmMgKHVybCkgPT4ge1xuICAgICAgICAgIGF3YWl0IGFkZEVsZW1lbnQoJ2ltYWdlJywgeyBjb250ZW50OiB7IHVybCB9LCBwcm9wZXJ0aWVzOiB7IHNpemU6IHsgd2lkdGg6IDMwMCwgaGVpZ2h0OiAyMDAgfSB9IH0pO1xuICAgICAgICAgIHNldElzSW1hZ2VVcmxEaWFsb2dPcGVuKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgIC8+XG5cblxuICAgICAgey8qIERpw6Fsb2dvIGRlIGVkaWNpw7NuIGRlIGNvbWVudGFyaW9zICovfVxuICAgICAge3NlbGVjdGVkQ29tbWVudEZvckVkaXQgJiYgKFxuICAgICAgICA8RWRpdENvbW1lbnREaWFsb2dcbiAgICAgICAgICBpc09wZW49e2lzRWRpdENvbW1lbnREaWFsb2dPcGVufVxuICAgICAgICAgIG9uT3BlbkNoYW5nZT17c2V0SXNFZGl0Q29tbWVudERpYWxvZ09wZW59XG4gICAgICAgICAgY29tbWVudD17c2VsZWN0ZWRDb21tZW50Rm9yRWRpdH1cbiAgICAgICAgICBvblVwZGF0ZT17dXBkYXRlRWxlbWVudH1cbiAgICAgICAgICBvbkRlbGV0ZT17ZGVsZXRlRWxlbWVudH1cbiAgICAgICAgLz5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBQYW5lbCBkZSBpbmZvcm1hY2nDs24gZGVsIGVsZW1lbnRvIChPcGNpw7NuIDQpICovfVxuICAgICAgPEVsZW1lbnRJbmZvUGFuZWxcbiAgICAgICAgZWxlbWVudD17c2VsZWN0ZWRFbGVtZW50fVxuICAgICAgICBpc1Zpc2libGU9e2lzSW5mb1BhbmVsVmlzaWJsZSAmJiAhIXNlbGVjdGVkRWxlbWVudH1cbiAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0SXNJbmZvUGFuZWxWaXNpYmxlKGZhbHNlKX1cbiAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICA8Lz5cbiAgKTtcbn0iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlTWVtbyIsInVzZVJvdXRlciIsIkxvYWRlcjIiLCJ1c2VVc2VyIiwidXNlU3RvcmFnZSIsInVzZUJvYXJkU3RvcmUiLCJ1c2VCb2FyZFN0YXRlIiwidXNlRWxlbWVudE1hbmFnZXIiLCJ1c2VNZWRpYVF1ZXJ5IiwidXNlVG9hc3QiLCJ1cGxvYWRGaWxlIiwiaHRtbDJjYW52YXMiLCJDYW52YXMiLCJUb29sc1NpZGViYXIiLCJGb3JtYXR0aW5nVG9vbGJhciIsIkFkZEltYWdlRnJvbVVybERpYWxvZyIsIkNoYW5nZUZvcm1hdERpYWxvZyIsIkVkaXRDb21tZW50RGlhbG9nIiwiRWxlbWVudEluZm9QYW5lbCIsIlJlbmFtZUJvYXJkRGlhbG9nIiwidXNlRGljdGF0aW9uIiwiQm9hcmRQYWdlIiwicGFyYW1zIiwiZWxlbWVudHMiLCJib2FyZElkIiwicm91dGVyIiwidXNlciIsImlzVXNlckxvYWRpbmciLCJhdXRoTG9hZGluZyIsInVzZXJFcnJvciIsInN0b3JhZ2UiLCJ0b2FzdCIsImlzTW9iaWxlIiwiY29uc29sZSIsImxvZyIsImhhc1VzZXIiLCJ1c2VySWQiLCJ1aWQiLCJpc0Fub255bW91cyIsInBhdGhuYW1lIiwid2luZG93IiwibG9jYXRpb24iLCJsb2FkQm9hcmRSZWYiLCJjcmVhdGVCb2FyZFJlZiIsImNsZWFudXBSZWYiLCJ0b2FzdFJlZiIsImN1cnJlbnQiLCJtZXNzYWdlIiwidXNlckVtYWlsIiwiZW1haWwiLCJzZXNzaW9uU3RvcmFnZSIsImhhc1JlY2VudExvZ2luIiwiZ2V0SXRlbSIsImxvZ2luVGltZXN0YW1wIiwicmVkaXJlY3RpbmdUb0JvYXJkIiwiYm9hcmQiLCJsb2FkQm9hcmQiLCJjcmVhdGVCb2FyZCIsInVwZGF0ZUVsZW1lbnQiLCJkZWxldGVFbGVtZW50Iiwic2VsZWN0ZWRFbGVtZW50SWRzIiwic2V0U2VsZWN0ZWRFbGVtZW50SWRzIiwiaXNMb2FkaW5nIiwiaXNCb2FyZExvYWRpbmciLCJlcnJvciIsImNsZWFudXAiLCJib2FyZHMiLCJoYW5kbGVSZW5hbWVCb2FyZCIsImhhbmRsZURlbGV0ZUJvYXJkIiwiY2xlYXJDYW52YXMiLCJjYW52YXNSZWYiLCJoYW5kbGVSZW5hbWVCb2FyZFdyYXBwZXIiLCJzZXRJc1JlbmFtZUJvYXJkRGlhbG9nT3BlbiIsImhhbmRsZVNhdmVSZW5hbWVCb2FyZCIsIm5ld05hbWUiLCJjbGVhckNhbnZhc1dyYXBwZXIiLCJpc0Zvcm1hdFRvb2xiYXJPcGVuIiwic2V0SXNGb3JtYXRUb29sYmFyT3BlbiIsImlzSW1hZ2VVcmxEaWFsb2dPcGVuIiwic2V0SXNJbWFnZVVybERpYWxvZ09wZW4iLCJjaGFuZ2VGb3JtYXREaWFsb2dPcGVuIiwic2V0Q2hhbmdlRm9ybWF0RGlhbG9nT3BlbiIsImlzUGFubmluZ0FjdGl2ZSIsInNldElzUGFubmluZ0FjdGl2ZSIsImlzUmVuYW1lQm9hcmREaWFsb2dPcGVuIiwic2VsZWN0ZWRFbGVtZW50Iiwic2V0U2VsZWN0ZWRFbGVtZW50IiwiYWN0aXZhdGVkRWxlbWVudElkIiwic2V0QWN0aXZhdGVkRWxlbWVudElkIiwic2VsZWN0ZWROb3RlcGFkRm9yRm9ybWF0Iiwic2V0U2VsZWN0ZWROb3RlcGFkRm9yRm9ybWF0IiwiaXNEaXJ0eSIsInNldElzRGlydHkiLCJpc0VkaXRDb21tZW50RGlhbG9nT3BlbiIsInNldElzRWRpdENvbW1lbnREaWFsb2dPcGVuIiwic2VsZWN0ZWRDb21tZW50Rm9yRWRpdCIsInNldFNlbGVjdGVkQ29tbWVudEZvckVkaXQiLCJvcmlnaW5hbFpJbmRleFJlZiIsIk1hcCIsImlzSW5mb1BhbmVsVmlzaWJsZSIsInNldElzSW5mb1BhbmVsVmlzaWJsZSIsImlzU3VwcG9ydGVkIiwiaXNEaWN0YXRpb25TdXBwb3J0ZWQiLCJpc0xpc3RlbmluZyIsImlzRGljdGF0aW9uTGlzdGVuaW5nIiwidHJhbnNjcmlwdCIsImZpbmFsVHJhbnNjcmlwdCIsImludGVyaW1UcmFuc2NyaXB0IiwicGVybWlzc2lvbkVycm9yIiwidG9nZ2xlIiwidG9nZ2xlRGljdGF0aW9uIiwibGl2ZVRyYW5zY3JpcHQiLCJmaW5hbCIsImludGVyaW0iLCJ0cmltIiwiaGFuZGxlVG9nZ2xlRGljdGF0aW9uIiwidmFyaWFudCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdXJhdGlvbiIsImdldFZpZXdwb3J0Q2VudGVyIiwiY2VudGVyIiwieCIsImlubmVyV2lkdGgiLCJ5IiwiaW5uZXJIZWlnaHQiLCJlbGVtZW50c1JlZiIsImdldE5leHRaSW5kZXgiLCJjdXJyZW50RWxlbWVudHMiLCJsZW5ndGgiLCJ6SW5kZXhlcyIsImZpbHRlciIsImUiLCJ6SW5kZXgiLCJtYXAiLCJNYXRoIiwibWF4IiwiYWRkRWxlbWVudCIsInNlbGVjdGVkRWxlbWVudElkIiwiZm91bmRFbGVtZW50IiwiZmluZCIsImVsIiwiaWQiLCJ1cGRhdGVkQXQiLCJmb3VuZElkIiwiY3VycmVudElkIiwicHJvY2VzcyIsInR5cGUiLCJwb3NpdGlvbiIsInByb3BlcnRpZXMiLCJzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJwYXJlbnRJZCIsIkRFQlVHX0VMRU1FTlRTIiwiaGFuZGxlS2V5RG93biIsImN0cmxLZXkiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsInByZXYiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhc0xvYWRlZFJlZiIsImlzTG9hZGluZ1JlZiIsIndhaXRUaW1lclJlZiIsImN1cnJlbnRCb2FyZElkUmVmIiwiaGFzTG9hZGVkIiwiY3VycmVudEJvYXJkSWQiLCJvbGQiLCJuZXciLCJjbGVhclRpbWVvdXQiLCJhbm9ueW1vdXNVc2VySWQiLCJpc0xvZ2luUmVjZW50IiwiRGF0ZSIsIm5vdyIsInBhcnNlSW50IiwidGltZVNpbmNlTG9naW4iLCJjbGVhciIsImxvY2FsU3RvcmFnZSIsInJlcGxhY2UiLCJ3YWl0VGltZSIsInNldFRpbWVvdXQiLCJyZW1vdmVJdGVtIiwidGhlbiIsIm5ld0JvYXJkSWQiLCJzZXRJdGVtIiwidG9TdHJpbmciLCJocmVmIiwiY2F0Y2giLCJsb2FkZWRCb2FyZElkIiwiaGFuZGxlU2VsZWN0RWxlbWVudCIsImVsZW1lbnRJZCIsImlzTXVsdGlTZWxlY3QiLCJoYW5kbGVVcGxvYWRJbWFnZSIsImlucHV0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYWNjZXB0Iiwib25jaGFuZ2UiLCJmaWxlIiwidGFyZ2V0IiwiZmlsZXMiLCJ1cGxvYWRSZXN1bHQiLCJ1cmwiLCJjb250ZW50IiwiY2xpY2siLCJoYW5kbGVGb3JtYXRUb2dnbGUiLCJoYW5kbGVBZGRNYXJrZXIiLCJ2aWV3cG9ydENlbnRlciIsImxhYmVsIiwidGV4dCIsImhhbmRsZUxvY2F0ZUVsZW1lbnQiLCJlbGVtZW50IiwiY2VudGVyT25FbGVtZW50IiwiaGFuZGxlT3Blbk5vdGVwYWQiLCJoaWRkZW4iLCJoYW5kbGVDaGFuZ2VOb3RlcGFkRm9ybWF0IiwiaGFuZGxlU2F2ZUZvcm1hdCIsImZvcm1hdCIsIm5ld1NpemUiLCJoYW5kbGVFZGl0Q29tbWVudCIsImNvbW1lbnQiLCJoYW5kbGVFZGl0RWxlbWVudCIsImZpcnN0TGF5ZXJUeXBlcyIsImlzRmlyc3RMYXllciIsImluY2x1ZGVzIiwiZWxlbWVudFByb3BzIiwiY3VycmVudFpJbmRleCIsImhhcyIsInNldCIsIm1heFpJbmRleCIsIm5ld1pJbmRleCIsImZvckVhY2giLCJvcmlnaW5hbFpJbmRleCIsImhhbmRsZUV4cG9ydEJvYXJkVG9QbmciLCJjYW52YXNDb250YWluZXIiLCJnZXRDYW52YXNDb250YWluZXIiLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCIsInZpZXdwb3J0V2lkdGgiLCJjbGllbnRXaWR0aCIsInZpZXdwb3J0SGVpZ2h0IiwiY2xpZW50SGVpZ2h0Iiwic2NhbGUiLCJjb250YWluZXJSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2FudmFzIiwiYmFja2dyb3VuZENvbG9yIiwidXNlQ09SUyIsImxvZ2dpbmciLCJhbGxvd1RhaW50Iiwic2Nyb2xsWCIsInNjcm9sbFkiLCJ3aW5kb3dXaWR0aCIsIndpbmRvd0hlaWdodCIsImxlZnQiLCJ0b3AiLCJyZW1vdmUiLCJ0b0Jsb2IiLCJibG9iIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwibGluayIsImJvYXJkTmFtZSIsIm5hbWUiLCJkb3dubG9hZCIsImFwcGVuZENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJyZXZva2VPYmplY3RVUkwiLCJoYXNCb2FyZCIsImRpdiIsImNsYXNzTmFtZSIsInN0eWxlIiwicCIsImlzT3BlbiIsIm9uT3BlbkNoYW5nZSIsImN1cnJlbnRCb2FyZE5hbWUiLCJvblNhdmUiLCJyZWYiLCJvblNlbGVjdEVsZW1lbnQiLCJ1bmFuY2hvckVsZW1lbnQiLCJ1bmRlZmluZWQiLCJvbkxvY2F0ZUVsZW1lbnQiLCJvbkZvcm1hdFRvZ2dsZSIsIm9uQ2hhbmdlTm90ZXBhZEZvcm1hdCIsIm9uRWRpdEVsZW1lbnQiLCJvbkJyaW5nVG9Gcm9udCIsIm9uU2VuZFRvQmFjayIsIm9uTW92ZUJhY2t3YXJkIiwib25Hb1RvSG9tZSIsImdvVG9Ib21lIiwib25DZW50ZXJWaWV3Iiwib25Hcm91cEVsZW1lbnRzIiwic2F2ZUxhc3RWaWV3Iiwib25BY3RpdmF0ZURyYWciLCJvbkVkaXRDb21tZW50Iiwib25EdXBsaWNhdGVFbGVtZW50Iiwib25Vbmdyb3VwIiwib25VcGxvYWRJbWFnZSIsIm9uQWRkSW1hZ2VGcm9tVXJsIiwib25QYW5Ub2dnbGUiLCJhY3RpdmF0ZVBhbk1vZGUiLCJvblJlbmFtZUJvYXJkIiwib25EZWxldGVCb2FyZCIsIm9uVG9nZ2xlRGljdGF0aW9uIiwib25PcGVuTm90ZXBhZCIsIm9uRXhwb3J0Qm9hcmRUb1BuZyIsIm9uQ2xvc2UiLCJvbkFkZENvbW1lbnQiLCJpc01vYmlsZVNoZWV0Iiwibm90ZXBhZCIsIm9uU2F2ZUZvcm1hdCIsIm9uQWRkSW1hZ2UiLCJvblVwZGF0ZSIsIm9uRGVsZXRlIiwiaXNWaXNpYmxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/board/[boardId]/page.tsx\n"));

/***/ })

});